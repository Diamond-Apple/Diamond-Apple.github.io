const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/VPLocalSearchBox.Dl-6EuHM.js","assets/chunks/framework.D08jFC13.js"])))=>i.map(i=>d[i]);
import{d as A,o as v,c as b,r as C,n as Z,a as Pe,t as q,b as N,w as E,e as x,T as fn,_ as O,u as Qi,i as er,f as tr,g as hn,h as F,j as S,k as _,l as Ge,m as Qt,p as J,q as Ie,s as wt,v as xe,x as dn,y as gn,z as nr,A as ir,B as We,F as ne,C as ae,D as ui,E as Pt,G as D,H as Te,I as ci,J as It,K as Ne,L as Lt,M as rr,N as fi,O as en,P as hi,Q as di,R as xt,S as sr,U as ar,V as or,W as gi,X as pi,Y as lr,Z as ur,$ as cr,a0 as fr,a1 as hr}from"./framework.D08jFC13.js";const dr=A({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(o){return(s,i)=>(v(),b("span",{class:Z(["VPBadge",s.type])},[C(s.$slots,"default",{},()=>[Pe(q(s.text),1)])],2))}}),gr={key:0,class:"VPBackdrop"},pr=A({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(o){return(s,i)=>(v(),N(fn,{name:"fade"},{default:E(()=>[s.show?(v(),b("div",gr)):x("",!0)]),_:1}))}}),vr=O(pr,[["__scopeId","data-v-c79a1216"]]),G=Qi;function mr(o,s){let i,t=!1;return()=>{i&&clearTimeout(i),t?i=setTimeout(o,s):(o(),(t=!0)&&setTimeout(()=>t=!1,s))}}function tn(o){return/^\//.test(o)?o:`/${o}`}function pn(o){const{pathname:s,search:i,hash:t,protocol:e}=new URL(o,"http://a.com");if(er(o)||o.startsWith("#")||!e.startsWith("http")||!tr(s))return o;const{site:n}=G(),r=s.endsWith("/")||s.endsWith(".html")?o:o.replace(/(?:(^\.+)\/)?.*$/,`$1${s.replace(/(\.md)?$/,n.value.cleanUrls?"":".html")}${i}${t}`);return hn(r)}function ot({correspondingLink:o=!1}={}){const{site:s,localeIndex:i,page:t,theme:e,hash:n}=G(),r=F(()=>{var l,u;return{label:(l=s.value.locales[i.value])==null?void 0:l.label,link:((u=s.value.locales[i.value])==null?void 0:u.link)||(i.value==="root"?"/":`/${i.value}/`)}});return{localeLinks:F(()=>Object.entries(s.value.locales).flatMap(([l,u])=>r.value.label===u.label?[]:{text:u.label,link:yr(u.link||(l==="root"?"/":`/${l}/`),e.value.i18nRouting!==!1&&o,t.value.relativePath.slice(r.value.link.length-1),!s.value.cleanUrls)+n.value})),currentLang:r}}function yr(o,s,i,t){return s?o.replace(/\/$/,"")+tn(i.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,t?".html":"")):o}const _r={class:"NotFound"},kr={class:"code"},br={class:"title"},Cr={class:"quote"},Tr={class:"action"},Sr=["href","aria-label"],Er=A({__name:"NotFound",setup(o){const{theme:s}=G(),{currentLang:i}=ot();return(t,e)=>{var n,r,a,l,u;return v(),b("div",_r,[S("p",kr,q(((n=_(s).notFound)==null?void 0:n.code)??"404"),1),S("h1",br,q(((r=_(s).notFound)==null?void 0:r.title)??"PAGE NOT FOUND"),1),e[0]||(e[0]=S("div",{class:"divider"},null,-1)),S("blockquote",Cr,q(((a=_(s).notFound)==null?void 0:a.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),S("div",Tr,[S("a",{class:"link",href:_(hn)(_(i).link),"aria-label":((l=_(s).notFound)==null?void 0:l.linkLabel)??"go to home"},q(((u=_(s).notFound)==null?void 0:u.linkText)??"Take me home"),9,Sr)])])}}}),wr=O(Er,[["__scopeId","data-v-d6be1790"]]);function vi(o,s){if(Array.isArray(o))return gt(o);if(o==null)return[];s=tn(s);const i=Object.keys(o).sort((e,n)=>n.split("/").length-e.split("/").length).find(e=>s.startsWith(tn(e))),t=i?o[i]:[];return Array.isArray(t)?gt(t):gt(t.items,t.base)}function Pr(o){const s=[];let i=0;for(const t in o){const e=o[t];if(e.items){i=s.push(e);continue}s[i]||s.push({items:[]}),s[i].items.push(e)}return s}function Ir(o){const s=[];function i(t){for(const e of t)e.text&&e.link&&s.push({text:e.text,link:e.link,docFooterText:e.docFooterText}),e.items&&i(e.items)}return i(o),s}function nn(o,s){return Array.isArray(s)?s.some(i=>nn(o,i)):Ge(o,s.link)?!0:s.items?nn(o,s.items):!1}function gt(o,s){return[...o].map(i=>{const t={...i},e=t.base||s;return e&&t.link&&(t.link=e+t.link),t.items&&(t.items=gt(t.items,e)),t})}function Ae(){const{frontmatter:o,page:s,theme:i}=G(),t=Qt("(min-width: 960px)"),e=J(!1),n=F(()=>{const m=i.value.sidebar,k=s.value.relativePath;return m?vi(m,k):[]}),r=J(n.value);Ie(n,(m,k)=>{JSON.stringify(m)!==JSON.stringify(k)&&(r.value=n.value)});const a=F(()=>o.value.sidebar!==!1&&r.value.length>0&&o.value.layout!=="home"),l=F(()=>u?o.value.aside==null?i.value.aside==="left":o.value.aside==="left":!1),u=F(()=>o.value.layout==="home"?!1:o.value.aside!=null?!!o.value.aside:i.value.aside!==!1),c=F(()=>a.value&&t.value),f=F(()=>a.value?Pr(r.value):[]);function d(){e.value=!0}function g(){e.value=!1}function p(){e.value?g():d()}return{isOpen:e,sidebar:r,sidebarGroups:f,hasSidebar:a,hasAside:u,leftAside:l,isSidebarEnabled:c,open:d,close:g,toggle:p}}function Lr(o,s){let i;wt(()=>{i=o.value?document.activeElement:void 0}),xe(()=>{window.addEventListener("keyup",t)}),dn(()=>{window.removeEventListener("keyup",t)});function t(e){e.key==="Escape"&&o.value&&(s(),i==null||i.focus())}}function xr(o){const{page:s,hash:i}=G(),t=J(!1),e=F(()=>o.value.collapsed!=null),n=F(()=>!!o.value.link),r=J(!1),a=()=>{r.value=Ge(s.value.relativePath,o.value.link)};Ie([s,o,i],a),xe(a);const l=F(()=>r.value?!0:o.value.items?nn(s.value.relativePath,o.value.items):!1),u=F(()=>!!(o.value.items&&o.value.items.length));wt(()=>{t.value=!!(e.value&&o.value.collapsed)}),gn(()=>{(r.value||l.value)&&(t.value=!1)});function c(){e.value&&(t.value=!t.value)}return{collapsed:t,collapsible:e,isLink:n,isActiveLink:r,hasActiveLink:l,hasChildren:u,toggle:c}}function Ar(){const{hasSidebar:o}=Ae(),s=Qt("(min-width: 960px)"),i=Qt("(min-width: 1280px)");return{isAsideEnabled:F(()=>!i.value&&!s.value?!1:o.value?i.value:s.value)}}const rn=[];function mi(o){return typeof o.outline=="object"&&!Array.isArray(o.outline)&&o.outline.label||o.outlineTitle||"On this page"}function vn(o){const s=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(i=>i.id&&i.hasChildNodes()).map(i=>{const t=Number(i.tagName[1]);return{element:i,title:Dr(i),link:"#"+i.id,level:t}});return Or(s,o)}function Dr(o){let s="";for(const i of o.childNodes)if(i.nodeType===1){if(i.classList.contains("VPBadge")||i.classList.contains("header-anchor")||i.classList.contains("ignore-header"))continue;s+=i.textContent}else i.nodeType===3&&(s+=i.textContent);return s.trim()}function Or(o,s){if(s===!1)return[];const i=(typeof s=="object"&&!Array.isArray(s)?s.level:s)||2,[t,e]=typeof i=="number"?[i,i]:i==="deep"?[2,6]:i;return Nr(o,t,e)}function Rr(o,s){const{isAsideEnabled:i}=Ar(),t=mr(n,100);let e=null;xe(()=>{requestAnimationFrame(n),window.addEventListener("scroll",t)}),nr(()=>{r(location.hash)}),dn(()=>{window.removeEventListener("scroll",t)});function n(){if(!i.value)return;const a=window.scrollY,l=window.innerHeight,u=document.body.offsetHeight,c=Math.abs(a+l-u)<1,f=rn.map(({element:g,link:p})=>({link:p,top:Mr(g)})).filter(({top:g})=>!Number.isNaN(g)).sort((g,p)=>g.top-p.top);if(!f.length){r(null);return}if(a<1){r(null);return}if(c){r(f[f.length-1].link);return}let d=null;for(const{link:g,top:p}of f){if(p>a+ir()+4)break;d=g}r(d)}function r(a){e&&e.classList.remove("active"),a==null?e=null:e=o.value.querySelector(`a[href="${decodeURIComponent(a)}"]`);const l=e;l?(l.classList.add("active"),s.value.style.top=l.offsetTop+39+"px",s.value.style.opacity="1"):(s.value.style.top="33px",s.value.style.opacity="0")}}function Mr(o){let s=0;for(;o!==document.body;){if(o===null)return NaN;s+=o.offsetTop,o=o.offsetParent}return s}function Nr(o,s,i){rn.length=0;const t=[],e=[];return o.forEach(n=>{const r={...n,children:[]};let a=e[e.length-1];for(;a&&a.level>=r.level;)e.pop(),a=e[e.length-1];if(r.element.classList.contains("ignore-header")||a&&"shouldIgnore"in a){e.push({level:r.level,shouldIgnore:!0});return}r.level>i||r.level<s||(rn.push({element:r.element,link:r.link}),a?a.children.push(r):t.push(r),e.push(r))}),t}const Fr=["href","title"],Hr=A({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(o){function s({target:i}){const t=i.href.split("#")[1],e=document.getElementById(decodeURIComponent(t));e==null||e.focus({preventScroll:!0})}return(i,t)=>{const e=We("VPDocOutlineItem",!0);return v(),b("ul",{class:Z(["VPDocOutlineItem",i.root?"root":"nested"])},[(v(!0),b(ne,null,ae(i.headers,({children:n,link:r,title:a})=>(v(),b("li",null,[S("a",{class:"outline-link",href:r,onClick:s,title:a},q(a),9,Fr),n!=null&&n.length?(v(),N(e,{key:0,headers:n},null,8,["headers"])):x("",!0)]))),256))],2)}}}),yi=O(Hr,[["__scopeId","data-v-b933a997"]]),Br={class:"content"},$r={"aria-level":"2",class:"outline-title",id:"doc-outline-aria-label",role:"heading"},Vr=A({__name:"VPDocAsideOutline",setup(o){const{frontmatter:s,theme:i}=G(),t=ui([]);Pt(()=>{t.value=vn(s.value.outline??i.value.outline)});const e=J(),n=J();return Rr(e,n),(r,a)=>(v(),b("nav",{"aria-labelledby":"doc-outline-aria-label",class:Z(["VPDocAsideOutline",{"has-outline":t.value.length>0}]),ref_key:"container",ref:e},[S("div",Br,[S("div",{class:"outline-marker",ref_key:"marker",ref:n},null,512),S("div",$r,q(_(mi)(_(i))),1),D(yi,{headers:t.value,root:!0},null,8,["headers"])])],2))}}),Ur=O(Vr,[["__scopeId","data-v-a5bbad30"]]),jr={class:"VPDocAsideCarbonAds"},Gr=A({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(o){const s=()=>null;return(i,t)=>(v(),b("div",jr,[D(_(s),{"carbon-ads":i.carbonAds},null,8,["carbon-ads"])]))}}),Wr={class:"VPDocAside"},zr=A({__name:"VPDocAside",setup(o){const{theme:s}=G();return(i,t)=>(v(),b("div",Wr,[C(i.$slots,"aside-top",{},void 0,!0),C(i.$slots,"aside-outline-before",{},void 0,!0),D(Ur),C(i.$slots,"aside-outline-after",{},void 0,!0),t[0]||(t[0]=S("div",{class:"spacer"},null,-1)),C(i.$slots,"aside-ads-before",{},void 0,!0),_(s).carbonAds?(v(),N(Gr,{key:0,"carbon-ads":_(s).carbonAds},null,8,["carbon-ads"])):x("",!0),C(i.$slots,"aside-ads-after",{},void 0,!0),C(i.$slots,"aside-bottom",{},void 0,!0)]))}}),Kr=O(zr,[["__scopeId","data-v-3f215769"]]);function Yr(){const{theme:o,page:s}=G();return F(()=>{const{text:i="Edit this page",pattern:t=""}=o.value.editLink||{};let e;return typeof t=="function"?e=t(s.value):e=t.replace(/:path/g,s.value.filePath),{url:e,text:i}})}function Xr(){const{page:o,theme:s,frontmatter:i}=G();return F(()=>{var u,c,f,d,g,p,m,k;const t=vi(s.value.sidebar,o.value.relativePath),e=Ir(t),n=qr(e,I=>I.link.replace(/[?#].*$/,"")),r=n.findIndex(I=>Ge(o.value.relativePath,I.link)),a=((u=s.value.docFooter)==null?void 0:u.prev)===!1&&!i.value.prev||i.value.prev===!1,l=((c=s.value.docFooter)==null?void 0:c.next)===!1&&!i.value.next||i.value.next===!1;return{prev:a?void 0:{text:(typeof i.value.prev=="string"?i.value.prev:typeof i.value.prev=="object"?i.value.prev.text:void 0)??((f=n[r-1])==null?void 0:f.docFooterText)??((d=n[r-1])==null?void 0:d.text),link:(typeof i.value.prev=="object"?i.value.prev.link:void 0)??((g=n[r-1])==null?void 0:g.link)},next:l?void 0:{text:(typeof i.value.next=="string"?i.value.next:typeof i.value.next=="object"?i.value.next.text:void 0)??((p=n[r+1])==null?void 0:p.docFooterText)??((m=n[r+1])==null?void 0:m.text),link:(typeof i.value.next=="object"?i.value.next.link:void 0)??((k=n[r+1])==null?void 0:k.link)}}})}function qr(o,s){const i=new Set;return o.filter(t=>{const e=s(t);return i.has(e)?!1:i.add(e)})}const pe=A({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(o){const s=o,i=F(()=>s.tag??(s.href?"a":"span")),t=F(()=>s.href&&ci.test(s.href)||s.target==="_blank");return(e,n)=>(v(),N(Te(i.value),{class:Z(["VPLink",{link:e.href,"vp-external-link-icon":t.value,"no-icon":e.noIcon}]),href:e.href?_(pn)(e.href):void 0,target:e.target??(t.value?"_blank":void 0),rel:e.rel??(t.value?"noreferrer":void 0)},{default:E(()=>[C(e.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),Jr={class:"VPLastUpdated"},Zr=["datetime"],Qr=A({__name:"VPDocFooterLastUpdated",setup(o){const{theme:s,page:i,lang:t}=G(),e=F(()=>new Date(i.value.lastUpdated)),n=F(()=>e.value.toISOString()),r=J("");return xe(()=>{wt(()=>{var a,l,u;r.value=new Intl.DateTimeFormat((l=(a=s.value.lastUpdated)==null?void 0:a.formatOptions)!=null&&l.forceLocale?t.value:void 0,((u=s.value.lastUpdated)==null?void 0:u.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(e.value)})}),(a,l)=>{var u;return v(),b("p",Jr,[Pe(q(((u=_(s).lastUpdated)==null?void 0:u.text)||_(s).lastUpdatedText||"Last updated")+": ",1),S("time",{datetime:n.value},q(r.value),9,Zr)])}}}),es=O(Qr,[["__scopeId","data-v-e98dd255"]]),ts={key:0,class:"VPDocFooter"},ns={key:0,class:"edit-info"},is={key:0,class:"edit-link"},rs={key:1,class:"last-updated"},ss={key:1,class:"prev-next","aria-labelledby":"doc-footer-aria-label"},as={class:"pager"},os=["innerHTML"],ls=["innerHTML"],us={class:"pager"},cs=["innerHTML"],fs=["innerHTML"],hs=A({__name:"VPDocFooter",setup(o){const{theme:s,page:i,frontmatter:t}=G(),e=Yr(),n=Xr(),r=F(()=>s.value.editLink&&t.value.editLink!==!1),a=F(()=>i.value.lastUpdated),l=F(()=>r.value||a.value||n.value.prev||n.value.next);return(u,c)=>{var f,d,g,p;return l.value?(v(),b("footer",ts,[C(u.$slots,"doc-footer-before",{},void 0,!0),r.value||a.value?(v(),b("div",ns,[r.value?(v(),b("div",is,[D(pe,{class:"edit-link-button",href:_(e).url,"no-icon":!0},{default:E(()=>[c[0]||(c[0]=S("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),Pe(" "+q(_(e).text),1)]),_:1},8,["href"])])):x("",!0),a.value?(v(),b("div",rs,[D(es)])):x("",!0)])):x("",!0),(f=_(n).prev)!=null&&f.link||(d=_(n).next)!=null&&d.link?(v(),b("nav",ss,[c[1]||(c[1]=S("span",{class:"visually-hidden",id:"doc-footer-aria-label"},"Pager",-1)),S("div",as,[(g=_(n).prev)!=null&&g.link?(v(),N(pe,{key:0,class:"pager-link prev",href:_(n).prev.link},{default:E(()=>{var m;return[S("span",{class:"desc",innerHTML:((m=_(s).docFooter)==null?void 0:m.prev)||"Previous page"},null,8,os),S("span",{class:"title",innerHTML:_(n).prev.text},null,8,ls)]}),_:1},8,["href"])):x("",!0)]),S("div",us,[(p=_(n).next)!=null&&p.link?(v(),N(pe,{key:0,class:"pager-link next",href:_(n).next.link},{default:E(()=>{var m;return[S("span",{class:"desc",innerHTML:((m=_(s).docFooter)==null?void 0:m.next)||"Next page"},null,8,cs),S("span",{class:"title",innerHTML:_(n).next.text},null,8,fs)]}),_:1},8,["href"])):x("",!0)])])):x("",!0)])):x("",!0)}}}),ds=O(hs,[["__scopeId","data-v-e257564d"]]),gs={class:"container"},ps={class:"aside-container"},vs={class:"aside-content"},ms={class:"content"},ys={class:"content-container"},_s={class:"main"},ks=A({__name:"VPDoc",setup(o){const{theme:s}=G(),i=It(),{hasSidebar:t,hasAside:e,leftAside:n}=Ae(),r=F(()=>i.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(a,l)=>{const u=We("Content");return v(),b("div",{class:Z(["VPDoc",{"has-sidebar":_(t),"has-aside":_(e)}])},[C(a.$slots,"doc-top",{},void 0,!0),S("div",gs,[_(e)?(v(),b("div",{key:0,class:Z(["aside",{"left-aside":_(n)}])},[l[0]||(l[0]=S("div",{class:"aside-curtain"},null,-1)),S("div",ps,[S("div",vs,[D(Kr,null,{"aside-top":E(()=>[C(a.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":E(()=>[C(a.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":E(()=>[C(a.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":E(()=>[C(a.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":E(()=>[C(a.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":E(()=>[C(a.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):x("",!0),S("div",ms,[S("div",ys,[C(a.$slots,"doc-before",{},void 0,!0),S("main",_s,[D(u,{class:Z(["vp-doc",[r.value,_(s).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),D(ds,null,{"doc-footer-before":E(()=>[C(a.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),C(a.$slots,"doc-after",{},void 0,!0)])])]),C(a.$slots,"doc-bottom",{},void 0,!0)],2)}}}),bs=O(ks,[["__scopeId","data-v-39a288b8"]]),Cs=A({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(o){const s=o,i=F(()=>s.href&&ci.test(s.href)),t=F(()=>s.tag||(s.href?"a":"button"));return(e,n)=>(v(),N(Te(t.value),{class:Z(["VPButton",[e.size,e.theme]]),href:e.href?_(pn)(e.href):void 0,target:s.target??(i.value?"_blank":void 0),rel:s.rel??(i.value?"noreferrer":void 0)},{default:E(()=>[Pe(q(e.text),1)]),_:1},8,["class","href","target","rel"]))}}),Ts=O(Cs,[["__scopeId","data-v-fa7799d5"]]),Ss=["src","alt"],Es=A({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(o){return(s,i)=>{const t=We("VPImage",!0);return s.image?(v(),b(ne,{key:0},[typeof s.image=="string"||"src"in s.image?(v(),b("img",Ne({key:0,class:"VPImage"},typeof s.image=="string"?s.$attrs:{...s.image,...s.$attrs},{src:_(hn)(typeof s.image=="string"?s.image:s.image.src),alt:s.alt??(typeof s.image=="string"?"":s.image.alt||"")}),null,16,Ss)):(v(),b(ne,{key:1},[D(t,Ne({class:"dark",image:s.image.dark,alt:s.image.alt},s.$attrs),null,16,["image","alt"]),D(t,Ne({class:"light",image:s.image.light,alt:s.image.alt},s.$attrs),null,16,["image","alt"])],64))],64)):x("",!0)}}}),pt=O(Es,[["__scopeId","data-v-8426fc1a"]]),ws={class:"container"},Ps={class:"main"},Is={key:0,class:"name"},Ls=["innerHTML"],xs=["innerHTML"],As=["innerHTML"],Ds={key:0,class:"actions"},Os={key:0,class:"image"},Rs={class:"image-container"},Ms=A({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(o){const s=Lt("hero-image-slot-exists");return(i,t)=>(v(),b("div",{class:Z(["VPHero",{"has-image":i.image||_(s)}])},[S("div",ws,[S("div",Ps,[C(i.$slots,"home-hero-info-before",{},void 0,!0),C(i.$slots,"home-hero-info",{},()=>[i.name?(v(),b("h1",Is,[S("span",{innerHTML:i.name,class:"clip"},null,8,Ls)])):x("",!0),i.text?(v(),b("p",{key:1,innerHTML:i.text,class:"text"},null,8,xs)):x("",!0),i.tagline?(v(),b("p",{key:2,innerHTML:i.tagline,class:"tagline"},null,8,As)):x("",!0)],!0),C(i.$slots,"home-hero-info-after",{},void 0,!0),i.actions?(v(),b("div",Ds,[(v(!0),b(ne,null,ae(i.actions,e=>(v(),b("div",{key:e.link,class:"action"},[D(Ts,{tag:"a",size:"medium",theme:e.theme,text:e.text,href:e.link,target:e.target,rel:e.rel},null,8,["theme","text","href","target","rel"])]))),128))])):x("",!0),C(i.$slots,"home-hero-actions-after",{},void 0,!0)]),i.image||_(s)?(v(),b("div",Os,[S("div",Rs,[t[0]||(t[0]=S("div",{class:"image-bg"},null,-1)),C(i.$slots,"home-hero-image",{},()=>[i.image?(v(),N(pt,{key:0,class:"image-src",image:i.image},null,8,["image"])):x("",!0)],!0)])])):x("",!0)])],2))}}),Ns=O(Ms,[["__scopeId","data-v-303bb580"]]),Fs=A({__name:"VPHomeHero",setup(o){const{frontmatter:s}=G();return(i,t)=>_(s).hero?(v(),N(Ns,{key:0,class:"VPHomeHero",name:_(s).hero.name,text:_(s).hero.text,tagline:_(s).hero.tagline,image:_(s).hero.image,actions:_(s).hero.actions},{"home-hero-info-before":E(()=>[C(i.$slots,"home-hero-info-before")]),"home-hero-info":E(()=>[C(i.$slots,"home-hero-info")]),"home-hero-info-after":E(()=>[C(i.$slots,"home-hero-info-after")]),"home-hero-actions-after":E(()=>[C(i.$slots,"home-hero-actions-after")]),"home-hero-image":E(()=>[C(i.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):x("",!0)}}),Hs={class:"box"},Bs={key:0,class:"icon"},$s=["innerHTML"],Vs=["innerHTML"],Us=["innerHTML"],js={key:4,class:"link-text"},Gs={class:"link-text-value"},Ws=A({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(o){return(s,i)=>(v(),N(pe,{class:"VPFeature",href:s.link,rel:s.rel,target:s.target,"no-icon":!0,tag:s.link?"a":"div"},{default:E(()=>[S("article",Hs,[typeof s.icon=="object"&&s.icon.wrap?(v(),b("div",Bs,[D(pt,{image:s.icon,alt:s.icon.alt,height:s.icon.height||48,width:s.icon.width||48},null,8,["image","alt","height","width"])])):typeof s.icon=="object"?(v(),N(pt,{key:1,image:s.icon,alt:s.icon.alt,height:s.icon.height||48,width:s.icon.width||48},null,8,["image","alt","height","width"])):s.icon?(v(),b("div",{key:2,class:"icon",innerHTML:s.icon},null,8,$s)):x("",!0),S("h2",{class:"title",innerHTML:s.title},null,8,Vs),s.details?(v(),b("p",{key:3,class:"details",innerHTML:s.details},null,8,Us)):x("",!0),s.linkText?(v(),b("div",js,[S("p",Gs,[Pe(q(s.linkText)+" ",1),i[0]||(i[0]=S("span",{class:"vpi-arrow-right link-text-icon"},null,-1))])])):x("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),zs=O(Ws,[["__scopeId","data-v-a3976bdc"]]),Ks={key:0,class:"VPFeatures"},Ys={class:"container"},Xs={class:"items"},qs=A({__name:"VPFeatures",props:{features:{}},setup(o){const s=o,i=F(()=>{const t=s.features.length;if(t){if(t===2)return"grid-2";if(t===3)return"grid-3";if(t%3===0)return"grid-6";if(t>3)return"grid-4"}else return});return(t,e)=>t.features?(v(),b("div",Ks,[S("div",Ys,[S("div",Xs,[(v(!0),b(ne,null,ae(t.features,n=>(v(),b("div",{key:n.title,class:Z(["item",[i.value]])},[D(zs,{icon:n.icon,title:n.title,details:n.details,link:n.link,"link-text":n.linkText,rel:n.rel,target:n.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):x("",!0)}}),Js=O(qs,[["__scopeId","data-v-a6181336"]]),Zs=A({__name:"VPHomeFeatures",setup(o){const{frontmatter:s}=G();return(i,t)=>_(s).features?(v(),N(Js,{key:0,class:"VPHomeFeatures",features:_(s).features},null,8,["features"])):x("",!0)}}),Qs=A({__name:"VPHomeContent",setup(o){const{width:s}=rr({initialWidth:0,includeScrollbar:!1});return(i,t)=>(v(),b("div",{class:"vp-doc container",style:fi(_(s)?{"--vp-offset":`calc(50% - ${_(s)/2}px)`}:{})},[C(i.$slots,"default",{},void 0,!0)],4))}}),ea=O(Qs,[["__scopeId","data-v-8e2d4988"]]),ta={class:"VPHome"},na=A({__name:"VPHome",setup(o){const{frontmatter:s}=G();return(i,t)=>{const e=We("Content");return v(),b("div",ta,[C(i.$slots,"home-hero-before",{},void 0,!0),D(Fs,null,{"home-hero-info-before":E(()=>[C(i.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":E(()=>[C(i.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":E(()=>[C(i.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":E(()=>[C(i.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":E(()=>[C(i.$slots,"home-hero-image",{},void 0,!0)]),_:3}),C(i.$slots,"home-hero-after",{},void 0,!0),C(i.$slots,"home-features-before",{},void 0,!0),D(Zs),C(i.$slots,"home-features-after",{},void 0,!0),_(s).markdownStyles!==!1?(v(),N(ea,{key:0},{default:E(()=>[D(e)]),_:1})):(v(),N(e,{key:1}))])}}}),ia=O(na,[["__scopeId","data-v-686f80a6"]]),ra={},sa={class:"VPPage"};function aa(o,s){const i=We("Content");return v(),b("div",sa,[C(o.$slots,"page-top"),D(i),C(o.$slots,"page-bottom")])}const oa=O(ra,[["render",aa]]),la=A({__name:"VPContent",setup(o){const{page:s,frontmatter:i}=G(),{hasSidebar:t}=Ae();return(e,n)=>(v(),b("div",{class:Z(["VPContent",{"has-sidebar":_(t),"is-home":_(i).layout==="home"}]),id:"VPContent"},[_(s).isNotFound?C(e.$slots,"not-found",{key:0},()=>[D(wr)],!0):_(i).layout==="page"?(v(),N(oa,{key:1},{"page-top":E(()=>[C(e.$slots,"page-top",{},void 0,!0)]),"page-bottom":E(()=>[C(e.$slots,"page-bottom",{},void 0,!0)]),_:3})):_(i).layout==="home"?(v(),N(ia,{key:2},{"home-hero-before":E(()=>[C(e.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":E(()=>[C(e.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":E(()=>[C(e.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":E(()=>[C(e.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":E(()=>[C(e.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":E(()=>[C(e.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":E(()=>[C(e.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":E(()=>[C(e.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":E(()=>[C(e.$slots,"home-features-after",{},void 0,!0)]),_:3})):_(i).layout&&_(i).layout!=="doc"?(v(),N(Te(_(i).layout),{key:3})):(v(),N(bs,{key:4},{"doc-top":E(()=>[C(e.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":E(()=>[C(e.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":E(()=>[C(e.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":E(()=>[C(e.$slots,"doc-before",{},void 0,!0)]),"doc-after":E(()=>[C(e.$slots,"doc-after",{},void 0,!0)]),"aside-top":E(()=>[C(e.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":E(()=>[C(e.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":E(()=>[C(e.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":E(()=>[C(e.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":E(()=>[C(e.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":E(()=>[C(e.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),ua=O(la,[["__scopeId","data-v-1428d186"]]),ca={class:"container"},fa=["innerHTML"],ha=["innerHTML"],da=A({__name:"VPFooter",setup(o){const{theme:s,frontmatter:i}=G(),{hasSidebar:t}=Ae();return(e,n)=>_(s).footer&&_(i).footer!==!1?(v(),b("footer",{key:0,class:Z(["VPFooter",{"has-sidebar":_(t)}])},[S("div",ca,[_(s).footer.message?(v(),b("p",{key:0,class:"message",innerHTML:_(s).footer.message},null,8,fa)):x("",!0),_(s).footer.copyright?(v(),b("p",{key:1,class:"copyright",innerHTML:_(s).footer.copyright},null,8,ha)):x("",!0)])],2)):x("",!0)}}),ga=O(da,[["__scopeId","data-v-e315a0ad"]]);function pa(){const{theme:o,frontmatter:s}=G(),i=ui([]),t=F(()=>i.value.length>0);return Pt(()=>{i.value=vn(s.value.outline??o.value.outline)}),{headers:i,hasLocalNav:t}}const va={class:"menu-text"},ma={class:"header"},ya={class:"outline"},_a=A({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(o){const s=o,{theme:i}=G(),t=J(!1),e=J(0),n=J(),r=J();function a(f){var d;(d=n.value)!=null&&d.contains(f.target)||(t.value=!1)}Ie(t,f=>{if(f){document.addEventListener("click",a);return}document.removeEventListener("click",a)}),en("Escape",()=>{t.value=!1}),Pt(()=>{t.value=!1});function l(){t.value=!t.value,e.value=window.innerHeight+Math.min(window.scrollY-s.navHeight,0)}function u(f){f.target.classList.contains("outline-link")&&(r.value&&(r.value.style.transition="none"),hi(()=>{t.value=!1}))}function c(){t.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(f,d)=>(v(),b("div",{class:"VPLocalNavOutlineDropdown",style:fi({"--vp-vh":e.value+"px"}),ref_key:"main",ref:n},[f.headers.length>0?(v(),b("button",{key:0,onClick:l,class:Z({open:t.value})},[S("span",va,q(_(mi)(_(i))),1),d[0]||(d[0]=S("span",{class:"vpi-chevron-right icon"},null,-1))],2)):(v(),b("button",{key:1,onClick:c},q(_(i).returnToTopLabel||"Return to top"),1)),D(fn,{name:"flyout"},{default:E(()=>[t.value?(v(),b("div",{key:0,ref_key:"items",ref:r,class:"items",onClick:u},[S("div",ma,[S("a",{class:"top-link",href:"#",onClick:c},q(_(i).returnToTopLabel||"Return to top"),1)]),S("div",ya,[D(yi,{headers:f.headers},null,8,["headers"])])],512)):x("",!0)]),_:1})],4))}}),ka=O(_a,[["__scopeId","data-v-17a5e62e"]]),ba={class:"container"},Ca=["aria-expanded"],Ta={class:"menu-text"},Sa=A({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(o){const{theme:s,frontmatter:i}=G(),{hasSidebar:t}=Ae(),{headers:e}=pa(),{y:n}=di(),r=J(0);xe(()=>{r.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),Pt(()=>{e.value=vn(i.value.outline??s.value.outline)});const a=F(()=>e.value.length===0),l=F(()=>a.value&&!t.value),u=F(()=>({VPLocalNav:!0,"has-sidebar":t.value,empty:a.value,fixed:l.value}));return(c,f)=>_(i).layout!=="home"&&(!l.value||_(n)>=r.value)?(v(),b("div",{key:0,class:Z(u.value)},[S("div",ba,[_(t)?(v(),b("button",{key:0,class:"menu","aria-expanded":c.open,"aria-controls":"VPSidebarNav",onClick:f[0]||(f[0]=d=>c.$emit("open-menu"))},[f[1]||(f[1]=S("span",{class:"vpi-align-left menu-icon"},null,-1)),S("span",Ta,q(_(s).sidebarMenuLabel||"Menu"),1)],8,Ca)):x("",!0),D(ka,{headers:_(e),navHeight:r.value},null,8,["headers","navHeight"])])],2)):x("",!0)}}),Ea=O(Sa,[["__scopeId","data-v-a6f0e41e"]]);function wa(){const o=J(!1);function s(){o.value=!0,window.addEventListener("resize",e)}function i(){o.value=!1,window.removeEventListener("resize",e)}function t(){o.value?i():s()}function e(){window.outerWidth>=768&&i()}const n=It();return Ie(()=>n.path,i),{isScreenOpen:o,openScreen:s,closeScreen:i,toggleScreen:t}}const Pa={},Ia={class:"VPSwitch",type:"button",role:"switch"},La={class:"check"},xa={key:0,class:"icon"};function Aa(o,s){return v(),b("button",Ia,[S("span",La,[o.$slots.default?(v(),b("span",xa,[C(o.$slots,"default",{},void 0,!0)])):x("",!0)])])}const Da=O(Pa,[["render",Aa],["__scopeId","data-v-1d5665e3"]]),Oa=A({__name:"VPSwitchAppearance",setup(o){const{isDark:s,theme:i}=G(),t=Lt("toggle-appearance",()=>{s.value=!s.value}),e=J("");return gn(()=>{e.value=s.value?i.value.lightModeSwitchTitle||"Switch to light theme":i.value.darkModeSwitchTitle||"Switch to dark theme"}),(n,r)=>(v(),N(Da,{title:e.value,class:"VPSwitchAppearance","aria-checked":_(s),onClick:_(t)},{default:E(()=>r[0]||(r[0]=[S("span",{class:"vpi-sun sun"},null,-1),S("span",{class:"vpi-moon moon"},null,-1)])),_:1},8,["title","aria-checked","onClick"]))}}),mn=O(Oa,[["__scopeId","data-v-5337faa4"]]),Ra={key:0,class:"VPNavBarAppearance"},Ma=A({__name:"VPNavBarAppearance",setup(o){const{site:s}=G();return(i,t)=>_(s).appearance&&_(s).appearance!=="force-dark"&&_(s).appearance!=="force-auto"?(v(),b("div",Ra,[D(mn)])):x("",!0)}}),Na=O(Ma,[["__scopeId","data-v-6c893767"]]),yn=J();let _i=!1,Ht=0;function Fa(o){const s=J(!1);if(xt){!_i&&Ha(),Ht++;const i=Ie(yn,t=>{var e,n,r;t===o.el.value||(e=o.el.value)!=null&&e.contains(t)?(s.value=!0,(n=o.onFocus)==null||n.call(o)):(s.value=!1,(r=o.onBlur)==null||r.call(o))});dn(()=>{i(),Ht--,Ht||Ba()})}return sr(s)}function Ha(){document.addEventListener("focusin",ki),_i=!0,yn.value=document.activeElement}function Ba(){document.removeEventListener("focusin",ki)}function ki(){yn.value=document.activeElement}const $a={class:"VPMenuLink"},Va=["innerHTML"],Ua=A({__name:"VPMenuLink",props:{item:{}},setup(o){const{page:s}=G();return(i,t)=>(v(),b("div",$a,[D(pe,{class:Z({active:_(Ge)(_(s).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link,target:i.item.target,rel:i.item.rel,"no-icon":i.item.noIcon},{default:E(()=>[S("span",{innerHTML:i.item.text},null,8,Va)]),_:1},8,["class","href","target","rel","no-icon"])]))}}),At=O(Ua,[["__scopeId","data-v-35975db6"]]),ja={class:"VPMenuGroup"},Ga={key:0,class:"title"},Wa=A({__name:"VPMenuGroup",props:{text:{},items:{}},setup(o){return(s,i)=>(v(),b("div",ja,[s.text?(v(),b("p",Ga,q(s.text),1)):x("",!0),(v(!0),b(ne,null,ae(s.items,t=>(v(),b(ne,null,["link"in t?(v(),N(At,{key:0,item:t},null,8,["item"])):x("",!0)],64))),256))]))}}),za=O(Wa,[["__scopeId","data-v-69e747b5"]]),Ka={class:"VPMenu"},Ya={key:0,class:"items"},Xa=A({__name:"VPMenu",props:{items:{}},setup(o){return(s,i)=>(v(),b("div",Ka,[s.items?(v(),b("div",Ya,[(v(!0),b(ne,null,ae(s.items,t=>(v(),b(ne,{key:JSON.stringify(t)},["link"in t?(v(),N(At,{key:0,item:t},null,8,["item"])):"component"in t?(v(),N(Te(t.component),Ne({key:1,ref_for:!0},t.props),null,16)):(v(),N(za,{key:2,text:t.text,items:t.items},null,8,["text","items"]))],64))),128))])):x("",!0),C(s.$slots,"default",{},void 0,!0)]))}}),qa=O(Xa,[["__scopeId","data-v-b98bc113"]]),Ja=["aria-expanded","aria-label"],Za={key:0,class:"text"},Qa=["innerHTML"],eo={key:1,class:"vpi-more-horizontal icon"},to={class:"menu"},no=A({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(o){const s=J(!1),i=J();Fa({el:i,onBlur:t});function t(){s.value=!1}return(e,n)=>(v(),b("div",{class:"VPFlyout",ref_key:"el",ref:i,onMouseenter:n[1]||(n[1]=r=>s.value=!0),onMouseleave:n[2]||(n[2]=r=>s.value=!1)},[S("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":s.value,"aria-label":e.label,onClick:n[0]||(n[0]=r=>s.value=!s.value)},[e.button||e.icon?(v(),b("span",Za,[e.icon?(v(),b("span",{key:0,class:Z([e.icon,"option-icon"])},null,2)):x("",!0),e.button?(v(),b("span",{key:1,innerHTML:e.button},null,8,Qa)):x("",!0),n[3]||(n[3]=S("span",{class:"vpi-chevron-down text-icon"},null,-1))])):(v(),b("span",eo))],8,Ja),S("div",to,[D(qa,{items:e.items},{default:E(()=>[C(e.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),_n=O(no,[["__scopeId","data-v-cf11d7a2"]]),io=["href","aria-label","innerHTML"],ro=A({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(o){const s=o,i=J();xe(async()=>{var n;await hi();const e=(n=i.value)==null?void 0:n.children[0];e instanceof HTMLElement&&e.className.startsWith("vpi-social-")&&(getComputedStyle(e).maskImage||getComputedStyle(e).webkitMaskImage)==="none"&&e.style.setProperty("--icon",`url('https://api.iconify.design/simple-icons/${s.icon}.svg')`)});const t=F(()=>typeof s.icon=="object"?s.icon.svg:`<span class="vpi-social-${s.icon}"></span>`);return(e,n)=>(v(),b("a",{ref_key:"el",ref:i,class:"VPSocialLink no-icon",href:e.link,"aria-label":e.ariaLabel??(typeof e.icon=="string"?e.icon:""),target:"_blank",rel:"noopener",innerHTML:t.value},null,8,io))}}),so=O(ro,[["__scopeId","data-v-bd121fe5"]]),ao={class:"VPSocialLinks"},oo=A({__name:"VPSocialLinks",props:{links:{}},setup(o){return(s,i)=>(v(),b("div",ao,[(v(!0),b(ne,null,ae(s.links,({link:t,icon:e,ariaLabel:n})=>(v(),N(so,{key:t,icon:e,link:t,ariaLabel:n},null,8,["icon","link","ariaLabel"]))),128))]))}}),Dt=O(oo,[["__scopeId","data-v-7bc22406"]]),lo={key:0,class:"group translations"},uo={class:"trans-title"},co={key:1,class:"group"},fo={class:"item appearance"},ho={class:"label"},go={class:"appearance-action"},po={key:2,class:"group"},vo={class:"item social-links"},mo=A({__name:"VPNavBarExtra",setup(o){const{site:s,theme:i}=G(),{localeLinks:t,currentLang:e}=ot({correspondingLink:!0}),n=F(()=>t.value.length&&e.value.label||s.value.appearance||i.value.socialLinks);return(r,a)=>n.value?(v(),N(_n,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:E(()=>[_(t).length&&_(e).label?(v(),b("div",lo,[S("p",uo,q(_(e).label),1),(v(!0),b(ne,null,ae(_(t),l=>(v(),N(At,{key:l.link,item:l},null,8,["item"]))),128))])):x("",!0),_(s).appearance&&_(s).appearance!=="force-dark"&&_(s).appearance!=="force-auto"?(v(),b("div",co,[S("div",fo,[S("p",ho,q(_(i).darkModeSwitchLabel||"Appearance"),1),S("div",go,[D(mn)])])])):x("",!0),_(i).socialLinks?(v(),b("div",po,[S("div",vo,[D(Dt,{class:"social-links-list",links:_(i).socialLinks},null,8,["links"])])])):x("",!0)]),_:1})):x("",!0)}}),yo=O(mo,[["__scopeId","data-v-bb2aa2f0"]]),_o=["aria-expanded"],ko=A({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(o){return(s,i)=>(v(),b("button",{type:"button",class:Z(["VPNavBarHamburger",{active:s.active}]),"aria-label":"mobile navigation","aria-expanded":s.active,"aria-controls":"VPNavScreen",onClick:i[0]||(i[0]=t=>s.$emit("click"))},i[1]||(i[1]=[S("span",{class:"container"},[S("span",{class:"top"}),S("span",{class:"middle"}),S("span",{class:"bottom"})],-1)]),10,_o))}}),bo=O(ko,[["__scopeId","data-v-e5dd9c1c"]]),Co=["innerHTML"],To=A({__name:"VPNavBarMenuLink",props:{item:{}},setup(o){const{page:s}=G();return(i,t)=>(v(),N(pe,{class:Z({VPNavBarMenuLink:!0,active:_(Ge)(_(s).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link,target:i.item.target,rel:i.item.rel,"no-icon":i.item.noIcon,tabindex:"0"},{default:E(()=>[S("span",{innerHTML:i.item.text},null,8,Co)]),_:1},8,["class","href","target","rel","no-icon"]))}}),So=O(To,[["__scopeId","data-v-e56f3d57"]]),Eo=A({__name:"VPNavBarMenuGroup",props:{item:{}},setup(o){const s=o,{page:i}=G(),t=n=>"component"in n?!1:"link"in n?Ge(i.value.relativePath,n.link,!!s.item.activeMatch):n.items.some(t),e=F(()=>t(s.item));return(n,r)=>(v(),N(_n,{class:Z({VPNavBarMenuGroup:!0,active:_(Ge)(_(i).relativePath,n.item.activeMatch,!!n.item.activeMatch)||e.value}),button:n.item.text,items:n.item.items},null,8,["class","button","items"]))}}),wo={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},Po=A({__name:"VPNavBarMenu",setup(o){const{theme:s}=G();return(i,t)=>_(s).nav?(v(),b("nav",wo,[t[0]||(t[0]=S("span",{id:"main-nav-aria-label",class:"visually-hidden"}," Main Navigation ",-1)),(v(!0),b(ne,null,ae(_(s).nav,e=>(v(),b(ne,{key:JSON.stringify(e)},["link"in e?(v(),N(So,{key:0,item:e},null,8,["item"])):"component"in e?(v(),N(Te(e.component),Ne({key:1,ref_for:!0},e.props),null,16)):(v(),N(Eo,{key:2,item:e},null,8,["item"]))],64))),128))])):x("",!0)}}),Io=O(Po,[["__scopeId","data-v-dc692963"]]);function Lo(o){const{localeIndex:s,theme:i}=G();function t(e){var p,m,k;const n=e.split("."),r=(p=i.value.search)==null?void 0:p.options,a=r&&typeof r=="object",l=a&&((k=(m=r.locales)==null?void 0:m[s.value])==null?void 0:k.translations)||null,u=a&&r.translations||null;let c=l,f=u,d=o;const g=n.pop();for(const I of n){let P=null;const L=d==null?void 0:d[I];L&&(P=d=L);const Y=f==null?void 0:f[I];Y&&(P=f=Y);const W=c==null?void 0:c[I];W&&(P=c=W),L||(d=P),Y||(f=P),W||(c=P)}return(c==null?void 0:c[g])??(f==null?void 0:f[g])??(d==null?void 0:d[g])??""}return t}const xo=["aria-label"],Ao={class:"DocSearch-Button-Container"},Do={class:"DocSearch-Button-Placeholder"},On=A({__name:"VPNavBarSearchButton",setup(o){const i=Lo({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(t,e)=>(v(),b("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":_(i)("button.buttonAriaLabel")},[S("span",Ao,[e[0]||(e[0]=S("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1)),S("span",Do,q(_(i)("button.buttonText")),1)]),e[1]||(e[1]=S("span",{class:"DocSearch-Button-Keys"},[S("kbd",{class:"DocSearch-Button-Key"}),S("kbd",{class:"DocSearch-Button-Key"},"K")],-1))],8,xo))}}),Oo={class:"VPNavBarSearch"},Ro={id:"local-search"},Mo={key:1,id:"docsearch"},No=A({__name:"VPNavBarSearch",setup(o){const s=ar(()=>or(()=>import("./VPLocalSearchBox.Dl-6EuHM.js"),__vite__mapDeps([0,1]))),i=()=>null,{theme:t}=G(),e=J(!1),n=J(!1);xe(()=>{});function r(){e.value||(e.value=!0,setTimeout(a,16))}function a(){const f=new Event("keydown");f.key="k",f.metaKey=!0,window.dispatchEvent(f),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||a()},16)}function l(f){const d=f.target,g=d.tagName;return d.isContentEditable||g==="INPUT"||g==="SELECT"||g==="TEXTAREA"}const u=J(!1);en("k",f=>{(f.ctrlKey||f.metaKey)&&(f.preventDefault(),u.value=!0)}),en("/",f=>{l(f)||(f.preventDefault(),u.value=!0)});const c="local";return(f,d)=>{var g;return v(),b("div",Oo,[_(c)==="local"?(v(),b(ne,{key:0},[u.value?(v(),N(_(s),{key:0,onClose:d[0]||(d[0]=p=>u.value=!1)})):x("",!0),S("div",Ro,[D(On,{onClick:d[1]||(d[1]=p=>u.value=!0)})])],64)):_(c)==="algolia"?(v(),b(ne,{key:1},[e.value?(v(),N(_(i),{key:0,algolia:((g=_(t).search)==null?void 0:g.options)??_(t).algolia,onVnodeBeforeMount:d[2]||(d[2]=p=>n.value=!0)},null,8,["algolia"])):x("",!0),n.value?x("",!0):(v(),b("div",Mo,[D(On,{onClick:r})]))],64)):x("",!0)])}}}),Fo=A({__name:"VPNavBarSocialLinks",setup(o){const{theme:s}=G();return(i,t)=>_(s).socialLinks?(v(),N(Dt,{key:0,class:"VPNavBarSocialLinks",links:_(s).socialLinks},null,8,["links"])):x("",!0)}}),Ho=O(Fo,[["__scopeId","data-v-0394ad82"]]),Bo=["href","rel","target"],$o=["innerHTML"],Vo={key:2},Uo=A({__name:"VPNavBarTitle",setup(o){const{site:s,theme:i}=G(),{hasSidebar:t}=Ae(),{currentLang:e}=ot(),n=F(()=>{var l;return typeof i.value.logoLink=="string"?i.value.logoLink:(l=i.value.logoLink)==null?void 0:l.link}),r=F(()=>{var l;return typeof i.value.logoLink=="string"||(l=i.value.logoLink)==null?void 0:l.rel}),a=F(()=>{var l;return typeof i.value.logoLink=="string"||(l=i.value.logoLink)==null?void 0:l.target});return(l,u)=>(v(),b("div",{class:Z(["VPNavBarTitle",{"has-sidebar":_(t)}])},[S("a",{class:"title",href:n.value??_(pn)(_(e).link),rel:r.value,target:a.value},[C(l.$slots,"nav-bar-title-before",{},void 0,!0),_(i).logo?(v(),N(pt,{key:0,class:"logo",image:_(i).logo},null,8,["image"])):x("",!0),_(i).siteTitle?(v(),b("span",{key:1,innerHTML:_(i).siteTitle},null,8,$o)):_(i).siteTitle===void 0?(v(),b("span",Vo,q(_(s).title),1)):x("",!0),C(l.$slots,"nav-bar-title-after",{},void 0,!0)],8,Bo)],2))}}),jo=O(Uo,[["__scopeId","data-v-1168a8e4"]]),Go={class:"items"},Wo={class:"title"},zo=A({__name:"VPNavBarTranslations",setup(o){const{theme:s}=G(),{localeLinks:i,currentLang:t}=ot({correspondingLink:!0});return(e,n)=>_(i).length&&_(t).label?(v(),N(_n,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:_(s).langMenuLabel||"Change language"},{default:E(()=>[S("div",Go,[S("p",Wo,q(_(t).label),1),(v(!0),b(ne,null,ae(_(i),r=>(v(),N(At,{key:r.link,item:r},null,8,["item"]))),128))])]),_:1},8,["label"])):x("",!0)}}),Ko=O(zo,[["__scopeId","data-v-88af2de4"]]),Yo={class:"wrapper"},Xo={class:"container"},qo={class:"title"},Jo={class:"content"},Zo={class:"content-body"},Qo=A({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(o){const s=o,{y:i}=di(),{hasSidebar:t}=Ae(),{frontmatter:e}=G(),n=J({});return gn(()=>{n.value={"has-sidebar":t.value,home:e.value.layout==="home",top:i.value===0,"screen-open":s.isScreenOpen}}),(r,a)=>(v(),b("div",{class:Z(["VPNavBar",n.value])},[S("div",Yo,[S("div",Xo,[S("div",qo,[D(jo,null,{"nav-bar-title-before":E(()=>[C(r.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":E(()=>[C(r.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),S("div",Jo,[S("div",Zo,[C(r.$slots,"nav-bar-content-before",{},void 0,!0),D(No,{class:"search"}),D(Io,{class:"menu"}),D(Ko,{class:"translations"}),D(Na,{class:"appearance"}),D(Ho,{class:"social-links"}),D(yo,{class:"extra"}),C(r.$slots,"nav-bar-content-after",{},void 0,!0),D(bo,{class:"hamburger",active:r.isScreenOpen,onClick:a[0]||(a[0]=l=>r.$emit("toggle-screen"))},null,8,["active"])])])])]),a[1]||(a[1]=S("div",{class:"divider"},[S("div",{class:"divider-line"})],-1))],2))}}),el=O(Qo,[["__scopeId","data-v-6aa21345"]]),tl={key:0,class:"VPNavScreenAppearance"},nl={class:"text"},il=A({__name:"VPNavScreenAppearance",setup(o){const{site:s,theme:i}=G();return(t,e)=>_(s).appearance&&_(s).appearance!=="force-dark"&&_(s).appearance!=="force-auto"?(v(),b("div",tl,[S("p",nl,q(_(i).darkModeSwitchLabel||"Appearance"),1),D(mn)])):x("",!0)}}),rl=O(il,[["__scopeId","data-v-b44890b2"]]),sl=["innerHTML"],al=A({__name:"VPNavScreenMenuLink",props:{item:{}},setup(o){const s=Lt("close-screen");return(i,t)=>(v(),N(pe,{class:"VPNavScreenMenuLink",href:i.item.link,target:i.item.target,rel:i.item.rel,"no-icon":i.item.noIcon,onClick:_(s)},{default:E(()=>[S("span",{innerHTML:i.item.text},null,8,sl)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),ol=O(al,[["__scopeId","data-v-df37e6dd"]]),ll=["innerHTML"],ul=A({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(o){const s=Lt("close-screen");return(i,t)=>(v(),N(pe,{class:"VPNavScreenMenuGroupLink",href:i.item.link,target:i.item.target,rel:i.item.rel,"no-icon":i.item.noIcon,onClick:_(s)},{default:E(()=>[S("span",{innerHTML:i.item.text},null,8,ll)]),_:1},8,["href","target","rel","no-icon","onClick"]))}}),bi=O(ul,[["__scopeId","data-v-3e9c20e4"]]),cl={class:"VPNavScreenMenuGroupSection"},fl={key:0,class:"title"},hl=A({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(o){return(s,i)=>(v(),b("div",cl,[s.text?(v(),b("p",fl,q(s.text),1)):x("",!0),(v(!0),b(ne,null,ae(s.items,t=>(v(),N(bi,{key:t.text,item:t},null,8,["item"]))),128))]))}}),dl=O(hl,[["__scopeId","data-v-8133b170"]]),gl=["aria-controls","aria-expanded"],pl=["innerHTML"],vl=["id"],ml={key:0,class:"item"},yl={key:1,class:"item"},_l={key:2,class:"group"},kl=A({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(o){const s=o,i=J(!1),t=F(()=>`NavScreenGroup-${s.text.replace(" ","-").toLowerCase()}`);function e(){i.value=!i.value}return(n,r)=>(v(),b("div",{class:Z(["VPNavScreenMenuGroup",{open:i.value}])},[S("button",{class:"button","aria-controls":t.value,"aria-expanded":i.value,onClick:e},[S("span",{class:"button-text",innerHTML:n.text},null,8,pl),r[0]||(r[0]=S("span",{class:"vpi-plus button-icon"},null,-1))],8,gl),S("div",{id:t.value,class:"items"},[(v(!0),b(ne,null,ae(n.items,a=>(v(),b(ne,{key:JSON.stringify(a)},["link"in a?(v(),b("div",ml,[D(bi,{item:a},null,8,["item"])])):"component"in a?(v(),b("div",yl,[(v(),N(Te(a.component),Ne({ref_for:!0},a.props,{"screen-menu":""}),null,16))])):(v(),b("div",_l,[D(dl,{text:a.text,items:a.items},null,8,["text","items"])]))],64))),128))],8,vl)],2))}}),bl=O(kl,[["__scopeId","data-v-b9ab8c58"]]),Cl={key:0,class:"VPNavScreenMenu"},Tl=A({__name:"VPNavScreenMenu",setup(o){const{theme:s}=G();return(i,t)=>_(s).nav?(v(),b("nav",Cl,[(v(!0),b(ne,null,ae(_(s).nav,e=>(v(),b(ne,{key:JSON.stringify(e)},["link"in e?(v(),N(ol,{key:0,item:e},null,8,["item"])):"component"in e?(v(),N(Te(e.component),Ne({key:1,ref_for:!0},e.props,{"screen-menu":""}),null,16)):(v(),N(bl,{key:2,text:e.text||"",items:e.items},null,8,["text","items"]))],64))),128))])):x("",!0)}}),Sl=A({__name:"VPNavScreenSocialLinks",setup(o){const{theme:s}=G();return(i,t)=>_(s).socialLinks?(v(),N(Dt,{key:0,class:"VPNavScreenSocialLinks",links:_(s).socialLinks},null,8,["links"])):x("",!0)}}),El={class:"list"},wl=A({__name:"VPNavScreenTranslations",setup(o){const{localeLinks:s,currentLang:i}=ot({correspondingLink:!0}),t=J(!1);function e(){t.value=!t.value}return(n,r)=>_(s).length&&_(i).label?(v(),b("div",{key:0,class:Z(["VPNavScreenTranslations",{open:t.value}])},[S("button",{class:"title",onClick:e},[r[0]||(r[0]=S("span",{class:"vpi-languages icon lang"},null,-1)),Pe(" "+q(_(i).label)+" ",1),r[1]||(r[1]=S("span",{class:"vpi-chevron-down icon chevron"},null,-1))]),S("ul",El,[(v(!0),b(ne,null,ae(_(s),a=>(v(),b("li",{key:a.link,class:"item"},[D(pe,{class:"link",href:a.link},{default:E(()=>[Pe(q(a.text),1)]),_:2},1032,["href"])]))),128))])],2)):x("",!0)}}),Pl=O(wl,[["__scopeId","data-v-858fe1a4"]]),Il={class:"container"},Ll=A({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(o){const s=J(null),i=gi(xt?document.body:null);return(t,e)=>(v(),N(fn,{name:"fade",onEnter:e[0]||(e[0]=n=>i.value=!0),onAfterLeave:e[1]||(e[1]=n=>i.value=!1)},{default:E(()=>[t.open?(v(),b("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:s,id:"VPNavScreen"},[S("div",Il,[C(t.$slots,"nav-screen-content-before",{},void 0,!0),D(Tl,{class:"menu"}),D(Pl,{class:"translations"}),D(rl,{class:"appearance"}),D(Sl,{class:"social-links"}),C(t.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):x("",!0)]),_:3}))}}),xl=O(Ll,[["__scopeId","data-v-f2779853"]]),Al={key:0,class:"VPNav"},Dl=A({__name:"VPNav",setup(o){const{isScreenOpen:s,closeScreen:i,toggleScreen:t}=wa(),{frontmatter:e}=G(),n=F(()=>e.value.navbar!==!1);return pi("close-screen",i),wt(()=>{xt&&document.documentElement.classList.toggle("hide-nav",!n.value)}),(r,a)=>n.value?(v(),b("header",Al,[D(el,{"is-screen-open":_(s),onToggleScreen:_(t)},{"nav-bar-title-before":E(()=>[C(r.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":E(()=>[C(r.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":E(()=>[C(r.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":E(()=>[C(r.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),D(xl,{open:_(s)},{"nav-screen-content-before":E(()=>[C(r.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":E(()=>[C(r.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):x("",!0)}}),Ol=O(Dl,[["__scopeId","data-v-ae24b3ad"]]),Rl=["role","tabindex"],Ml={key:1,class:"items"},Nl=A({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(o){const s=o,{collapsed:i,collapsible:t,isLink:e,isActiveLink:n,hasActiveLink:r,hasChildren:a,toggle:l}=xr(F(()=>s.item)),u=F(()=>a.value?"section":"div"),c=F(()=>e.value?"a":"div"),f=F(()=>a.value?s.depth+2===7?"p":`h${s.depth+2}`:"p"),d=F(()=>e.value?void 0:"button"),g=F(()=>[[`level-${s.depth}`],{collapsible:t.value},{collapsed:i.value},{"is-link":e.value},{"is-active":n.value},{"has-active":r.value}]);function p(k){"key"in k&&k.key!=="Enter"||!s.item.link&&l()}function m(){s.item.link&&l()}return(k,I)=>{const P=We("VPSidebarItem",!0);return v(),N(Te(u.value),{class:Z(["VPSidebarItem",g.value])},{default:E(()=>[k.item.text?(v(),b("div",Ne({key:0,class:"item",role:d.value},lr(k.item.items?{click:p,keydown:p}:{},!0),{tabindex:k.item.items&&0}),[I[1]||(I[1]=S("div",{class:"indicator"},null,-1)),k.item.link?(v(),N(pe,{key:0,tag:c.value,class:"link",href:k.item.link,rel:k.item.rel,target:k.item.target},{default:E(()=>[(v(),N(Te(f.value),{class:"text",innerHTML:k.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(v(),N(Te(f.value),{key:1,class:"text",innerHTML:k.item.text},null,8,["innerHTML"])),k.item.collapsed!=null&&k.item.items&&k.item.items.length?(v(),b("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:m,onKeydown:ur(m,["enter"]),tabindex:"0"},I[0]||(I[0]=[S("span",{class:"vpi-chevron-right caret-icon"},null,-1)]),32)):x("",!0)],16,Rl)):x("",!0),k.item.items&&k.item.items.length?(v(),b("div",Ml,[k.depth<5?(v(!0),b(ne,{key:0},ae(k.item.items,L=>(v(),N(P,{key:L.text,item:L,depth:k.depth+1},null,8,["item","depth"]))),128)):x("",!0)])):x("",!0)]),_:1},8,["class"])}}}),Fl=O(Nl,[["__scopeId","data-v-b7550ba0"]]),Hl=A({__name:"VPSidebarGroup",props:{items:{}},setup(o){const s=J(!0);let i=null;return xe(()=>{i=setTimeout(()=>{i=null,s.value=!1},300)}),cr(()=>{i!=null&&(clearTimeout(i),i=null)}),(t,e)=>(v(!0),b(ne,null,ae(t.items,n=>(v(),b("div",{key:n.text,class:Z(["group",{"no-transition":s.value}])},[D(Fl,{item:n,depth:0},null,8,["item"])],2))),128))}}),Bl=O(Hl,[["__scopeId","data-v-c40bc020"]]),$l={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},Vl=A({__name:"VPSidebar",props:{open:{type:Boolean}},setup(o){const{sidebarGroups:s,hasSidebar:i}=Ae(),t=o,e=J(null),n=gi(xt?document.body:null);Ie([t,e],()=>{var a;t.open?(n.value=!0,(a=e.value)==null||a.focus()):n.value=!1},{immediate:!0,flush:"post"});const r=J(0);return Ie(s,()=>{r.value+=1},{deep:!0}),(a,l)=>_(i)?(v(),b("aside",{key:0,class:Z(["VPSidebar",{open:a.open}]),ref_key:"navEl",ref:e,onClick:l[0]||(l[0]=fr(()=>{},["stop"]))},[l[2]||(l[2]=S("div",{class:"curtain"},null,-1)),S("nav",$l,[l[1]||(l[1]=S("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),C(a.$slots,"sidebar-nav-before",{},void 0,!0),(v(),N(Bl,{items:_(s),key:r.value},null,8,["items"])),C(a.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):x("",!0)}}),Ul=O(Vl,[["__scopeId","data-v-319d5ca6"]]),jl=A({__name:"VPSkipLink",setup(o){const s=It(),i=J();Ie(()=>s.path,()=>i.value.focus());function t({target:e}){const n=document.getElementById(decodeURIComponent(e.hash).slice(1));if(n){const r=()=>{n.removeAttribute("tabindex"),n.removeEventListener("blur",r)};n.setAttribute("tabindex","-1"),n.addEventListener("blur",r),n.focus(),window.scrollTo(0,0)}}return(e,n)=>(v(),b(ne,null,[S("span",{ref_key:"backToTop",ref:i,tabindex:"-1"},null,512),S("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:t}," Skip to content ")],64))}}),Gl=O(jl,[["__scopeId","data-v-0f60ec36"]]),Wl=A({__name:"Layout",setup(o){const{isOpen:s,open:i,close:t}=Ae(),e=It();Ie(()=>e.path,t),Lr(s,t);const{frontmatter:n}=G(),r=hr(),a=F(()=>!!r["home-hero-image"]);return pi("hero-image-slot-exists",a),(l,u)=>{const c=We("Content");return _(n).layout!==!1?(v(),b("div",{key:0,class:Z(["Layout",_(n).pageClass])},[C(l.$slots,"layout-top",{},void 0,!0),D(Gl),D(vr,{class:"backdrop",show:_(s),onClick:_(t)},null,8,["show","onClick"]),D(Ol,null,{"nav-bar-title-before":E(()=>[C(l.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":E(()=>[C(l.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":E(()=>[C(l.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":E(()=>[C(l.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":E(()=>[C(l.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":E(()=>[C(l.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),D(Ea,{open:_(s),onOpenMenu:_(i)},null,8,["open","onOpenMenu"]),D(Ul,{open:_(s)},{"sidebar-nav-before":E(()=>[C(l.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":E(()=>[C(l.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),D(ua,null,{"page-top":E(()=>[C(l.$slots,"page-top",{},void 0,!0)]),"page-bottom":E(()=>[C(l.$slots,"page-bottom",{},void 0,!0)]),"not-found":E(()=>[C(l.$slots,"not-found",{},void 0,!0)]),"home-hero-before":E(()=>[C(l.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":E(()=>[C(l.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":E(()=>[C(l.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":E(()=>[C(l.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":E(()=>[C(l.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":E(()=>[C(l.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":E(()=>[C(l.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":E(()=>[C(l.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":E(()=>[C(l.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":E(()=>[C(l.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":E(()=>[C(l.$slots,"doc-before",{},void 0,!0)]),"doc-after":E(()=>[C(l.$slots,"doc-after",{},void 0,!0)]),"doc-top":E(()=>[C(l.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":E(()=>[C(l.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":E(()=>[C(l.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":E(()=>[C(l.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":E(()=>[C(l.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":E(()=>[C(l.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":E(()=>[C(l.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":E(()=>[C(l.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),D(ga),C(l.$slots,"layout-bottom",{},void 0,!0)],2)):(v(),N(c,{key:1}))}}}),zl=O(Wl,[["__scopeId","data-v-5d98c3a5"]]),Kl={},Yl={class:"VPTeamPage"};function Xl(o,s){return v(),b("div",Yl,[C(o.$slots,"default")])}const Mf=O(Kl,[["render",Xl],["__scopeId","data-v-7c57f839"]]),ql={},Jl={class:"VPTeamPageTitle"},Zl={key:0,class:"title"},Ql={key:1,class:"lead"};function eu(o,s){return v(),b("div",Jl,[o.$slots.title?(v(),b("h1",Zl,[C(o.$slots,"title",{},void 0,!0)])):x("",!0),o.$slots.lead?(v(),b("p",Ql,[C(o.$slots,"lead",{},void 0,!0)])):x("",!0)])}const Nf=O(ql,[["render",eu],["__scopeId","data-v-bf2cbdac"]]),tu={class:"profile"},nu={class:"avatar"},iu=["src","alt"],ru={class:"data"},su={class:"name"},au={key:0,class:"affiliation"},ou={key:0,class:"title"},lu={key:1,class:"at"},uu=["innerHTML"],cu={key:2,class:"links"},fu={key:0,class:"sp"},hu=A({__name:"VPTeamMembersItem",props:{size:{default:"medium"},member:{}},setup(o){return(s,i)=>(v(),b("article",{class:Z(["VPTeamMembersItem",[s.size]])},[S("div",tu,[S("figure",nu,[S("img",{class:"avatar-img",src:s.member.avatar,alt:s.member.name},null,8,iu)]),S("div",ru,[S("h1",su,q(s.member.name),1),s.member.title||s.member.org?(v(),b("p",au,[s.member.title?(v(),b("span",ou,q(s.member.title),1)):x("",!0),s.member.title&&s.member.org?(v(),b("span",lu," @ ")):x("",!0),s.member.org?(v(),N(pe,{key:2,class:Z(["org",{link:s.member.orgLink}]),href:s.member.orgLink,"no-icon":""},{default:E(()=>[Pe(q(s.member.org),1)]),_:1},8,["class","href"])):x("",!0)])):x("",!0),s.member.desc?(v(),b("p",{key:1,class:"desc",innerHTML:s.member.desc},null,8,uu)):x("",!0),s.member.links?(v(),b("div",cu,[D(Dt,{links:s.member.links},null,8,["links"])])):x("",!0)])]),s.member.sponsor?(v(),b("div",fu,[D(pe,{class:"sp-link",href:s.member.sponsor,"no-icon":""},{default:E(()=>[i[0]||(i[0]=S("span",{class:"vpi-heart sp-icon"},null,-1)),Pe(" "+q(s.member.actionText||"Sponsor"),1)]),_:1},8,["href"])])):x("",!0)],2))}}),du=O(hu,[["__scopeId","data-v-f3fa364a"]]),gu={class:"container"},pu=A({__name:"VPTeamMembers",props:{size:{default:"medium"},members:{}},setup(o){const s=o,i=F(()=>[s.size,`count-${s.members.length}`]);return(t,e)=>(v(),b("div",{class:Z(["VPTeamMembers",i.value])},[S("div",gu,[(v(!0),b(ne,null,ae(t.members,n=>(v(),b("div",{key:n.name,class:"item"},[D(du,{size:t.size,member:n},null,8,["size","member"])]))),128))])],2))}}),Ff=O(pu,[["__scopeId","data-v-6cb0dbc4"]]),vu={Layout:zl,enhanceApp:({app:o})=>{o.component("Badge",dr)}};function Rn(o,s){var i=Object.keys(o);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(o);s&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),i.push.apply(i,t)}return i}function ie(o){for(var s=1;s<arguments.length;s++){var i=arguments[s]!=null?arguments[s]:{};s%2?Rn(Object(i),!0).forEach(function(t){T(o,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):Rn(Object(i)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(i,t))})}return o}function le(o){"@babel/helpers - typeof";return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},le(o)}function R(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Mn(o,s){for(var i=0;i<s.length;i++){var t=s[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,Ci(t.key),t)}}function M(o,s,i){return s&&Mn(o.prototype,s),i&&Mn(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o}function T(o,s,i){return s=Ci(s),s in o?Object.defineProperty(o,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[s]=i,o}function H(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&sn(o,s)}function $(o){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},$(o)}function sn(o,s){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sn(o,s)}function mu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function kn(o,s){if(s&&(typeof s=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(o)}function B(o){var s=mu();return function(){var t=$(o),e;if(s){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return kn(this,e)}}function yu(o,s){for(;!Object.prototype.hasOwnProperty.call(o,s)&&(o=$(o),o!==null););return o}function V(){return typeof Reflect<"u"&&Reflect.get?V=Reflect.get.bind():V=function(s,i,t){var e=yu(s,i);if(e){var n=Object.getOwnPropertyDescriptor(e,i);return n.get?n.get.call(arguments.length<3?s:t):n.value}},V.apply(this,arguments)}function ye(o){return _u(o)||ku(o)||bu(o)||Cu()}function _u(o){if(Array.isArray(o))return an(o)}function ku(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function bu(o,s){if(o){if(typeof o=="string")return an(o,s);var i=Object.prototype.toString.call(o).slice(8,-1);if(i==="Object"&&o.constructor&&(i=o.constructor.name),i==="Map"||i==="Set")return Array.from(o);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return an(o,s)}}function an(o,s){(s==null||s>o.length)&&(s=o.length);for(var i=0,t=new Array(s);i<s;i++)t[i]=o[i];return t}function Cu(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tu(o,s){if(typeof o!="object"||o===null)return o;var i=o[Symbol.toPrimitive];if(i!==void 0){var t=i.call(o,s||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(o)}function Ci(o){var s=Tu(o,"string");return typeof s=="symbol"?s:String(s)}var Su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bn(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ti={exports:{}};(function(o){var s=Object.prototype.hasOwnProperty,i="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(i=!1));function e(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function n(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new e(c,f||l,d),p=i?i+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],g]:l._events[p].push(g):(l._events[p]=g,l._eventsCount++),l}function r(l,u){--l._eventsCount===0?l._events=new t:delete l._events[u]}function a(){this._events=new t,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)s.call(c,f)&&u.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=i?i+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,g=f.length,p=new Array(g);d<g;d++)p[d]=f[d].fn;return p},a.prototype.listenerCount=function(u){var c=i?i+u:u,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,c,f,d,g,p){var m=i?i+u:u;if(!this._events[m])return!1;var k=this._events[m],I=arguments.length,P,L;if(k.fn){switch(k.once&&this.removeListener(u,k.fn,void 0,!0),I){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,c),!0;case 3:return k.fn.call(k.context,c,f),!0;case 4:return k.fn.call(k.context,c,f,d),!0;case 5:return k.fn.call(k.context,c,f,d,g),!0;case 6:return k.fn.call(k.context,c,f,d,g,p),!0}for(L=1,P=new Array(I-1);L<I;L++)P[L-1]=arguments[L];k.fn.apply(k.context,P)}else{var Y=k.length,W;for(L=0;L<Y;L++)switch(k[L].once&&this.removeListener(u,k[L].fn,void 0,!0),I){case 1:k[L].fn.call(k[L].context);break;case 2:k[L].fn.call(k[L].context,c);break;case 3:k[L].fn.call(k[L].context,c,f);break;case 4:k[L].fn.call(k[L].context,c,f,d);break;default:if(!P)for(W=1,P=new Array(I-1);W<I;W++)P[W-1]=arguments[W];k[L].fn.apply(k[L].context,P)}}return!0},a.prototype.on=function(u,c,f){return n(this,u,c,f,!1)},a.prototype.once=function(u,c,f){return n(this,u,c,f,!0)},a.prototype.removeListener=function(u,c,f,d){var g=i?i+u:u;if(!this._events[g])return this;if(!c)return r(this,g),this;var p=this._events[g];if(p.fn)p.fn===c&&(!d||p.once)&&(!f||p.context===f)&&r(this,g);else{for(var m=0,k=[],I=p.length;m<I;m++)(p[m].fn!==c||d&&!p[m].once||f&&p[m].context!==f)&&k.push(p[m]);k.length?this._events[g]=k.length===1?k[0]:k:r(this,g)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=i?i+u:u,this._events[c]&&r(this,c)):(this._events=new t,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,o.exports=a})(Ti);var Si=Ti.exports;const Ei=bn(Si);var Eu=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,Bt={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},$t="%c[xgplayer]",z={config:{debug:Eu?3:0},logInfo:function(s){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];this.config.debug>=3&&(i=console).log.apply(i,[$t,Bt.info,s].concat(e))},logWarn:function(s){for(var i,t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];this.config.debug>=1&&(i=console).warn.apply(i,[$t,Bt.warn,s].concat(e))},logError:function(s){var i;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(i=console)[t].apply(i,[$t,Bt.error,s].concat(n))}}};function wu(o){o.logInfo=z.logInfo.bind(o),o.logWarn=z.logWarn.bind(o),o.logError=z.logError.bind(o)}var Pu=function(){function o(s){R(this,o),this.bufferedList=s}return M(o,[{key:"start",value:function(i){return this.bufferedList[i].start}},{key:"end",value:function(i){return this.bufferedList[i].end}},{key:"length",get:function(){return this.bufferedList.length}}]),o}(),h={};h.createDom=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(o);return e.className=t,e.innerHTML=s,Object.keys(i).forEach(function(n){var r=n,a=i[n];o==="video"||o==="audio"||o==="live-video"?a&&e.setAttribute(r,a):e.setAttribute(r,a)}),e};h.createDomFromHtml=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=o;var e=t.children;return t=null,e.length>0?(e=e[0],i&&h.addClass(e,i),s&&Object.keys(s).forEach(function(n){e.setAttribute(n,s[n])}),e):null}catch(n){return z.logError("util.createDomFromHtml",n),null}};h.hasClass=function(o,s){if(!o||!s)return!1;try{return Array.prototype.some.call(o.classList,function(t){return t===s})}catch{var i=o.className&&le(o.className)==="object"?o.getAttribute("class"):o.className;return i&&!!i.match(new RegExp("(\\s|^)"+s+"(\\s|$)"))}};h.addClass=function(o,s){if(!(!o||!s))try{s.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&o.classList.add(i)})}catch{h.hasClass(o,s)||(o.className&&le(o.className)==="object"?o.setAttribute("class",o.getAttribute("class")+" "+s):o.className+=" "+s)}};h.removeClass=function(o,s){if(!(!o||!s))try{s.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&o.classList.remove(i)})}catch{h.hasClass(o,s)&&s.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");o.className&&le(o.className)==="object"?o.setAttribute("class",o.getAttribute("class").replace(e," ")):o.className=o.className.replace(e," ")})}};h.toggleClass=function(o,s){o&&s.split(/\s+/g).forEach(function(i){h.hasClass(o,i)?h.removeClass(o,i):h.addClass(o,i)})};h.classNames=function(){for(var o=arguments,s=[],i=function(n){h.typeOf(o[n])==="String"?s.push(o[n]):h.typeOf(o[n])==="Object"&&Object.keys(o[n]).map(function(r){o[n][r]&&s.push(r)})},t=0;t<arguments.length;t++)i(t);return s.join(" ")};h.findDom=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,s=arguments.length>1?arguments[1]:void 0,i;try{i=o.querySelector(s)}catch(t){z.logError("util.findDom",t),s.indexOf("#")===0&&(i=o.getElementById(s.slice(1)))}return i};h.getCss=function(o,s){return o.currentStyle?o.currentStyle[s]:document.defaultView.getComputedStyle(o,!1)[s]};h.padStart=function(o,s,i){for(var t=String(i),e=s>>0,n=Math.ceil(e/t.length),r=[],a=String(o);n--;)r.push(t);return r.join("").substring(0,e-a.length)+a};h.format=function(o){if(window.isNaN(o))return"";o=Math.round(o);var s=h.padStart(Math.floor(o/3600),2,0),i=h.padStart(Math.floor((o-s*3600)/60),2,0),t=h.padStart(Math.floor(o-s*3600-i*60),2,0);return(s==="00"?[i,t]:[s,i,t]).join(":")};h.event=function(o){if(o.touches){var s=o.touches[0]||o.changedTouches[0];o.clientX=s.clientX||0,o.clientY=s.clientY||0,o.offsetX=s.pageX-s.target.offsetLeft,o.offsetY=s.pageY-s.target.offsetTop}o._target=o.target||o.srcElement};h.typeOf=function(o){return Object.prototype.toString.call(o).match(/([^\s.*]+)(?=]$)/g)[0]};h.deepCopy=function(o,s){if(h.typeOf(s)==="Object"&&h.typeOf(o)==="Object")return Object.keys(s).forEach(function(i){h.typeOf(s[i])==="Object"&&!(s[i]instanceof Node)?o[i]===void 0||o[i]===void 0?o[i]=s[i]:h.deepCopy(o[i],s[i]):h.typeOf(s[i])==="Array"?o[i]=h.typeOf(o[i])==="Array"?o[i].concat(s[i]):s[i]:o[i]=s[i]}),o};h.deepMerge=function(o,s){return Object.keys(s).map(function(i){if(h.typeOf(s[i])==="Array"&&h.typeOf(o[i])==="Array"){if(h.typeOf(o[i])==="Array"){var t;(t=o[i]).push.apply(t,ye(s[i]))}}else h.typeOf(o[i])===h.typeOf(s[i])&&o[i]!==null&&h.typeOf(o[i])==="Object"&&!(s[i]instanceof window.Node)?h.deepMerge(o[i],s[i]):s[i]!==null&&(o[i]=s[i])}),o};h.getBgImage=function(o){var s=(o.currentStyle||window.getComputedStyle(o,null)).backgroundImage;if(!s||s==="none")return"";var i=document.createElement("a");return i.href=s.replace(/url\("|"\)/g,""),i.href};h.copyDom=function(o){if(o&&o.nodeType===1){var s=document.createElement(o.tagName);return Array.prototype.forEach.call(o.attributes,function(i){s.setAttribute(i.name,i.value)}),o.innerHTML&&(s.innerHTML=o.innerHTML),s}else return""};h.setInterval=function(o,s,i,t){o._interval[s]||(o._interval[s]=window.setInterval(i.bind(o),t))};h.clearInterval=function(o,s){clearInterval(o._interval[s]),o._interval[s]=null};h.setTimeout=function(o,s,i){o._timers||(o._timers=[]);var t=setTimeout(function(){s(),h.clearTimeout(o,t)},i);return o._timers.push(t),t};h.clearTimeout=function(o,s){var i=o._timers;if(h.typeOf(i)==="Array"){for(var t=0;t<i.length;t++)if(i[t]===s){i.splice(t,1),clearTimeout(s);break}}else clearTimeout(s)};h.clearAllTimers=function(o){var s=o._timers;h.typeOf(s)==="Array"&&(s.map(function(i){clearTimeout(i)}),o._timerIds=[])};h.createImgBtn=function(o,s,i,t){var e=h.createDom("xg-".concat(o),"",{},"xgplayer-".concat(o,"-img"));if(e.style.backgroundImage='url("'.concat(s,'")'),i&&t){var n,r,a;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(l){return i.indexOf(l)>-1&&t.indexOf(l)>-1?(n=parseFloat(i.slice(0,i.indexOf(l)).trim()),r=parseFloat(t.slice(0,t.indexOf(l)).trim()),a=l,!1):!0}),e.style.width="".concat(n).concat(a),e.style.height="".concat(r).concat(a),e.style.backgroundSize="".concat(n).concat(a," ").concat(r).concat(a),o==="start"?e.style.margin="-".concat(r/2).concat(a," auto auto -").concat(n/2).concat(a):e.style.margin="auto 5px auto 5px"}return e};h.Hex2RGBA=function(o,s){var i=[];if(/^\#[0-9A-F]{3}$/i.test(o)){var t="#";o.replace(/[0-9A-F]/ig,function(e){t+=e+e}),o=t}return/^#[0-9A-F]{6}$/i.test(o)?(o.replace(/[0-9A-F]{2}/ig,function(e){i.push(parseInt(e,16))}),"rgba(".concat(i.join(","),", ").concat(s,")")):"rgba(255, 255, 255, 0.1)"};h.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};h.checkIsFunction=function(o){return o&&typeof o=="function"};h.checkIsObject=function(o){return o!==null&&le(o)==="object"};h.hide=function(o){o.style.display="none"};h.show=function(o,s){o.style.display=s||"block"};h.isUndefined=function(o){if(typeof o>"u"||o===null)return!0};h.isNotNull=function(o){return o!=null};h.setStyleFromCsstext=function(o,s){if(s)if(h.typeOf(s)==="String"){var i=s.replace(/\s+/g,"").split(";");i.map(function(t){if(t){var e=t.split(":");e.length>1&&(o.style[e[0]]=e[1])}})}else Object.keys(s).map(function(t){o.style[t]=s[t]})};function Iu(o,s){for(var i=0,t=s.length;i<t;i++)if(o.indexOf(s[i])>-1)return!0;return!1}h.filterStyleFromText=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=o.style.cssText;if(!i)return{};var t=i.replace(/\s+/g,"").split(";"),e={},n={};return t.map(function(r){if(r){var a=r.split(":");a.length>1&&(Iu(a[0],s)?e[a[0]]=a[1]:n[a[0]]=a[1])}}),o.setAttribute("style",""),Object.keys(n).map(function(r){o.style[r]=n[r]}),e};h.getStyleFromCsstext=function(o){var s=o.style.cssText;if(!s)return{};var i=s.replace(/\s+/g,"").split(";"),t={};return i.map(function(e){if(e){var n=e.split(":");n.length>1&&(t[n[0]]=n[1])}}),t};h.preloadImg=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(o){var t=new window.Image;t.onload=function(e){t=null,s&&s(e)},t.onerror=function(e){t=null,i&&i(e)},t.src=o}};h.stopPropagation=function(o){o&&o.stopPropagation()};h.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};h.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};h.checkTouchSupport=function(){return"ontouchstart"in window};h.getBuffered2=function(o){for(var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,i=[],t=0;t<o.length;t++)i.push({start:o.start(t)<.5?0:o.start(t),end:o.end(t)});i.sort(function(l,u){var c=l.start-u.start;return c||u.end-l.end});var e=[];if(s)for(var n=0;n<i.length;n++){var r=e.length;if(r){var a=e[r-1].end;i[n].start-a<s?i[n].end>a&&(e[r-1].end=i[n].end):e.push(i[n])}else e.push(i[n])}else e=i;return new Pu(e)};h.getEventPos=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return o.touches&&o.touches.length>0&&(o=o.touches[0]),{x:o.x/s,y:o.y/s,clientX:o.clientX/s,clientY:o.clientY/s,offsetX:o.offsetX/s,offsetY:o.offsetY/s,pageX:o.pageX/s,pageY:o.pageY/s}};h.requestAnimationFrame=function(o){var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(s)return s(o)};h.getHostFromUrl=function(o){if(h.typeOf(o)!=="String")return"";var s=o.split("/"),i="";return s.length>3&&s[2]&&(i=s[2]),i};h.cancelAnimationFrame=function(o){var s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;s&&s(o)};h.isMSE=function(o){return o.media&&(o=o.media),!o||!(o instanceof HTMLMediaElement)?!1:/^blob/.test(o.currentSrc)||/^blob/.test(o.src)};h.isBlob=function(o){return typeof o=="string"&&/^blob/.test(o)};h.generateSessionId=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,s=new Date().getTime();try{o=parseInt(o)}catch{o=0}s+=o,window.performance&&typeof window.performance.now=="function"&&(s+=parseInt(window.performance.now()));var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(s+Math.random()*16)%16|0;return s=Math.floor(s/16),(t==="x"?e:e&3|8).toString(16)});return i};h.createEvent=function(o){var s;return typeof window.Event=="function"?s=new Event(o):(s=document.createEvent("Event"),s.initEvent(o,!0,!0)),s};h.adjustTimeByDuration=function(o,s,i){return!s||!o?o:o>s||i&&o<s?s:o};h.createPositionBar=function(o,s){var i=h.createDom("xg-bar","",{"data-index":-1},o);return s.appendChild(i),i};h.getTransformStyle=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i={scale:"".concat(o.scale||1),translate:"".concat(o.x||0,"%, ").concat(o.y||0,"%"),rotate:"".concat(o.rotate||0,"deg")},t=Object.keys(i);return t.forEach(function(e){var n=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),r="".concat(e,"(").concat(i[e],")");n.test(s)?(n.lastIndex=-1,s=s.replace(n,r)):s+="".concat(r," ")}),s};h.convertDeg=function(o){return Math.abs(o)<=1?o*360:o%360};h.getIndexByTime=function(o,s){var i=s.length,t=-1;if(i<1)return t;if(o<=s[0].end||i<2)t=0;else if(o>s[i-1].end)t=i-1;else for(var e=1;e<i;e++)if(o>s[e-1].end&&o<=s[e].end){t=e;break}return t};h.getOffsetCurrentTime=function(o,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,t=-1;if(i>=0&&i<s.length?t=i:t=h.getIndexByTime(o,s),t<0)return-1;var e=s.length,n=s[t],r=n.start,a=n.end,l=n.cTime,u=n.offset;return o<r?l:o>=r&&o<=a?o-u:o>a&&t>=e-1?a:-1};h.getCurrentTimeByOffset=function(o,s){var i=-1;if(!s||s.length<0)return o;for(var t=0;t<s.length;t++)if(o<=s[t].duration){i=t;break}if(i!==-1){var e=s[i].start;return i-1<0?e+o:e+(o-s[i-1].duration)}return o};function wi(o){var s=le(o);return o!==null&&(s==="object"||s==="function")}function Lu(o,s,i){var t,e,n,r,a,l,u=0,c=!1,f=!1,d=!0,g=!s&&s!==0&&typeof window.requestAnimationFrame=="function";if(typeof o!="function")throw new TypeError("Expected a function");s=+s||0,wi(i)&&(c=!!i.leading,f="maxWait"in i,n=f?Math.max(+i.maxWait||0,s):n,d="trailing"in i?!!i.trailing:d);function p(X){var fe=t,ve=e;return t=e=void 0,u=X,r=o.apply(ve,fe),r}function m(X,fe){return g?(window.cancelAnimationFrame(a),window.requestAnimationFrame(X)):setTimeout(X,fe)}function k(X){if(g)return window.cancelAnimationFrame(X);clearTimeout(X)}function I(X){return u=X,a=m(Y,s),c?p(X):r}function P(X){var fe=X-l,ve=X-u,me=s-fe;return f?Math.min(me,n-ve):me}function L(X){var fe=X-l,ve=X-u;return l===void 0||fe>=s||fe<0||f&&ve>=n}function Y(){var X=Date.now();if(L(X))return W(X);a=m(Y,P(X))}function W(X){return a=void 0,d&&t?p(X):(t=e=void 0,r)}function ee(){a!==void 0&&k(a),u=0,t=l=e=a=void 0}function U(){return a===void 0?r:W(Date.now())}function ue(){return a!==void 0}function re(){for(var X=Date.now(),fe=L(X),ve=arguments.length,me=new Array(ve),$e=0;$e<ve;$e++)me[$e]=arguments[$e];if(t=me,e=this,l=X,fe){if(a===void 0)return I(l);if(f)return a=m(Y,s),p(l)}return a===void 0&&(a=m(Y,s)),r}return re.cancel=ee,re.flush=U,re.pending=ue,re}function xu(o,s,i){var t=!0,e=!0;if(typeof o!="function")throw new TypeError("Expected a function");return wi(i)&&(t="leading"in i?!!i.leading:t,e="trailing"in i?!!i.trailing:e),Lu(o,s,{leading:t,trailing:e,maxWait:s})}function Au(){var o=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return o==="zh-cn"&&(o="zh"),o}function Du(o,s,i){if(o){var t=o.getAttribute(i);return!!(t&&t===s&&(o.tagName==="VIDEO"||o.tagName==="AUDIO"))}}var Nn={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},Ou=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],j={get device(){var o=j.os;return o.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var o=navigator.userAgent.toLowerCase(),s={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(s).filter(function(i){return s[i].test(o)}))[0]},get os(){if(typeof navigator>"u")return{};var o=navigator.userAgent,s=/(?:Windows Phone)/.test(o),i=/(?:SymbianOS)/.test(o)||s,t=/(?:Android)/.test(o),e=/(?:Firefox)/.test(o),n=/(?:iPad|PlayBook)/.test(o)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,r=n||t&&!/(?:Mobile)/.test(o)||e&&/(?:Tablet)/.test(o),a=/(?:iPhone)/.test(o)&&!r,l=!a&&!t&&!i&&!r;return{isTablet:r,isPhone:a,isIpad:n,isIos:a||n,isAndroid:t,isPc:l,isSymbian:i,isWindowsPhone:s,isFireFox:e}},get osVersion(){if(typeof navigator>"u")return 0;var o=navigator.userAgent,s="";/(?:iPhone)|(?:iPad|PlayBook)/.test(o)?s=Nn.ios:s=Nn.android;var i=s?s.exec(o):[];if(i&&i.length>=3){var t=i[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var o=/(micromessenger)\/([\d.]+)/,s=o.exec(navigator.userAgent.toLocaleLowerCase());return!!s},isSupportMP4:function(){var s={isSupport:!1,mime:""};if(typeof document>"u")return s;if(this.supportResult)return this.supportResult;var i=document.createElement("video");return typeof i.canPlayType=="function"&&Ou.map(function(t){i.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(s.isSupport=!0,s.mime+="||".concat(t))}),this.supportResult=s,i=null,s},isMSESupport:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource>"u"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(s)}catch(i){return this._logger.error(s,i),!1}},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(s){var i={supported:!1,smooth:!1,powerEfficient:!1};if(!s||typeof navigator>"u")return Promise.resolve(i);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(s);var t=s.video||{},e=s.audio||{};try{var n=MediaSource.isTypeSupported(t.contentType),r=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:n&&r,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(i)}}},on="3.0.20",Fn={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},Hn={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},vt=M(function o(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};R(this,o);var t=s&&s.i18n?s.i18n.ERROR_TYPES:null;if(s.media){var e=i.mediaError?i.mediaError:s.media.error||{},n=s.duration,r=s.currentTime,a=s.ended,l=s.src,u=s.currentSrc,c=s.media,f=c.readyState,d=c.networkState,g=i.errorCode||e.code;Hn[g]&&(g=Hn[g]);var p={playerVersion:on,currentTime:r,duration:n,ended:a,readyState:f,networkState:d,src:l||u,errorType:i.errorType,errorCode:g,message:i.errorMessage||e.message,mediaError:e,originError:i.originError?i.originError.stack:"",host:h.getHostFromUrl(l||u)};return i.ext&&Object.keys(i.ext).map(function(P){p[P]=i.ext[P]}),p}else if(arguments.length>1){for(var m={playerVersion:on,domain:document.domain},k=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],I=0;I<arguments.length;I++)m[k[I]]=arguments[I];return m.ex=t?(t[arguments[0]]||{}).msg:"",m}}),ge="play",Cn="playing",ze="ended",it="pause",lt="error",Ot="seeking",we="seeked",de="timeupdate",ut="waiting",Ee="canplay",Ru="canplaythrough",De="durationchange",Pi="volumechange",Le="loadeddata",Mu="loadedmetadata",Ii="ratechange",Li="progress",Tn="loadstart",Ke="emptied",Nu="stalled",Fu="suspend",Hu="abort",Bu="bufferedChange",Sn="focus",xi="blur",En="ready",Ai="urlNull",je="autoplay_started",wn="autoplay_was_prevented",Rt="complete",mt="replay",Pn="destroy",Mt="urlchange",ln="download_speed_change",Di="leaveplayer",Oi="enterplayer",Ri="loading",Se="fullscreen_change",yt="cssFullscreen_change",_t="mini_state_change",In="definition_change",$u="before_definition_change",un="after_definition_change",Vu="SEI_PARSED",Uu="retry",Fe="video_resize",cn="pip_change",Mi="rotate",Ni="screenShot",kt="playnext",Fi="shortcut",Hi="xglog",bt="user_action",Nt="reset",Bi="source_error",$i="source_success",ju="switch_subtitle",Vi=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],Ui={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},ji="fps_stuck";const Gu=Object.freeze(Object.defineProperty({__proto__:null,ABORT:Hu,AFTER_DEFINITION_CHANGE:un,AUTOPLAY_PREVENTED:wn,AUTOPLAY_STARTED:je,BEFORE_DEFINITION_CHANGE:$u,BUFFER_CHANGE:Bu,CANPLAY:Ee,CANPLAY_THROUGH:Ru,COMPLETE:Rt,CSS_FULLSCREEN_CHANGE:yt,DEFINITION_CHANGE:In,DESTROY:Pn,DOWNLOAD_SPEED_CHANGE:ln,DURATION_CHANGE:De,EMPTIED:Ke,ENDED:ze,ENTER_PLAYER:Oi,ERROR:lt,FPS_STUCK:ji,FULLSCREEN_CHANGE:Se,LEAVE_PLAYER:Di,LOADED_DATA:Le,LOADED_METADATA:Mu,LOADING:Ri,LOAD_START:Tn,MINI_STATE_CHANGE:_t,PAUSE:it,PIP_CHANGE:cn,PLAY:ge,PLAYER_BLUR:xi,PLAYER_FOCUS:Sn,PLAYING:Cn,PLAYNEXT:kt,PROGRESS:Li,RATE_CHANGE:Ii,READY:En,REPLAY:mt,RESET:Nt,RETRY:Uu,ROTATE:Mi,SCREEN_SHOT:Ni,SEEKED:we,SEEKING:Ot,SEI_PARSED:Vu,SHORTCUT:Fi,SOURCE_ERROR:Bi,SOURCE_SUCCESS:$i,STALLED:Nu,STATS_EVENTS:Ui,SUSPEND:Fu,SWITCH_SUBTITLE:ju,TIME_UPDATE:de,URL_CHANGE:Mt,URL_NULL:Ai,USER_ACTION:bt,VIDEO_EVENTS:Vi,VIDEO_RESIZE:Fe,VOLUME_CHANGE:Pi,WAITING:ut,XGLOG:Hi},Symbol.toStringTag,{value:"Module"}));function Vt(o,s){!this||!this.emit||(o==="error"?this.errorHandler(o,s.error):this.emit(o,s))}function Wu(o,s){return function(i,t){var e={player:s,eventName:o,originalEvent:i,detail:i.detail||{},timeStamp:i.timeStamp,currentTime:s.currentTime,duration:s.duration,paused:s.paused,ended:s.ended,isInternalOp:!!s._internalOp[i.type],muted:s.muted,volume:s.volume,host:h.getHostFromUrl(s.currentSrc),vtype:s.vtype};if(s.removeInnerOP(i.type),o==="timeupdate"&&(s._currentTime=s.media&&s.media.currentTime),o==="ratechange"){var n=s.media?s.media.playbackRate:0;if(n&&s._rate===n)return;s._rate=s.media&&s.media.playbackRate}if(o==="durationchange"&&(s._duration=s.media.duration),o==="volumechange"&&(e.isMutedChange=s._lastMuted!==s.muted,s._lastMuted=s.muted),o==="error"&&(e.error=t||s.video.error),s.mediaEventMiddleware[o]){var r=Vt.bind(s,o,e);try{s.mediaEventMiddleware[o].call(s,e,r)}catch(a){throw Vt.call(s,o,e),a}}else Vt.call(s,o,e)}}var zu=function(o){H(i,o);var s=B(i);function i(t){var e;R(this,i),e=s.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var n=t["x5-video-player-type"]||t.x5VideoPlayerType;return j.isWeixin&&j.os.isAndroid&&n&&(e.mediaConfig["x5-video-player-type"]=n,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),t.autoplayMuted&&!Object.prototype.hasOwnProperty.call(e.mediaConfig,"muted")&&(e.mediaConfig.muted=!0),e.media=h.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),h.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return M(i,[{key:"setEventsMiddleware",value:function(e){var n=this;Object.keys(e).map(function(r){n.mediaEventMiddleware[r]=e[r]})}},{key:"removeEventsMiddleware",value:function(e){var n=this;Object.keys(e).map(function(r){delete n.mediaEventMiddleware[r]})}},{key:"attachVideoEvents",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=Vi.map(function(r){var a="on".concat(r.charAt(0).toUpperCase()).concat(r.slice(1));return typeof e[a]=="function"&&e.on(r,e[a]),T({},r,Wu(r,e))})),this._evHandlers.forEach(function(r){var a=Object.keys(r)[0];n.addEventListener(a,r[a],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(r){var a=Object.keys(r)[0];n.removeEventListener(a,r[a],!1)}),this._evHandlers.forEach(function(r){var a=Object.keys(r)[0],l="on".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));typeof e[l]=="function"&&e.off(a,e[l])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,n){var r=this;e.removeAttribute("src"),e.load(),n.forEach(function(f,d){r.media.appendChild(h.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||""),"data-index":d+1}))});var a=e.children;if(a){this._videoSourceCount=a.length,this._videoSourceIndex=a.length,this._vLoadeddata=function(f){r.emit($i,{src:f.target.currentSrc,host:h.getHostFromUrl(f.target.currentSrc)})};for(var l=null,u=0;u<this._evHandlers.length;u++)if(Object.keys(this._evHandlers[u])[0]==="error"){l=this._evHandlers[u];break}!this._sourceError&&(this._sourceError=function(f){var d=parseInt(f.target.getAttribute("data-index"),10);if(r._videoSourceIndex--,r._videoSourceIndex===0||d>=r._videoSourceCount){var g={code:4,message:"sources_load_error"};l?l.error(f,g):r.errorHandler("error",g)}var p=Fn[4];r.emit(Bi,new vt(r,{errorType:p,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:f.target.src}))});for(var c=0;c<a.length;c++)a[c].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var n=e.children;if(!(!n||n.length===0||!this._sourceError)){for(var r=0;r<n.length;r++)n[r].removeEventListener("error",this._sourceError);for(;n.length>0;)e.removeChild(n[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||n)){var r=this.media.error||n,a=r.code?Fn[r.code]:"other",l=r.message;this.media.currentSrc||(l="empty_src",r={code:6,message:l}),this.emit(e,new vt(this,{errorType:a,errorCode:r.code,errorMessage:r.message||"",mediaError:r}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var n=[0,0];if(!this.media)return n;e||(e=this.media.buffered);var r=this.media.currentTime;if(e)for(var a=0,l=e.length;a<l&&(n[0]=e.start(a),n[1]=e.end(a),!(n[0]<=r&&r<=n[1]));a++);return n[0]-r<=0&&r-n[1]<=0?n:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?h.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var n=this.media.buffered;if(!n||n.length===0)return e;for(var r=0;r<n.length;r++)if((n.start(r)<=this.currentTime||n.start(r)<.1)&&n.end(r)>=this.currentTime)return{start:n.start(r),end:n.end(r)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var n=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return n[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(Mt,e),this.emit(ut),this._currentTime=0,this._duration=0,h.isMSE(this.media)){this.onWaiting();return}this._detachSourceEvents(this.media),h.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"aspectRatio",get:function(){return this.media?this.media.videoWidth/this.media.videoHeight:0}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,n){for(var r,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(r=V($(i.prototype),"emit",this)).call.apply(r,[this,e,n].concat(l))}},{key:"on",value:function(e,n){for(var r,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(r=V($(i.prototype),"on",this)).call.apply(r,[this,e,n].concat(l))}},{key:"once",value:function(e,n){for(var r,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(r=V($(i.prototype),"once",this)).call.apply(r,[this,e,n].concat(l))}},{key:"off",value:function(e,n){for(var r,a=arguments.length,l=new Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];(r=V($(i.prototype),"off",this)).call.apply(r,[this,e,n].concat(l))}},{key:"offAll",value:function(){V($(i.prototype),"removeAllListeners",this).call(this)}}]),i}(Ei),Ku=function(){function o(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};R(this,o),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=s}return M(o,[{key:"openDB",value:function(i){var t=this,e=this,n=this.myDB.version||1,r=e.indexedDB.open(e.myDB.name,n);r.onerror=function(a){},r.onsuccess=function(a){t.myDB.db=a.target.result,i.call(e)},r.onupgradeneeded=function(a){var l=a.target.result;a.target.transaction,l.objectStoreNames.contains(e.myDB.ojstore.name)||l.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var i=this;i.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),n,r=0;r<t.length;r++)n=e.add(t[r]),n.onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(i,t){for(var e=this.myDB.db.transaction(i,"readwrite").objectStore(i),n,r=0;r<t.length;r++)n=e.put(t[r]),n.onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(i,t,e){var n=this,r=this.myDB.db.transaction(i,"readwrite").objectStore(i),a=r.get(t);a.onerror=function(){e.call(n,null)},a.onsuccess=function(l){var u=l.target.result;e.call(n,u)}}},{key:"deleteData",value:function(i,t){var e=this.myDB.db.transaction(i,"readwrite").objectStore(i);e.delete(t)}},{key:"clearData",value:function(i){var t=this.myDB.db.transaction(i,"readwrite").objectStore(i);t.clear()}}]),o}(),Bn=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],$n=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Vn=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Ue="data-xgplayerid";function ct(o,s,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),n=3;n<t;n++)e[n-3]=arguments[n];var r=s.call.apply(s,[o].concat(e));!i||typeof i!="function"||(r&&r.then?r.then(function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];i.call.apply(i,[o].concat(l))}):i.call.apply(i,[o].concat(e)))}function Ct(o,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[o]&&(this.__hooks[o]=null),(function(){var t=arguments,e=this;if(i.pre)try{var n;(n=i.pre).call.apply(n,[this].concat(Array.prototype.slice.call(arguments)))}catch(a){throw a.message="[pluginName: ".concat(this.pluginName,":").concat(o,":pre error] >> ").concat(a.message),a}if(this.__hooks&&this.__hooks[o])try{var r=Ce(this,o,s);r?r.then?r.then(function(a){a!==!1&&ct.apply(void 0,[e,s,i.next].concat(ye(t)))}).catch(function(a){throw a}):ct.apply(void 0,[this,s,i.next].concat(Array.prototype.slice.call(arguments))):r===void 0&&ct.apply(void 0,[this,s,i.next].concat(Array.prototype.slice.call(arguments)))}catch(a){throw a.message="[pluginName: ".concat(this.pluginName,":").concat(o,"] >> ").concat(a.message),a}else ct.apply(void 0,[this,s,i.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function Gi(o,s){var i=this.__hooks;if(!i||!Array.isArray(i[o]))return-1;for(var t=i[o],e=0;e<t.length;e++)if(t[e]===s)return e;return-1}function Tt(o,s){var i=this.__hooks;if(i)return i.hasOwnProperty(o)?(Array.isArray(i[o])||(i[o]=[]),Gi.call(this,o,s)===-1&&i[o].push(s),!0):(console.warn("has no supported hook which name [".concat(o,"]")),!1)}function St(o,s){var i=this.__hooks;if(i){if(Array.isArray(i[o])){var t=i[o],e=Gi.call(this,o,s);e!==-1&&t.splice(e,1)}delete i[o]}}function Un(o){if(!(!this.plugins||!this.plugins[o.toLowerCase()])){for(var s=this.plugins[o.toLowerCase()],i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return s.useHooks&&s.useHooks.apply(s,t)}}function jn(o){if(!(!this.plugins||!this.plugins[o.toLowerCase()])){var s=this.plugins[o.toLowerCase()];if(s){for(var i=arguments.length,t=new Array(i>1?i-1:0),e=1;e<i;e++)t[e-1]=arguments[e];return s.removeHooks&&s.removeHooks.apply(s,t)}}}function Wi(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];o.__hooks={},s&&s.map(function(i){o.__hooks[i]=null}),Object.defineProperty(o,"hooks",{get:function(){return o.__hooks&&Object.keys(o.__hooks).map(function(t){if(o.__hooks[t])return t})}})}function zi(o){o.__hooks=null}function Ce(o,s,i){for(var t=arguments.length,e=new Array(t>3?t-3:0),n=3;n<t;n++)e[n-3]=arguments[n];if(o.__hooks&&Array.isArray(o.__hooks[s])){var r=o.__hooks[s],a=-1,l=function u(c,f,d){for(var g=arguments.length,p=new Array(g>3?g-3:0),m=3;m<g;m++)p[m-3]=arguments[m];if(a++,r.length===0||a===r.length)return d.call.apply(d,[c,c].concat(p));var k=r[a],I=k.call.apply(k,[c,c].concat(p));if(I&&I.then)return I.then(function(P){return P===!1?null:u.apply(void 0,[c,f,d].concat(p))}).catch(function(P){console.warn("[runHooks]".concat(f," reject"),P.message)});if(I!==!1)return u.apply(void 0,[c,f,d].concat(p))};return l.apply(void 0,[o,s,i].concat(e))}else return i.call.apply(i,[o,o].concat(e))}function Ut(o,s){z.logError("[".concat(o,"] event or callback cant be undefined or null when call ").concat(s))}var He=function(){function o(s){R(this,o),h.checkIsFunction(this.beforeCreate)&&this.beforeCreate(s),Wi(this),this.__args=s,this.__events={},this.__onceEvents={},this.config=s.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(s)}return M(o,[{key:"beforeCreate",value:function(i){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(i){this.player=i.player,this.playerConfig=i.player&&i.player.config,this.pluginName=i.pluginName?i.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=i.player&&i.player.logger}},{key:"updateLang",value:function(i){i||(i=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var i=h.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(i=this.playerConfig.domEventType),i}},{key:"on",value:function(i,t){var e=this;if(!i||!t||!this.player){Ut(this.pluginName,"plugin.on(event, callback)");return}typeof i=="string"?(this.__events[i]=t,this.player.on(i,t)):Array.isArray(i)&&i.forEach(function(n){e.__events[n]=t,e.player.on(n,t)})}},{key:"once",value:function(i,t){var e=this;if(!i||!t||!this.player){Ut(this.pluginName,"plugin.once(event, callback)");return}typeof i=="string"?(this.__onceEvents[i]=t,this.player.once(i,t)):Array.isArray(i)&&i.forEach(function(n){e.__onceEvents[n]=t,e.player.once(i,t)})}},{key:"off",value:function(i,t){var e=this;if(!i||!t||!this.player){Ut(this.pluginName,"plugin.off(event, callback)");return}typeof i=="string"?(delete this.__events[i],this.player.off(i,t)):Array.isArray(i)&&i.forEach(function(n){delete e.__events[i],e.player.off(n,t)})}},{key:"offAll",value:function(){var i=this;["__events","__onceEvents"].forEach(function(t){Object.keys(i[t]).forEach(function(e){i[t][e]&&i.off(e,i[t][e]),e&&delete i[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(i){var t;if(this.player){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(t=this.player).emit.apply(t,[i].concat(n))}}},{key:"emitUserAction",value:function(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var n=ie(ie({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(i,t,n)}}},{key:"hook",value:function(i,t){return Ct.call.apply(Ct,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(i,t){for(var e=arguments.length,n=new Array(e>2?e-2:0),r=2;r<e;r++)n[r-2]=arguments[r];return Tt.call.apply(Tt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(i,t){for(var e=arguments.length,n=new Array(e>2?e-2:0),r=2;r<e;r++)n[r-2]=arguments[r];return St.call.apply(St,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:i,options:t})}},{key:"getPlugin",value:function(i){return this.player?this.player.getPlugin(i):null}},{key:"__destroy",value:function(){var i=this,t=this.player,e=this.pluginName;this.offAll(),h.clearAllTimers(this),h.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(n){i[n]=null}),t.unRegisterPlugin(e),zi(this)}}],[{key:"defineGetterOrSetter",value:function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(i,e,t[e])}},{key:"defineMethod",value:function(i,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&typeof t[e]=="function"&&Object.defineProperty(i,e,{configurable:!0,value:t[e]})}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),o}(),Yu=9;if(typeof Element<"u"&&!Element.prototype.matches){var Xe=Element.prototype;Xe.matches=Xe.matchesSelector||Xe.mozMatchesSelector||Xe.msMatchesSelector||Xe.oMatchesSelector||Xe.webkitMatchesSelector}function Xu(o,s){for(;o&&o.nodeType!==Yu;){if(typeof o.matches=="function"&&o.matches(s))return o;o=o.parentNode}}var qu=Xu,Ju=qu;function jt(o,s,i,t,e){var n=Qu.apply(this,arguments);return o.addEventListener(i,n,e),{destroy:function(){o.removeEventListener(i,n,e)}}}function Zu(o,s,i,t,e){return typeof o.addEventListener=="function"?jt.apply(null,arguments):typeof i=="function"?jt.bind(null,document).apply(null,arguments):(typeof o=="string"&&(o=document.querySelectorAll(o)),Array.prototype.map.call(o,function(n){return jt(n,s,i,t,e)}))}function Qu(o,s,i,t){return function(e){e.delegateTarget=Ju(e.target,s),e.delegateTarget&&t.call(o,e)}}var ec=Zu;const Gn=bn(ec);var tc={CONTROLS:"controls",ROOT:"root"},te={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},Wn={ICON_DISABLE:"xg-icon-disable",ICON_HIDE:"xg-icon-hide"};function Gt(o){return o?o.indexOf&&/^(?:http|data:|\/)/.test(o):!1}function nc(o,s){return le(o)==="object"&&o.class&&typeof o.class=="string"?"".concat(s," ").concat(o.class):s}function ic(o,s){return le(o)==="object"&&o.attr&&le(o.attr)==="object"&&Object.keys(o.attr).map(function(i){s[i]=o.attr[i]}),s}function zn(o,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",n=null;if(o instanceof window.Element)return h.addClass(o,i),Object.keys(t).map(function(r){o.setAttribute(r,t[r])}),o;if(Gt(o)||Gt(o.url))return t.src=Gt(o)?o:o.url||"",n=h.createDom(o.tag||"img","",t,"xg-img ".concat(i)),n;if(typeof o=="function")try{return n=o(),n instanceof window.Element?(h.addClass(n,i),Object.keys(t).map(function(r){n.setAttribute(r,t[r])}),n):(z.logWarn("warn>>icons.".concat(s," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(r){return z.logError("Plugin named [".concat(e,"]:createIcon"),r),null}return typeof o=="string"?h.createDomFromHtml(o,t,i):(z.logWarn("warn>>icons.".concat(s," in config of plugin named [").concat(e,"] is invalid")),null)}function rc(o,s){var i=s.config.icons||s.playerConfig.icons;Object.keys(o).map(function(t){var e=o[t],n=e&&e.class?e.class:"",r=e&&e.attr?e.attr:{},a=null;i&&i[t]&&(n=nc(i[t],n),r=ic(i[t],r),a=zn(i[t],t,n,r,s.pluginName)),!a&&e&&(a=zn(e.icon?e.icon:e,r,n,{},s.pluginName)),s.icons[t]=a})}function sc(o,s){Object.keys(o).map(function(i){Object.defineProperty(s.langText,i,{get:function(){var e=s.lang,n=s.i18n;return n[i]?n[i]:o[i]&&o[i][e]||""}})})}var Q=function(o){H(i,o);var s=B(i);function i(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return R(this,i),t=s.call(this,e),t.__delegates=[],t}return M(i,[{key:"__init",value:function(e){if(V($(i.prototype),"__init",this).call(this,e),!!e.root){var n=e.root,r=null;this.icons={},this.root=null,this.parent=null;var a=this.registerIcons()||{};rc(a,this),this.langText={};var l=this.registerLanguageTexts()||{};sc(l,this);var u="";try{u=this.render()}catch(d){throw z.logError("Plugin:".concat(this.pluginName,":render"),d),new Error("Plugin:".concat(this.pluginName,":render:").concat(d.message))}if(u)r=i.insert(u,n,e.index),r.setAttribute("data-index",e.index);else if(e.tag)r=h.createDom(e.tag,"",e.attr,e.name),r.setAttribute("data-index",e.index),n.appendChild(r);else return;this.root=r,this.parent=n;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var n=this.children();n&&le(n)==="object"&&Object.keys(n).length>0&&Object.keys(n).map(function(r){var a=r,l=n[a],u={root:e.root},c,f;typeof l=="function"?(c=e.config[a]||{},f=l):le(l)==="object"&&typeof l.plugin=="function"&&(c=l.options?h.deepCopy(e.config[a]||{},l.options):e.config[a]||{},f=l.plugin),u.config=c,c.index!==void 0&&(u.index=c.index),c.root&&(u.root=c.root),e.registerPlugin(f,u,a)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function n(u,c){for(var f=0;f<u.children.length;f++)u.children[f].children.length>0?n(u.children[f],c):c(u.children[f])}var r=this.root,a=this.i18n,l=this.langText;r&&n(r,function(u){var c=u.getAttribute&&u.getAttribute("lang-key");if(c){var f=a[c.toUpperCase()]||l[c];f&&(u.innerHTML=typeof f=="function"?f(e):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=this.i18n||{},a=this.langText;e.setAttribute&&e.setAttribute("lang-key",n);var l=r[n]||a[n]||"";l&&(e.innerHTML=l)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,h.addClass(this.find(".xgplayer-icon"),Wn.ICON_DISABLE)}},{key:"enable",value:function(){this.config.disable=!1,h.removeClass(this.find(".xgplayer-icon"),Wn.ICON_DISABLE)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";n.root=n.root||this.root;var a=V($(i.prototype),"registerPlugin",this).call(this,e,n,r);return this._children.push(a),a}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,n,r){var a=this;if(arguments.length<3&&typeof n=="function")Array.isArray(e)?e.forEach(function(u){a.bindEL(u,n)}):this.bindEL(e,n);else{var l=i.delegate.call(this,this.root,e,n,r);this.__delegates=this.__delegates.concat(l)}}},{key:"unbind",value:function(e,n){var r=this;if(arguments.length<3&&typeof n=="function")Array.isArray(e)?e.forEach(function(u){r.unbindEL(u,n)}):this.unbindEL(e,n);else for(var a="".concat(e,"_").concat(n),l=0;l<this.__delegates.length;l++)if(this.__delegates[l].key===a){this.__delegates[l].destroy(),this.__delegates.splice(l,1);break}}},{key:"setStyle",value:function(e,n){var r=this;if(this.root){if(h.typeOf(e)==="String")return this.root.style[e]=n;h.typeOf(e)==="Object"&&Object.keys(e).map(function(a){r.root.style[a]=e[a]})}}},{key:"setAttr",value:function(e,n){var r=this;if(this.root){if(h.typeOf(e)==="String")return this.root.setAttribute(e,n);h.typeOf(e)==="Object"&&Object.keys(e).map(function(a){r.root.setAttribute(a,e[a])})}}},{key:"setHtml",value:function(e,n){this.root&&(this.root.innerHTML=e,typeof n=="function"&&n())}},{key:"bindEL",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof n=="function"&&this.root.addEventListener(e,n,r)}},{key:"unbindEL",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof n=="function"&&this.root.removeEventListener(e,n,r)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var n=window.getComputedStyle(this.root,null),r=n.getPropertyValue("display");if(r==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,n){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!n||!(n instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(n):e.appendChild(n)}catch(r){return z.logError("Plugin:appendChild",r),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,n=this.player;this.__delegates.map(function(r){r.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(r){n.unRegisterPlugin(r.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),V($(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(r){e[r]=null})}}],[{key:"insert",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=n.children.length,l=Number(r),u=e instanceof window.Node;if(a){for(var c=0,f=null,d="";c<a;c++){f=n.children[c];var g=Number(f.getAttribute("data-index"));if(g>=l){d="beforebegin";break}else g<l&&(d="afterend")}return u?d==="afterend"?n.appendChild(e):n.insertBefore(e,f):f.insertAdjacentHTML(d,e),d==="afterend"?n.children[n.children.length-1]:n.children[c]}else return u?n.appendChild(e):n.insertAdjacentHTML("beforeend",e),n.children[n.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,n,r,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=[];if(e instanceof window.Node&&typeof a=="function")if(Array.isArray(r))r.forEach(function(f){var d=Gn(e,n,f,a,l);d.key="".concat(n,"_").concat(f),u.push(d)});else{var c=Gn(e,n,r,a,l);c.key="".concat(n,"_").concat(r),u.push(c)}return u}},{key:"ROOT_TYPES",get:function(){return tc}},{key:"POSITIONS",get:function(){return te}}]),i}(He),ac=function(){function o(){var s=this;if(R(this,o),T(this,"__trigger",function(i){var t=new Date().getTime();s.timeStamp=t;for(var e=0;e<i.length;e++)s.__runHandler(i[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(xu(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(i){console.error(i)}}return M(o,[{key:"addObserver",value:function(i,t){if(this.observer){this.observer.observe(i);for(var e=i.getAttribute(Ue),n=this.__handlers,r=-1,a=0;a<n.length;a++)n[a]&&i===n[a].target&&(r=a);r>-1?this.__handlers[r].handler=t:this.__handlers.push({target:i,handler:t,playerId:e})}}},{key:"unObserver",value:function(i){var t=-1;this.__handlers.map(function(n,r){i===n.target&&(t=r)});try{var e;(e=this.observer)===null||e===void 0||e.unobserve(i)}catch{}t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){var i;(i=this.observer)===null||i===void 0||i.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(i){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&i===t[e].target){try{t[e].handler(i)}catch(n){console.error(n)}return!0}return!1}}]),o}(),st=null;function oc(o,s){return st||(st=new ac),st.addObserver(o,s),st}function lc(o,s){var i;(i=st)===null||i===void 0||i.unObserver(o,s)}var se={pluginGroup:{},init:function(s){var i=s._pluginInfoId;i||(i=new Date().getTime(),s._pluginInfoId=i),!s.config.closeResizeObserver&&oc(s.root,function(){s.resize()}),this.pluginGroup[i]={_originalOptions:s.config||{},_plugins:{}}},formatPluginInfo:function(s,i){var t=null,e=null;return s.plugin&&typeof s.plugin=="function"?(t=s.plugin,e=s.options):(t=s,e={}),i&&(e.config=i||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(s,i){for(var t=0;t<i.length;t++)if(s.toLowerCase()===i[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(s,i){for(var t=Object.keys(i),e=null,n=0;n<t.length;n++)if(s.toLowerCase()===t[n].toLowerCase()){e=i[t[n]];break}return h.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(s,i){var t=this,e=i.timeout||1500;return Promise.race([i.loader().then(function(n){var r;n&&n.__esModule?r=n.default:r=n,t.register(s,r,n.options)}),new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},e)})])},register:function(s,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!s||!i||typeof i!="function"||i.prototype===void 0)){var e=s._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var n=this.pluginGroup[e]._plugins,r=this.pluginGroup[e]._originalOptions;t.player=s;var a=t.pluginName||i.pluginName;if(!a)throw new Error("The property pluginName is necessary");if(i.isSupported&&!i.isSupported(s.config.mediaType,s.config.codecType)){console.warn("not supported plugin [".concat(a,"]"));return}t.config||(t.config={});for(var l=Object.keys(r),u=0;u<l.length;u++)if(a.toLowerCase()===l[u].toLowerCase()){var c=r[l[u]];h.typeOf(c)==="Object"?t.config=Object.assign({},t.config,r[l[u]]):h.typeOf(c)==="Boolean"&&(t.config.disable=!c);break}i.defaultConfig&&Object.keys(i.defaultConfig).forEach(function(d){typeof t.config[d]>"u"&&(t.config[d]=i.defaultConfig[d])}),t.root?typeof t.root=="string"&&(t.root=s[t.root]):t.root=s.root,t.index=t.config.index||0;try{n[a.toLowerCase()]&&(this.unRegister(e,a.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(a,"] exist, destroy the old instance")));var f=new i(t);return n[a.toLowerCase()]=f,n[a.toLowerCase()].func=i,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(d){throw console.error(d),d}}}},unRegister:function(s,i){s._pluginInfoId&&(s=s._pluginInfoId),i=i.toLowerCase();try{var t=this.pluginGroup[s]._plugins[i];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[s]._plugins[i])}catch(e){console.error("[unRegister:".concat(i,"] cgid:[").concat(s,"] error"),e)}},deletePlugin:function(s,i){var t=s._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[i]},getPlugins:function(s){var i=s._pluginInfoId;return i&&this.pluginGroup[i]?this.pluginGroup[i]._plugins:{}},findPlugin:function(s,i){var t=s._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=i.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(s){var i=this;function t(e){return!e||!e.then?new Promise(function(n){n()}):e}return new Promise(function(e){if(i.pluginGroup){var n;return s._loadingPlugins&&s._loadingPlugins.length?n=Promise.all(s._loadingPlugins):n=Promise.resolve(),n.then(function(){var r=s._pluginInfoId;if(!i.pluginGroup[r]){e();return}var a=i.pluginGroup[r]._plugins,l=[];Object.keys(a).forEach(function(u){if(a[u]&&a[u].beforePlayerInit)try{var c=a[u].beforePlayerInit();l.push(t(c))}catch(f){throw l.push(t(null)),f}}),Promise.all([].concat(l)).then(function(){e()}).catch(function(u){console.error(u),e()})})}})},afterInit:function(s){var i=s._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var t=this.pluginGroup[i]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(s,i){var t=i._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(n){if(e[n].updateLang)e[n].updateLang(s);else try{e[n].lang=s}catch{console.warn("".concat(n," setLang"))}})}},reRender:function(s){var i=this,t=s._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],n=this.pluginGroup[t]._plugins;Object.keys(n).forEach(function(r){r!=="controls"&&n[r]&&(e.push({plugin:n[r].func,options:n[r].__args}),i.unRegister(t,r))}),e.forEach(function(r){i.register(s,r.plugin,r.options)})}},onPluginsReady:function(s){var i=s._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var t=this.pluginGroup[i]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},destroy:function(s){var i=s._pluginInfoId;if(this.pluginGroup[i]){lc(s.root);for(var t=this.pluginGroup[i]._plugins,e=0,n=Object.keys(t);e<n.length;e++){var r=n[e];this.unRegister(i,r)}delete this.pluginGroup[i],delete s._pluginInfoId}}},w={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function Kn(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:Au(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var uc=function(s,i){var t,e,n;i.preset&&i.options?n=new i.preset(i.options,s.config):n=new i({},s.config);var r=n,a=r.plugins,l=a===void 0?[]:a,u=r.ignores,c=u===void 0?[]:u,f=r.icons,d=f===void 0?{}:f,g=r.i18n,p=g===void 0?[]:g;s.config.plugins||(s.config.plugins=[]),s.config.ignores||(s.config.ignores=[]),(t=s.config.plugins).push.apply(t,ye(l)),(e=s.config.ignores).push.apply(e,ye(c)),Object.keys(d).map(function(k){s.config.icons[k]||(s.config.icons[k]=d[k])});var m=s.config.i18n||[];p.push.apply(p,ye(m)),s.config.i18n=p},cc=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onMouseEnter",function(a){var l=y(t),u=l.player,c=l.playerConfig;c.closeControlsBlur&&u.focus({autoHide:!1})}),T(y(t),"onMouseLeave",function(a){var l=y(t),u=l.player;u.focus()}),t}return M(i,[{key:"beforeCreate",value:function(e){!e.config.mode&&j.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,n=this.config,r=n.disable,a=n.height,l=n.mode;if(!r){l==="flex"&&this.player.addClass(w.FLEX_CONTROLS);var u={height:"".concat(a,"px")};Object.keys(u).map(function(f){e.root.style[f]=u[f]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(_t,function(f){f?h.addClass(e.root,"mini-controls"):h.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;j.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&h.addClass(this.root,w.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){h.removeClass(this.root,w.CONTROLS_AUTOHIDE)}},{key:"show",value:function(e){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;if(this.root){var a=e.defaultConfig||{};if(!n.root){var l=n.position?n.position:n.config&&n.config.position?n.config.position:a.position;switch(l){case te.CONTROLS_LEFT:n.root=this.left;break;case te.CONTROLS_RIGHT:n.root=this.right;break;case te.CONTROLS_CENTER:n.root=this.center;break;case te.CONTROLS:n.root=this.root;break;default:n.root=this.left}return V($(i.prototype),"registerPlugin",this).call(this,e,n,r)}}}},{key:"destroy",value:function(){j.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,n=e.mode,r=e.autoHide,a=e.initShow,l=e.disable;if(!l){var u=h.classNames({"xgplayer-controls":!0},{"flex-controls":n==="flex"},{"bottom-controls":n==="bottom"},T({},w.CONTROLS_AUTOHIDE,r),{"xgplayer-controls-initshow":a||!r});return'<xg-controls class="'.concat(u,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(Q),fc={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},he={lang:{},langKeys:[],textKeys:[]};function at(o,s){return Object.keys(s).forEach(function(i){var t=h.typeOf(s[i]),e=h.typeOf(o[i]);if(t==="Array"){var n;e!=="Array"&&(o[i]=[]),(n=o[i]).push.apply(n,ye(s[i]))}else t==="Object"?(e!=="Object"&&(o[i]={}),at(o[i],s[i])):o[i]=s[i]}),o}function Ki(){Object.keys(he.lang.en).map(function(o){he.textKeys[o]=o})}function hc(o,s){var i=[];if(s||(s=he),!!s.lang){h.typeOf(o)!=="Array"?i=Object.keys(o).map(function(n){var r=n==="zh"?"zh-cn":n;return{LANG:r,TEXT:o[n]}}):i=o;var t=s,e=t.lang;i.map(function(n){n.LANG==="zh"&&(n.LANG="zh-cn"),e[n.LANG]?at(e[n.LANG]||{},n.TEXT||{}):Ln(n,s)}),Ki()}}function Ln(o,s){var i=o.LANG;if(s||(s=he),!!s.lang){var t=o.TEXT||{};i==="zh"&&(i="zh-cn"),s.lang[i]?at(s.lang[i],t):(s.langKeys.push(i),s.lang[i]=t),Ki()}}function dc(o){var s,i={lang:{},langKeys:[],textKeys:{},pId:o};return at(i.lang,he.lang),(s=i.langKeys).push.apply(s,ye(he.langKeys)),at(i.textKeys,he.textKeys),i}Ln(fc);var nt={get textKeys(){return he.textKeys},get langKeys(){return he.langKeys},get lang(){var o={};return he.langKeys.map(function(s){o[s]=he.lang[s]}),he.lang["zh-cn"]&&(o.zh=he.lang["zh-cn"]||{}),o},extend:hc,use:Ln,init:dc},K={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},Yn=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],ce={},Wt=null,Yi=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"add",value:function(e){e&&(ce[e.playerId]=e,Object.keys(ce).length===1&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete ce[e.playerId])}},{key:"_iterate",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(var r in ce)if(Object.prototype.hasOwnProperty.call(ce,r)){var a=ce[r];if(n){if(e(a))break}else e(a)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var n=null;return this._iterate(function(r){var a=e(r);return a&&(n=r),a},!0),n}},{key:"findAll",value:function(e){var n=[];return this._iterate(function(r){e(r)&&n.push(r)}),n}},{key:"setActive",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ce[e])return n?this.forEach(function(r){e===r.playerId?(r.isUserActive=!0,r.isInstNext=!1):r.isUserActive=!1}):ce[e].isUserActive=n,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(ce),n=0;n<e.length;n++){var r=ce[e[n]];if(r&&r.isUserActive)return e[n]}return null}},{key:"setNext",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ce[e])return n?this.forEach(function(r){e===r.playerId?(r.isUserActive=!1,r.isInstNext=!0):r.isInstNext=!1}):ce[e].isInstNext=n,e}}],[{key:"getInstance",value:function(){return Wt||(Wt=new i),Wt}}]),i}(Si.EventEmitter);function gc(o){for(var s=Object.keys(ce),i=0;i<s.length;i++){var t=ce[s[i]];if(t.root===o)return t}return null}var pc=["play","pause","replay","retry"],Xn=0,qn=0,Oe=null,Ft=function(o){H(i,o);var s=B(i);function i(t){var e;R(this,i);var n=h.deepMerge(Kn(),t);e=s.call(this,n),T(y(e),"canPlayFunc",function(){if(e.config){var p=e.config,m=p.autoplay,k=p.defaultPlaybackRate;z.logInfo("player","canPlayFunc, startTime",e.__startTime),e._seekToStartTime(),e.playbackRate=k,(m||e._useAutoplay)&&e.mediaPlay(),e.off(Ee,e.canPlayFunc),e.removeClass(w.ENTER)}}),T(y(e),"onFullscreenChange",function(p,m){var k=function(){h.setTimeout(y(e),function(){e.resize()},100)},I=h.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(bt,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var P=Du(I,e.playerId,Ue);if(m||I&&(I===e._fullscreenEl||P))k(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,I,w.FULLSCREEN),e.emit(Se,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){k();var L=y(e),Y=L._fullScreenOffset,W=L.config;if(W.needFullscreenScroll?(window.scrollTo(Y.left,Y.top),h.setTimeout(y(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen)e.removeClass(w.FULLSCREEN);else{var ee=e._fullscreenEl;!ee&&(e.root.contains(p.target)||p.target===e.root)&&(ee=p.target),e.recoverFullStyle(e.root,ee,w.FULLSCREEN)}e._fullscreenEl=null,e.emit(Se,!1)}}),T(y(e),"_onWebkitbeginfullscreen",function(p){e._fullscreenEl=e.media,e.onFullscreenChange(p,!0)}),T(y(e),"_onWebkitendfullscreen",function(p){e.onFullscreenChange(p,!1)}),Wi(y(e),pc),e.config=n,e._pluginInfoId=h.generateSessionId(),wu(y(e));var r=e.constructor.defaultPreset;if(e.config.presets.length){var a=e.config.presets.indexOf("default");a>=0&&r&&(e.config.presets[a]=r)}else r&&e.config.presets.push(r);e.userTimer=null,e.waitTimer=null,e.handleSource=!0,e._state=K.INITIAL,e.isAd=!1,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.__startTime=-1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e.timeSegments=[],e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e.sizeInfo={width:0,height:0,left:0,top:0},e._accPlayed={t:0,acc:0,loopAcc:0},e._offsetInfo={currentTime:-1,duration:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=nt.init(e._pluginInfoId),j.os.isAndroid&&j.osVersion>0&&j.osVersion<6&&(e.config.autoplay=!1),e.database=new Ku,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0,e.innerStates={isActiveLocked:!1},e.instManager=Oe;var l=e._initDOM();if(!l)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),kn(e);var u=e.config,c=u.definition,f=c===void 0?{}:c,d=u.url;if(!d&&f.list&&f.list.length>0){var g=f.list.find(function(p){return p.definition&&p.definition===f.defaultDefinition});g||(f.defaultDefinition=f.list[0].definition,g=f.list[0]),e.config.url=g.url,e.curDefinition=g}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),se.onPluginsReady(y(e)),e.getInitDefinition(),e.setState(K.READY),h.setTimeout(y(e),function(){e.emit(En)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<K.ATTACHED)&&e.start(),e}return M(i,[{key:"_initDOM",value:function(){var e,n=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var r=this.config.el;if(r&&r.nodeType===1)this.root=r;else return this.emit(lt,new vt("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var a=gc(this.root);a&&(z.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),a.destroy()),this.root.setAttribute(Ue,this.playerId),(e=Oe)===null||e===void 0||e.add(this),se.init(this),this._initBaseDoms();var l=this.constructor.XgVideoProxy;if(l&&this.mediaConfig.mediaType===l.mediaType){var u=this.innerContainer||this.root;this.detachVideoEvents(this.media);var c=new l(u,this.config,this.mediaConfig);this.attachVideoEvents(c),this.media=c}if(this.media.setAttribute(Ue,this.playerId),this.config.controls){var f=this.config.controls.root||null,d=se.register(this,cc,{root:f});this.controls=d}var g=this.config.isMobileSimulateMode==="mobile"?"mobile":j.device;if(this.addClass("".concat(w.DEFAULT," ").concat(w.INACTIVE," xgplayer-").concat(g," ").concat(this.config.controls?"":w.NO_CONTROLS)),this.config.autoplay?this.addClass(w.ENTER):this.addClass(w.NO_START),this.config.fluid){var p=this.config,m=p.width,k=p.height;(typeof m!="number"||typeof k!="number")&&(m=600,k=337.5);var I={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(k*100/m,"%")};Object.keys(I).forEach(function(U){n.root.style[U]=I[U]})}else["width","height"].forEach(function(U){n.config[U]&&(typeof n.config[U]!="number"?n.root.style[U]=n.config[U]:n.root.style[U]="".concat(n.config[U],"px"))});var P=this.root.getBoundingClientRect(),L=P.width,Y=P.height,W=P.left,ee=P.top;return this.sizeInfo.width=L,this.sizeInfo.height=Y,this.sizeInfo.left=W,this.sizeInfo.top=ee,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=h.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(n){e.on(n,e["on"+n.charAt(0).toUpperCase()+n.slice(1)])}),Bn.forEach(function(n){document&&document.addEventListener(n,e.onFullscreenChange)}),j.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(Le,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(ge,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Bn.forEach(function(n){document.removeEventListener(n,e.onFullscreenChange)}),this.playFunc&&this.off(ge,this.playFunc),this.off(Ee,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_clearUserTimer",value:function(){this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null)}},{key:"_startInit",value:function(e){var n=this;if(this.media&&!((!e||e===""||h.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(Ai),z.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this.handleSource&&(this._detachSourceEvents(this.media),h.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src")),h.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var r=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!r.contains(this.media)&&r.insertBefore(this.media,r.firstChild);var a=this.media.readyState;z.logInfo("_startInit readyState",a),this.config.autoplay&&(!h.isMSE(this.media)&&this.load(),(j.os.isIpad||j.os.isPhone)&&this.mediaPlay());var l=this.config.startTime;this.__startTime=l>0?l:-1,this.config.startTime=0,a>=2&&this.duration>0?this.canPlayFunc():this.on(Ee,this.canPlayFunc),(!this.hasStart||this.state<K.ATTACHED)&&se.afterInit(this),this.hasStart=!0,this.setState(K.ATTACHED),h.setTimeout(this,function(){n.emit(Rt)},0)}}},{key:"_registerPlugins",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var r=this.config.ignores||[],a=this.config.plugins||[],l=this.config.i18n||[];n&&nt.extend(l,this.__i18n);var u=r.join("||").toLowerCase().split("||"),c=this.plugins;a.forEach(function(f){try{var d=f.plugin?f.plugin.pluginName:f.pluginName;if(d&&u.indexOf(d.toLowerCase())>-1)return null;if(!n&&c[d.toLowerCase()])return;if(f.lazy&&f.loader){var g=se.lazyRegister(e,f);f.forceBeforeInit&&(g.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(g),1)}).catch(function(p){z.logError("_registerPlugins:loadingPlugin",p),e._loadingPlugins.splice(e._loadingPlugins.indexOf(g),1)}),e._loadingPlugins.push(g));return}return e.registerPlugin(f)}catch(p){z.logError("_registerPlugins:",p)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(n){uc(e,n)})}},{key:"_getRootByPosition",value:function(e){var n=null;switch(e){case te.ROOT_RIGHT:this.rightBar||(this.rightBar=h.createPositionBar("xg-right-bar",this.root)),n=this.rightBar;break;case te.ROOT_LEFT:this.leftBar||(this.leftBar=h.createPositionBar("xg-left-bar",this.root)),n=this.leftBar;break;case te.ROOT_TOP:this.topBar||(this.topBar=h.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&h.addClass(this.topBar,w.TOP_BAR_AUTOHIDE)),n=this.topBar;break;default:n=this.innerContainer||this.root;break}return n}},{key:"registerPlugin",value:function(e,n){var r=se.formatPluginInfo(e,n),a=r.PLUFGIN,l=r.options,u=this.config.plugins,c=se.checkPluginIfExits(a.pluginName,u);!c&&u.push(a);var f=se.getRootByConfig(a.pluginName,this.config);f.root&&(l.root=f.root),f.position&&(l.position=f.position);var d=l.position?l.position:l.config&&l.config.position||a.defaultConfig&&a.defaultConfig.position;if(!l.root&&typeof d=="string"&&d.indexOf("controls")>-1){var g;return(g=this.controls)===null||g===void 0?void 0:g.registerPlugin(a,l,a.pluginName)}return l.root||(l.root=this._getRootByPosition(d)),se.register(this,a,l)}},{key:"deregister",value:function(e){typeof e=="string"?se.unRegister(this,e):e instanceof He&&se.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),n&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var n;if(typeof e=="string"?n=e:e instanceof He&&(n=e.pluginName),!!n)for(var r=this.config.plugins.length-1;r>-1;r--){var a=this.config.plugins[r];if(a.pluginName.toLowerCase()===n.toLowerCase()){this.config.plugins.splice(r,1);break}}}},{key:"plugins",get:function(){return se.getPlugins(this)}},{key:"getPlugin",value:function(e){var n=se.findPlugin(this,e);return n&&n.pluginName?n:null}},{key:"addClass",value:function(e){this.root&&(h.hasClass(this.root,e)||h.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&h.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return h.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,n){this.root&&this.root.setAttribute(e,n)}},{key:"removeAttribute",value:function(e,n){this.root&&this.root.removeAttribute(e,n)}},{key:"start",value:function(e){var n=this;if(!(this.state>K.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(K.ATTACHING),this._registerPlugins(!1),se.beforeInit(this).then(function(){if(n.config){e||(e=n.url||n.config.url);var r=n._preProcessUrl(e),a=n._startInit(r.url);return a}}).catch(function(r){throw r.fileName="player",r.lineNumber="236",z.logError("start:beforeInit:",r),r})}},{key:"switchURL",value:function(e,n){var r=this,a=e;h.typeOf(e)==="Object"&&(a=e.url),a=this._preProcessUrl(a).url;var l=this.currentTime;this.__startTime=l;var u=this.paused&&!this.isError;return this.src=a,new Promise(function(c,f){var d=function(m){r.off("timeupdate",g),r.off("canplay",g),f(m)},g=function(){r._seekToStartTime(),u&&r.pause(),r.off("error",d),c(!0)};if(r.once("error",d),!a){r.errorHandler("error",{code:6,message:"empty_src"});return}j.os.isAndroid?r.once("timeupdate",g):r.once("canplay",g),r.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<K.ATTACHED){this.removeClass(w.NO_START),this.addClass(w.ENTER),this.start(),this._useAutoplay=!0;return}this.state<K.RUNNING&&(this.removeClass(w.NO_START),!this.isCanplay&&this.addClass(w.ENTER));var n=V($(i.prototype),"play",this).call(this);return n!==void 0&&n&&n.then?n.then(function(){e.removeClass(w.NOT_ALLOW_AUTOPLAY),e.addClass(w.PLAYING),e.state<K.RUNNING&&(z.logInfo(">>>>playPromise.then"),e.setState(K.RUNNING),e.emit(je))}).catch(function(r){if(z.logWarn(">>>>playPromise.catch",r.name),e.media&&e.media.error){e.onError(),e.removeClass(w.ENTER);return}r.name==="NotAllowedError"&&(e._errorTimer=h.setTimeout(e,function(){e._errorTimer=null,e.emit(wn),e.addClass(w.NOT_ALLOW_AUTOPLAY),e.removeClass(w.ENTER),e.pause(),e.setState(K.NOTALLOW)},0))}):(z.logWarn("video.play not return promise"),this.state<K.RUNNING&&(this.setState(K.RUNNING),this.removeClass(w.NOT_ALLOW_AUTOPLAY),this.removeClass(w.NO_START),this.removeClass(w.ENTER),this.addClass(w.PLAYING),this.emit(je))),n}},{key:"mediaPause",value:function(){V($(i.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){V($(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(w.PAUSED),Ce(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;Ce(this,"pause",function(){V($(i.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,n){var r=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var a=this.config,l=a.isSeekedPlay,u=a.seekedStatus,c=n||(l?"play":u);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(we,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(r.removeClass(w.ENTER),r.isSeeking=!1,c){case"play":r.play();break;case"pause":r.pause();break;default:r._isPauseBeforeSeek>1||r.paused?r.pause():r.play()}r._isPauseBeforeSeek=0,r._onceSeekCanplay=null},this.once(we,this._onceSeekCanplay),this.state<K.RUNNING?(this.removeClass(w.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,n=this.config,r=n.definition,a=n.url;!a&&r&&r.list&&r.list.length>0&&r.defaultDefinition&&r.list.map(function(l){l.definition===r.defaultDefinition&&(e.config.url=l.url,e.curDefinition=l)})}},{key:"changeDefinition",value:function(e,n){var r=this,a=this.config.definition;if(Array.isArray(a==null?void 0:a.list)&&a.list.forEach(function(u){(e==null?void 0:e.definition)===u.definition&&(r.curDefinition=u)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(In,{from:n,to:e}),!this.hasStart){this.config.url=e.url;return}var l=this.switchURL(e.url,ie({seamless:a.seamless!==!1&&typeof MediaSource<"u"&&typeof MediaSource.isTypeSupported=="function"},e));l&&l.then?l.then(function(){r.emit(un,{from:n,to:e})}):this.emit(un,{from:n,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(Le,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,n=w.NOT_ALLOW_AUTOPLAY,r=w.PLAYING,a=w.NO_START,l=w.PAUSED,u=w.REPLAY,c=w.ENTER,f=w.ENDED,d=w.ERROR,g=w.LOADING,p=[n,r,a,l,u,c,f,d,g];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,p.forEach(function(m){e.removeClass(m)}),this.addClass(w.NO_START),this.emit(Nt)}},{key:"reset",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;this.resetState();var a=this.plugins;if(a&&(n.map(function(u){e.deregister(u)}),r)){var l=Kn();Object.keys(this.config).keys(function(u){e.config[u]!=="undefined"&&(u==="plugins"||u==="presets"||u==="el"||u==="id")&&(e.config[u]=l[u])})}}},{key:"destroy",value:function(){var e,n=this,r=this.innerContainer,a=this.root,l=this.media;if(!(!a||!l)){if(this.hasStart=!1,this._useAutoplay=!1,a.removeAttribute(Ue),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),h.clearAllTimers(this),this.emit(Pn),(e=Oe)===null||e===void 0||e.remove(this),se.destroy(this),zi(this),V($(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),r)for(var u=r.children,c=0;c<u.length;c++)r.removeChild(u[c]);!r&&l instanceof window.Node&&a.contains(l)&&a.removeChild(l),["topBar","leftBar","rightBar","innerContainer"].map(function(d){n[d]&&a.removeChild(n[d]),n[d]=null});var f=a.className.split(" ");f.length>0?a.className=f.filter(function(d){return d.indexOf("xgplayer")<0}).join(" "):a.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(d){n[d]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(w.ENDED),this.currentTime=0,this.isSeeking=!1,Ce(this,"replay",function(){e.once(we,function(){var n=e.mediaPlay();n&&n.catch&&n.catch(function(r){console.log(r)})}),e.emit(mt),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(w.ERROR),this.addClass(w.LOADING),Ce(this,"retry",function(){var n=e.currentTime,r=e.config.url,a=h.isMSE(e.media)?{url:r}:e._preProcessUrl(r);e.src=a.url,!e.config.isLive&&(e.currentTime=n),e.once(Ee,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,n,r,a){e&&(a||(a=w.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=h.filterStyleFromText(e)),h.addClass(e,r),n&&n!==e&&!this._orgPCss&&(this._orgPCss=h.filterStyleFromText(n),h.addClass(n,a),n.setAttribute(Ue,this.playerId)))}},{key:"recoverFullStyle",value:function(e,n,r,a){a||(a=w.PARENT_FULLSCREEN),this._orgCss&&(h.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),h.removeClass(e,r),n&&n!==e&&this._orgPCss&&(h.setStyleFromCsstext(n,this._orgPCss),this._orgPCss="",h.removeClass(n,a),n.removeAttribute(Ue))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,n=this.root,r=this.media;(e==="video"||e==="media")&&(e=this[e]),e||(e=n),this._fullScreenOffset={top:h.scrollTop(),left:h.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var a=h.getFullScreenEl();if(a===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var l=0;l<$n.length;l++){var u=$n[l];if(e[u]){var c=u==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[u]();return c&&c.then?c:Promise.resolve()}}return r.fullscreenEnabled||r.webkitSupportsFullscreen?(r.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch{return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!h.getFullScreenEl())){this.root;var n=this.media;this._fullActionFrom="exit";try{for(var r=0;r<Vn.length;r++){var a=Vn[r];if(document[a]){var l=document[a]();return l&&l.then?l:Promise.resolve()}}return n&&n.webkitSupportsFullscreen?(n.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch{return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var n=e?"".concat(w.INNER_FULLSCREEN," ").concat(w.CSS_FULLSCREEN):w.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,n);var r=this.config.fullscreen,a=r===void 0?{}:r,l=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();l&&(this.fullscreen=!0,this.emit(Se,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(yt,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(w.INNER_FULLSCREEN," ").concat(w.CSS_FULLSCREEN):w.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var n=this.config.fullscreen,r=n===void 0?{}:n,a=r.useCssFullscreen===!0||typeof r.useCssFullscreen=="function"&&r.useCssFullscreen();a?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(Se,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(yt,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var n=e?"".concat(w.INNER_FULLSCREEN," ").concat(w.ROTATE_FULLSCREEN):w.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,n,w.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(Se,!0)}},{key:"exitRotateFullscreen",value:function(e){var n=this._fullscreenEl!==this.root?"".concat(w.INNER_FULLSCREEN," ").concat(w.ROTATE_FULLSCREEN):w.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,n,w.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Se,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(Sn,ie({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this._clearUserTimer(),this.emit(xi,ie({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3},r=this.innerStates;if(this.isActive=!0,this.removeClass(w.INACTIVE),this._clearUserTimer(),n.isLock!==void 0&&(r.isActiveLocked=n.isLock),n.autoHide===!1||n.isLock===!0||r.isActiveLocked){this._clearUserTimer();return}var a=n&&n.delay?n.delay:this.config.inactive;this.userTimer=h.setTimeout(this,function(){e.userTimer=null,e.blur()},a)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.ignorePaused,r=n===void 0?!1:n;if(!this.innerStates.isActiveLocked){var a=this.config.closePauseVideoFocus;this.isActive=!1,(r||a||!this.paused&&!this.ended)&&this.addClass(w.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(w.ENTER),this.removeClass(w.ERROR),this.removeClass(w.LOADING),this.isCanplay=!0,this.waitTimer&&h.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){var e=this;this.isError=!1,this.isSeeking=!1,this.__startTime>0&&(this.duration>0?this._seekToStartTime():this.once(De,function(){e._seekToStartTime()}))}},{key:"onLoadstart",value:function(){this.removeClass(w.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===K.ENDED&&this.setState(K.RUNNING),this.removeClass(w.PAUSED),this.ended&&this.removeClass(w.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(w.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this._clearUserTimer(),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(w.ENDED),this.setState(K.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(w.NOT_ALLOW_AUTOPLAY),this.removeClass(w.NO_START),this.removeClass(w.ENTER),this.removeClass(w.LOADING),this.addClass(w.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(w.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.removeClass(w.LOADING),this.removeClass(w.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=h.setTimeout(this,function(){e.addClass(w.LOADING),e.emit(Ri),h.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var n=w.NO_START,r=w.PAUSED,a=w.ENDED,l=w.ERROR,u=w.REPLAY,c=w.LOADING,f=[n,r,a,l,u,c];f.forEach(function(d){e.removeClass(d)}),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(w.LOADING))&&this.media.readyState>2&&(this.removeClass(w.LOADING),h.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state===K.NOTALLOW&&this.duration&&(this.setState(K.RUNNING),this.emit(je)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){h.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,n,r){if(!(!this.media||!n||!e)){var a=h.typeOf(e)==="String"?e:e.type||"";r.props&&h.typeOf(r.props)!=="Array"&&(r.props=[r.props]),this.emit(bt,ie({eventType:a,action:n,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},r))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var n=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=n,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{startDiff:0,endDiff:0},r=n||{},a=r.startDiff,l=a===void 0?0:a,u=r.endDiff,c=u===void 0?0:u,f=this.media.buffered;if(!f||f.length===0||!this.duration)return!0;for(var d=e||this.media.currentTime||.2,g=f.length,p=0;p<g;p++)if(f.start(p)+l<=d&&f.end(p)-c>d)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,n=e.vy,r=e.vx,a=e.h,l=e.w,u=this.videoPos.rotate;if(!(u<0&&a<0&&l<0)){var c=this.videoPos._pi;if(!c&&this.media.videoHeight&&(c=this.media.videoWidth/this.media.videoHeight*100),!!c){this.videoPos.pi=c,u=u<0?0:u;var f={rotate:u},d=0,g=0,p=1,m=Math.abs(u/90),k=this.root,I=this.innerContainer,P=k.offsetWidth,L=I?I.offsetHeight:k.offsetHeight,Y=L,W=P;if(m%2===0)p=a>0?100/a:l>0?100/l:1,f.scale=p,d=n>0?(100-a)/2-n:0,f.y=m===2?0-d:d,g=r>0?(100-l)/2-r:0,f.x=m===2?0-g:g,this.media.style.width="".concat(W,"px"),this.media.style.height="".concat(Y,"px");else if(m%2===1){W=L,Y=P;var ee=L-P;g=-ee/2/W*100,f.x=m===3?g+n/2:g-n/2,d=ee/2/Y*100,f.y=m===3?d+r/2:d-r/2,f.scale=p,this.media.style.width="".concat(W,"px"),this.media.style.height="".concat(Y,"px")}var U=h.getTransformStyle(f,this.media.style.transform||this.media.style.webkitTransform);this.media.style.transform=U,this.media.style.webkitTransform=U}}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var n=this.videoPos;n.h=e.h*100||0,n.w=e.w*100||0,n.vx=e.x*100||0,n.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var n=this;e&&Object.keys(e).map(function(r){if(r!=="plugins"){n.config[r]=e[r];var a=n.plugins[r.toLowerCase()];a&&h.typeOf(a.setConfig)==="Function"&&a.setConfig(e[r])}})}},{key:"playNext",value:function(e){var n=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,Ce(this,"playnext",function(){n.start(),n.emit(kt,e)})}},{key:"resize",value:function(){var e=this;if(this.media){var n=this.root.getBoundingClientRect();this.sizeInfo.width=n.width,this.sizeInfo.height=n.height,this.sizeInfo.left=n.left,this.sizeInfo.top=n.top;var r=this.media,a=r.videoWidth,l=r.videoHeight,u=this.config,c=u.fitVideoSize,f=u.videoFillMode;if((f==="fill"||f==="cover"||f==="contain")&&this.setAttribute("data-xgfill",f),!(!l||!a)){this._videoHeight=l,this._videoWidth=a;var d=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,g=n.width,p=n.height-d,m=parseInt(a/l*1e3,10),k=parseInt(g/p*1e3,10),I=g,P=p,L={};c==="auto"&&k>m||c==="fixWidth"?(P=g/m*1e3,this.config.fluid?L.paddingTop="".concat(P*100/I,"%"):L.height="".concat(P+d,"px")):(c==="auto"&&k<m||c==="fixHeight")&&(I=m*p/1e3,L.width="".concat(I,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(L).forEach(function(W){e.root.style[W]=L[W]}),(f==="fillHeight"&&k<m||f==="fillWidth"&&k>m)&&this.setAttribute("data-xgfill","cover");var Y={videoScale:m,vWidth:I,vHeight:P,cWidth:I,cHeight:P+d};this.resizePosition(),this.emit(Fe,Y)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,n);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(n*100,"%")}},{key:"setState",value:function(e){z.logInfo("setState","state from:".concat(Yn[this.state]," to:").concat(Yn[e])),this._state=e}},{key:"_preProcessUrl",value:function(e,n){var r=this.config,a=r.preProcessUrl,l=r.preProcessUrlOptions,u=Object.assign({},l,n);return!h.isBlob(e)&&typeof a=="function"?a(e,u):{url:e}}},{key:"_seekToStartTime",value:function(){this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime>this.duration?this.duration:this.__startTime,this.__startTime=-1)}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(K.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===K.RUNNING||this._state===K.ENDED},set:function(e){e?this.setState(K.RUNNING):this._state>=K.RUNNING&&this.setState(K.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var n=this,r=this.config.definition,a=null,l=null;r.list=e,this.emit("resourceReady",e),e.forEach(function(u){var c;((c=n.curDefinition)===null||c===void 0?void 0:c.definition)===u.definition&&(a=u),r.defaultDefinition===u.definition&&(l=u)}),!l&&e.length>0&&(l=e[0]),a?this.changeDefinition(a):l&&this.changeDefinition(l)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var n=this.media.getVideoPlaybackQuality();return e.dropped=n.droppedVideoFrames||0,e.total=n.totalVideoFrames||0,e.corrupted=n.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var n=nt.langKeys.filter(function(r){return r===e});if(n.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(nt.langKeys.join(),"] "));return}this.config.lang=e,se.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return on}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return V($(i.prototype),"readyState",this)}},{key:"error",get:function(){var e=V($(i.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return V($(i.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed,n=e.acc,r=e.t;return r?new Date().getTime()-r+n:n}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=h.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return qn},set:function(e){qn=e}},{key:"realTimeSpeed",get:function(){return Xn},set:function(e){Xn=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,n){return Ct.call.apply(Ct,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,n){return Tt.call.apply(Tt,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,n){return St.call.apply(St,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,n,r){for(var a=arguments.length,l=new Array(a>3?a-3:0),u=3;u<a;u++)l[u-3]=arguments[u];return Un.call.apply(Un,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,n,r){for(var a=arguments.length,l=new Array(a>3?a-3:0),u=3;u<a;u++)l[u-3]=arguments[u];return jn.call.apply(jn,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e,n){var r;typeof n=="boolean"&&n!==this.muted&&(this.addInnerOP("volumechange"),h.typeOf(n)===Boolean&&(this.muted=n)),(r=Oe)===null||r===void 0||r.setActive(this.playerId,e)}}],[{key:"debugger",get:function(){return z.config.debug},set:function(e){z.config.debug=e}},{key:"instManager",get:function(){return Oe},set:function(e){Oe=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return(e=Oe)===null||e===void 0?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,n){var r;(r=Oe)===null||r===void 0||r.setActive(e,n)}},{key:"isHevcSupported",value:function(){return j.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return j.probeConfigSupported(e)}},{key:"install",value:function(e,n){i.plugins||(i.plugins={}),i.plugins[e]||(i.plugins[e]=n)}},{key:"use",value:function(e,n){i.plugins||(i.plugins={}),i.plugins[e]=n}}]),i}(zu);T(Ft,"defaultPreset",null);T(Ft,"XgVideoProxy",null);Ft.instManager=Yi.getInstance();function oe(){return new Date().getTime()}var Re={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},vc=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(z.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),T(y(t),"_onAutoplayStart",function(){z.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),T(y(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=oe(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&h.clearTimeout(y(t),t._waitTimer),t._waittTimer&&h.clearTimeout(y(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),T(y(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=oe(),t.emitLog(Re.SEEK_START,{start:oe()}))}),T(y(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),T(y(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=oe(),t.fixedWaitingStart=oe(),t._waitType=1,t.emitLog(Re.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),T(y(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=oe(),t._waitTimer=h.setTimeout(y(t),function(){t._isWaiting&&(t.waitingStart=oe(),h.clearTimeout(y(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(Re.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),T(y(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),T(y(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return M(i,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=oe(),this.loadedCostTime=0,this.startCostTime=0,this.on(Tn,function(){var n=e._state,r=n.autoplayStart,a=n.isFFSend;e.startCostTime=oe()-e.newPointTime,z.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(r," isFFSend:").concat(a," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!a&&(!n.isLs&&e.emitLog(Re.LOAD_START,{}),n.isLs=!0,n.isTimeUpdate=!1,n.isFFLoading=!0,e.pt=oe(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(Le,function(){e.vt=oe(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var n=e._state,r=n.isTimeUpdate,a=n.isFFSend,l=n.autoplayStart;z.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(r||l)&&e._sendFF("loadedData"),a||e.emitLog(Re.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(Ot,this._onSeeking),this.on(we,this._onSeeked),this.on(Pn,function(){e.endState("destroy")}),this.on(Mt,function(){e.endState("urlChange"),z.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([Cn,Ee],this._onPlaying),this.on(ut,this._onWaiting),this.on(lt,this._onError),this.on(Nt,function(){z.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(je,this._onAutoplayStart),this.off(de,this._onTimeupdate),this.once(je,this._onAutoplayStart),this.once(de,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=oe();var n=this._state,r=n.isFFLoading,a=n.isFFSend;z.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(r," !isFFSend:").concat(!a)),this.vt>0&&r&&!a&&(z.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(Re.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&h.clearTimeout(this,this._waittTimer),this._waittTimer=h.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),h.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var n=oe(),r=n-this.seekingStart;this.seekingStart=0,this.emitLog(Re.SEEK_END,{end:n,costTime:r,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(h.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(h.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var n=oe(),r=n-this.waitingStart,a=n-this.fixedWaitingStart,l=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(Re.WAIT_END,{fixedCostTime:a>l?l:a,costTime:r>l?l:r,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,n){var r=this.player;this.emit(Hi,ie({t:oe(),host:h.getHostFromUrl(r.currentSrc),vtype:r.vtype,eventType:e,currentTime:this.player.currentTime,readyState:r.video.readyState,networkState:r.video.networkState},n))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),i}(Q);function mc(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var yc=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"registerIcons",value:function(){return{replay:mc}}},{key:"afterCreate",value:function(){var e=this;Q.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(r){r.preventDefault(),r.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(ze,function(){if(e.playerConfig.loop||h.addClass(e.player.root,"replay"),!e.config.disable){e.show();var n=e.root.querySelector("path");if(n){var r=window.getComputedStyle(n).getPropertyValue("transform");if(typeof r=="string"&&r.indexOf("none")>-1)return null;n.setAttribute("transform",r)}}}),this.on(ge,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),h.removeClass(this.player.root,"replay")}},{key:"show",value:function(e){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(Q),_c=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(e){h.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(ze,function(){e.isEndedShow&&h.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(de,function(){e.onTimeUpdate()}),this.on(Mt,function(){h.removeClass(e.root,"hide"),h.addClass(e.root,"xg-showplay"),e.once(de,function(){e.onTimeUpdate()})})):this.on(ge,function(){h.addClass(e.root,"hide")})}},{key:"setConfig",value:function(e){var n=this;Object.keys(e).forEach(function(a){n.config[a]=e[a]});var r=this.config.poster;this.update(r)}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?h.removeClass(this.root,"xg-showplay"):this.once(de,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"getBgSize",value:function(e){var n="";switch(e){case"cover":n="cover";break;case"contain":n="contain";break;case"fixHeight":n="auto 100%";break;default:n=""}return n?"background-size: ".concat(n,";"):""}},{key:"render",value:function(){var e=this.config,n=e.poster,r=e.hideCanplay,a=e.fillMode,l=e.notHidden,u=this.getBgSize(a),c=n?"background-image:url(".concat(n,");").concat(u):u,f=l?"xg-not-hidden":r?"xg-showplay":"";return'<xg-poster class="xgplayer-poster '.concat(f,'" style="').concat(c,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,notHidden:!1,poster:"",fillMode:"fixWidth"}}}]),i}(Q);function xn(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function An(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var be={};function kc(o,s){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return be[o]&&window.clearTimeout(be[o].id),be[o]={},i.start&&i.start(),be[o].id=window.setTimeout(function(){i.end&&i.end(),window.clearTimeout(be[o].id),delete be[o]},s),be[o].id}function Jn(o){if(o){window.clearTimeout(o);return}Object.keys(be).map(function(s){window.clearTimeout(be[s].id),delete be[s]})}var bc=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),T(y(e),"onPlayerReset",function(){e.autoPlayStart=!1;var n=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),h.removeClass(e.root,n),e.show()}),T(y(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var n=e.config.mode==="auto"?"auto-hide":"hide";h.addClass(e.root,n),e.autoPlayStart=!0,e.toggleTo("play")}}),e.autoPlayStart=!1,e}return M(i,[{key:"afterCreate",value:function(){var e=this.playerConfig;this.initIcons(),this.listenEvents(),this.bindClickEvents(),e.autoplay||this.show()}},{key:"listenEvents",value:function(){var e=this,n=this.player,r=this.playerConfig;this.once(En,function(){r&&(r.lang&&r.lang==="en"?h.addClass(n.root,"lang-is-en"):r.lang==="jp"&&h.addClass(n.root,"lang-is-jp"))}),this.on(je,this.onAutoplayStart),this.on(wn,function(){var a=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),h.removeClass(e.root,a),e.show()}),this.on(ge,function(){e.toggleTo("play")}),this.on(it,function(){e.toggleTo("pause")}),this.on(Nt,function(){e.onPlayerReset()})}},{key:"bindClickEvents",value:function(){var e=this;this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(r){r.cancelable&&r.preventDefault(),r.stopPropagation();var a=e.player.paused;e.emitUserAction(r,"switch_play_pause",{props:"paused",from:a,to:!a})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:xn,class:"xg-icon-play"},startPause:{icon:An,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(e){h.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){h.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){h.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var n=this;this._animateId=kc("pauseplay",400,{start:function(){h.addClass(n.root,"interact"),n.show(),n.switchStatus(!0)},end:function(){h.removeClass(n.root,"interact"),!e&&n.hide(),n._animateId=null}})}},{key:"endAnimate",value:function(){h.removeClass(this.root,"interact"),Jn(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var n=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(n.state<K.READY)){var r=this.player.paused;!r&&n.state===K.RUNNING?n.pause():n.play()}}},{key:"onPlayPause",value:function(e){this.toggleTo(e)}},{key:"toggleTo",value:function(e){var n=this.config,r=this.player;if(!(!r||r.state<K.RUNNING||!this.autoPlayStart)){if(n.mode==="show"){this.switchStatus(),this.show();return}if(n.mode==="auto"){this.switchStatus();return}if(n.isShowPause&&r.paused&&!r.ended||n.isShowEnd&&r.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(n.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||r.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Jn(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(Q),Cc=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"render",value:function(){var e=this.config.innerHtml,n=h.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)n.appendChild(e);else if(e&&typeof e=="string")n.innerHTML=e;else{for(var r="",a=1;a<=12;a++)r+='<div class="xgplayer-enter-bar'.concat(a,'"></div>');n.innerHTML='<div class="xgplayer-enter-spinner">'.concat(r,"</div>")}return n}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(Q);function Be(o,s,i){try{return' <div class="xg-tips '.concat(i?"hide":" ",'" lang-key="').concat(o.i18nKeys[s],`">
    `).concat(o.i18n[s],`
    </div>`)}catch{return'<div class="xg-tips hide"></div>'}}var Zn=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:10}}}]),i}(Q);function Qn(o){var s=parseFloat(o),i=o.indexOf("%")===-1&&!Number.isNaN(s);return i&&s}var Dn=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Xi=Dn.length;function Tc(){for(var o={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},s=0;s<Xi;s++){var i=Dn[s];o[i]=0}return o}function Sc(o){var s=window.getComputedStyle(o);return s}function ei(o){if(typeof o=="string"&&(o=document.querySelector(o)),!(!o||le(o)!=="object"||!o.nodeType)){var s=Sc(o);if(s.display==="none")return Tc();var i={};i.width=o.offsetWidth,i.height=o.offsetHeight;for(var t=i.isBorderBox=s.boxSizing==="border-box",e=0;e<Xi;e++){var n=Dn[e],r=s[n],a=parseFloat(r);i[n]=Number.isNaN(a)?0:a}var l=i.paddingLeft+i.paddingRight,u=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,f=i.marginTop+i.marginBottom,d=i.borderLeftWidth+i.borderRightWidth,g=i.borderTopWidth+i.borderBottomWidth,p=t,m=Qn(s.width);m!==!1&&(i.width=m+(p?0:l+d));var k=Qn(s.height);return k!==!1&&(i.height=k+(p?0:u+g)),i.innerWidth=i.width-(l+d),i.innerHeight=i.height-(u+g),i.outerWidth=i.width+c,i.outerHeight=i.height+f,i}}function zt(o,s){for(var i=0;i<o.length;i++){var t=o[i];if(t.identifier===s)return t}}var Kt={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},ti={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Ec=function(o){H(i,o);var s=B(i);function i(t){var e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return R(this,i),e=s.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=n.handle instanceof Element?n.handle:document.querySelector(n.handle),!e._root||!e._handlerDom?kn(e):(e._bindStartEvent(),e)}return M(i,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),ti[this._startKey].map(function(n){e["on".concat(n)]=e["on".concat(n)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var n=this;if(e){var r=ti[this._startKey];r.map(function(a){window.addEventListener(a,n["on".concat(a)])}),this._boundPointerEvents=r}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(n){window.removeEventListener(n,e["on".concat(n)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var n=e.changedTouches[0];this.dragStart(e,n),this.touchIdentifier=n.pointerId!==void 0?n.pointerId:n.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var n=zt(e.changedTouches,this.touchIdentifier);n&&this.dragMove(e,n)}},{key:"ontouchend",value:function(e){var n=zt(e.changedTouches,this.touchIdentifier);n&&this.dragEnd(e,n),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var n=zt(e.changedTouches,this.touchIdentifier);n&&this.dragCancel(e,n)}},{key:"dragStart",value:function(e,n){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=n,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var r=ei(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-r.height,this.startPos.maxX=window.innerWidth-r.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,n){this.isDragging=!0,this.animate(),this.emit(Kt.START,this.startPos)}},{key:"dragEnd",value:function(e,n){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(Kt.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,n){var r={x:n.pageX-this.downPoint.pageX,y:n.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(r)&&this.dragRealStart(e,n),r}},{key:"dragMove",value:function(e,n){if(e=e||window.event,!!this.isDown){var r=this.startPos,a=r.x,l=r.y,u=this._dragPointerMove(e,n),c=u.x,f=u.y;c=this.checkContain("x",c,a),f=this.checkContain("y",f,l),this.position.x=a+c,this.position.y=l+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit(Kt.MOVE,this.position)}}},{key:"dragCancel",value:function(e,n){this.dragEnd(e,n)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,n,r){return n+r<0?0-r:e==="x"&&n+r>this.startPos.maxX?this.startPos.maxX-r:e==="y"&&n+r>this.startPos.maxY?this.startPos.maxY-r:n}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),n=this._getPositionCoord(e.left,"width"),r=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(n)?0:n,this.position.y=Number.isNaN(r)?0:r,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var n=e.transform;if(n.indexOf("matrix")===0){var r=n.split(","),a=n.indexOf("matrix3d")===0?12:4,l=parseInt(r[a],10),u=parseInt(r[a+1],10);this.position.x+=l,this.position.y+=u}}},{key:"_getPositionCoord",value:function(e,n){if(e.indexOf("%")!==-1){var r=ei(this._root.parentNode);return r?parseFloat(e)/100*r[n]:0}return parseInt(e,10)}}]),i}(Ei),wc=function(o){H(i,o);var s=B(i);function i(t){var e;R(this,i),e=s.call(this,t),T(y(e),"onCancelClick",function(a){e.exitMini(),e.isClose=!0}),T(y(e),"onCenterClick",function(a){var l=y(e),u=l.player;u.paused?u.play():u.pause()}),T(y(e),"onScroll",function(a){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var l=parseInt(h.getCss(e.player.root,"height"));l+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>l+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=l&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var n=y(e),r=n.config;return e.pos={left:r.left<0?window.innerWidth-r.width-20:r.left,top:r.top<0?window.innerHeight-r.height-20:r.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return M(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(it,function(){e.setAttr("data-state","pause")}),this.on(ge,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,n=this.player,r=this.config;if(!r.disable){if(this.config.isShowIcon){var a={config:{onClick:function(){e.getMini()}}};n.controls.registerPlugin(Zn,a,Zn.pluginName)}var l=h.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",l,this.onCancelClick),this.bind(".play-icon",l,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Ec(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:xn,class:"xg-icon-play"},pause:{icon:An,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var n=this.player,r=this.playerConfig,a=this.config.target||this.player.root;this.lastStyle={},h.addClass(n.root,"xgplayer-mini"),["width","height","top","left"].map(function(l){e.lastStyle[l]=a.style[l],a.style[l]="".concat(e.pos[l],"px")}),r.fluid&&(a.style["padding-top"]=""),this.emit(_t,!0),n.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var n=this.player,r=this.playerConfig,a=this.config.target||this.player.root;h.removeClass(n.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(l){a.style[l]=e.lastStyle[l]}),this.lastStyle=null,r.fluid&&(n.root.style.width="100%",n.root.style.height="0",n.root.style["padding-top"]="".concat(r.height*100/r.width,"%")),this.emit(_t,!1),this.isMini=n.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=h.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(Be(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(Q),ft={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},Yt=["videoClick","videoDbClick"],Xt=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onMouseMove",function(a){var l=y(t),u=l.player,c=l.playerConfig;u.isActive||(u.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&u.media.focus())}),T(y(t),"onMouseEnter",function(a){var l=y(t),u=l.playerConfig,c=l.player;!u.closeFocusVideoFocus&&c.media.focus(),u.closeDelayBlur?c.focus({autoHide:!1}):c.focus(),t.emit(Oi)}),T(y(t),"onMouseLeave",function(a){var l=t.playerConfig,u=l.closePlayerBlur,c=l.leavePlayerTime,f=l.closeDelayBlur;!u&&!f&&(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur({ignorePaused:!0})),t.emit(Di)}),T(y(t),"onVideoClick",function(a){var l=y(t),u=l.player,c=l.playerConfig;a.target&&c.closeVideoClick||(a.target===u.root||a.target===u.media||a.target===u.innerContainer||a.target===u.media.__canvas)&&(a.preventDefault(),c.closeVideoStopPropagation||a.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,Ce(y(t),Yt[0],function(f,d){t.switchPlayPause(d.e)},{e:a,paused:u.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),T(y(t),"onVideoDblClick",function(a){var l=y(t),u=l.player,c=l.playerConfig;if(!(c.closeVideoDblclick||!a.target||a.target!==u.media&&a.target!==u.media.__canvas)){if(!c.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),a.preventDefault(),a.stopPropagation(),Ce(y(t),Yt[1],function(f,d){t.emitUserAction(d.e,"switch_fullscreen",{props:"fullscreen",from:u.fullscreen,to:!u.fullscreen}),u.fullscreen?u.exitFullscreen():u.getFullscreen()},{e:a,fullscreen:u.fullscreen})}}),t}return M(i,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,Yt.map(function(r){e.__hooks[r]=null});var n=this.playerConfig.isMobileSimulateMode;n==="mobile"||j.device==="mobile"&&!j.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,n=this.player,r=n.media,a=n.root,l=this.playerConfig.enableContextmenu;a&&a.addEventListener("click",this.onVideoClick,!1),a&&a.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(ft).map(function(u){a.addEventListener(u,e[ft[u]],!1)}),!l&&r&&r.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var n=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:n.paused,to:!n.paused}),n.ended?n.duration!==1/0&&n.duration>0&&n.replay():n.paused?n.play():n.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,n=this.player,r=n.video,a=n.root;this.clickTimer&&clearTimeout(this.clickTimer),a.removeEventListener("click",this.onVideoClick,!1),a.removeEventListener("dblclick",this.onVideoDblClick,!1),r.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(ft).map(function(l){a.removeEventListener(l,e[ft[l]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),i}(He),Me={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},Pc={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Ic={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function ni(o){return o&&o.length>0?o[o.length-1]:null}function Lc(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var xc=function(){function o(s){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};R(this,o),T(this,"onTouchStart",function(e){var n=i._pos,r=i.root,a=ni(e.touches);n.x=a?parseInt(a.pageX,10):e.pageX,n.y=a?parseInt(a.pageX,10):e.pageX,n.start=!0,i.__setPress(e),r.addEventListener(i.events.end,i.onTouchEnd),r.addEventListener(i.events.cancel,i.onTouchCancel),r.addEventListener(i.events.move,i.onTouchMove),i.trigger(Me.TOUCH_START,e)}),T(this,"onTouchCancel",function(e){i.onTouchEnd(e)}),T(this,"onTouchEnd",function(e){var n=i._pos,r=i.root;i.__clearPress(),r.removeEventListener(i.events.cancel,i.onTouchCancel),r.removeEventListener(i.events.end,i.onTouchEnd),r.removeEventListener(i.events.move,i.onTouchMove),e.moving=n.moving,e.press=n.press,n.press&&i.trigger(Me.PRESS_END,e),i.trigger(Me.TOUCH_END,e),!n.press&&!n.moving&&i.__setDb(e),n.press=!1,n.start=!1,n.moving=!1}),T(this,"onTouchMove",function(e){var n=i._pos,r=i.config,a=ni(e.touches),l=a?parseInt(a.pageX,10):e.pageX,u=a?parseInt(a.pageY,10):e.pageX,c=l-n.x,f=u-n.y;Math.abs(f)<r.miniStep&&Math.abs(c)<r.miniStep||(i.__clearPress(),n.press&&i.trigger(Me.PRESS_END,e),n.press=!1,n.moving=!0,i.trigger(Me.TOUCH_MOVE,e))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config=Lc(),Object.keys(t).map(function(e){i.config[e]=t[e]}),this.root=s,this.events=t.eventType==="mouse"?Ic:Pc,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return M(o,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(i){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(Me.PRESS,i),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(i){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(Me.DOUBlE_CLICK,i);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(Me.CLICK,i)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(i,t){this.__handlers[i]||(this.__handlers[i]=[]),this.__handlers[i].push(t)}},{key:"off",value:function(i,t){if(this.__handlers[i]){for(var e=this.__handlers[i],n=-1,r=0;r<e.length;r++)if(e[r]===t){n=r;break}n>=0&&this.__handlers[i].splice(n,1)}}},{key:"trigger",value:function(i,t){this.__handlers[i]&&this.__handlers[i].map(function(e){try{e(t)}catch(n){console.error("trigger>>:".concat(i),n)}})}},{key:"destroy",value:function(){var i=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).forEach(function(e){i.root.removeEventListener(e,i[t[e]])})}}]),o}();function Ac(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var qe={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},qt=["videoClick","videoDbClick"],Dc=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),T(y(e),"onTouchStart",function(n){var r=y(e),a=r.player,l=r.config,u=r.pos,c=r.playerConfig,f=e.getTouche(n);if(f&&!l.disableGesture&&e.duration>0&&!a.ended){u.isStart=!0,e.timer&&clearTimeout(e.timer),h.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=h.format(e.duration);var d=e.root.getBoundingClientRect();a.rotateDeg===90?(u.top=d.left,u.left=d.top,u.width=d.height,u.height=d.width):(u.top=d.top,u.left=d.left,u.width=d.width,u.height=d.height);var g=parseInt(f.pageX-u.left,10),p=parseInt(f.pageY-u.top,10);u.x=a.rotateDeg===90?p:g,u.y=a.rotateDeg===90?g:p,u.scopeL=l.scopeL*u.width,u.scopeR=(1-l.scopeR)*u.width,u.scopeM1=u.width*(1-l.scopeM)/2,u.scopeM2=u.width-u.scopeM1}}),T(y(e),"onTouchMove",function(n){var r=e.getTouche(n),a=y(e),l=a.pos,u=a.config,c=a.player;if(!(!r||u.disableGesture||!e.duration||!l.isStart)){var f=u.miniMoveStep,d=u.hideControlsActive,g=parseInt(r.pageX-l.left,10),p=parseInt(r.pageY-l.top,10),m=c.rotateDeg===90?p:g,k=c.rotateDeg===90?g:p;if(Math.abs(m-l.x)>f||Math.abs(k-l.y)>f){var I=m-l.x,P=k-l.y,L=l.scope;if(L===-1&&(L=e.checkScope(m,k,I,P,l),L===0&&(d?c.blur():c.focus({autoHide:!1}),!l.time&&(l.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),l.scope=L),L===-1||L>0&&!u.gestureY||L===0&&!u.gestureX)return;e.executeMove(I,P,L,l.width,l.height),l.x=m,l.y=k}}}),T(y(e),"onTouchEnd",function(n){var r=y(e),a=r.player,l=r.pos,u=r.playerConfig;if(setTimeout(function(){a.getPlugin("progress")&&a.getPlugin("progress").resetSeekState()},10),!!l.isStart){l.scope>-1&&n.cancelable&&n.preventDefault();var c=e.config,f=c.disableGesture,d=c.gestureX;!f&&d?e.endLastMove(l.scope):l.time=0,l.scope=-1,e.resetPos(),h.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),e.changeAction(qe.AUTO)}}),T(y(e),"onRootTouchMove",function(n){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(n)&&(n.stopPropagation(),e.pos.isStart?e.onTouchMove(n):e.onTouchStart(n))}),T(y(e),"onRootTouchEnd",function(n){e.pos.scope>-1&&e.onTouchEnd(n)}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return M(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:Ac,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;qt.map(function(d){e.__hooks[d]=null});var n=this.playerConfig,r=this.config,a=this.player;n.closeVideoDblclick===!0&&(r.closedbClick=!0),this.resetPos(),h.isUndefined(n.disableGesture)||(r.disableGesture=!!n.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=h.createDom("xg-mask","",{},"xgmask"),a.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var l=this.domEventType==="mouse"?"mouse":"touch";this.touch=new xc(this.root,{eventType:l,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(d){d.preventDefault()}),a.root.addEventListener("touchmove",this.onRootTouchMove,!0),a.root.addEventListener("touchend",this.onRootTouchEnd,!0),a.root.addEventListener("touchcancel",this.onRootTouchEnd,!0);var u=this.player.controls;u&&u.center&&(u.center.addEventListener("touchmove",this.onRootTouchMove,!0),u.center.addEventListener("touchend",this.onRootTouchEnd,!0),u.center.addEventListener("touchcancel",this.onRootTouchEnd,!0)),this.on(De,function(){var d=e.player,g=e.config;d.duration>0&&d.duration*1e3<g.moveDuration&&(g.moveDuration=d.duration*1e3)}),this.on([Ee,ze],function(){var d=e.pos,g=d.time,p=d.isStart;!p&&g>0&&(e.pos.time=0)});var c={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(c).map(function(d){e.touch.on(d,function(g){e[c[d]](g)})}),!r.disableActive){var f=a.plugins.progress;f&&(f.addCallBack("dragmove",function(d){e.activeSeekNote(d.currentTime,d.forward)}),["dragend","click"].forEach(function(d){f.addCallBack(d,function(){e.changeAction(qe.AUTO)})}))}}},{key:"registerThumbnail",value:function(){var e=this.player,n=e.plugins.thumbnail;if(n&&n.usable){this.thumbnail=n.createThumbnail(null,"mobile-thumbnail");var r=this.find(".time-preview");r.insertBefore(this.thumbnail,r.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},n=e.commonStyle,r=n.playedColor,a=n.progressColor,l=n.timePreviewStyle,u=n.curTimeColor,c=n.durationColor;if(r&&(this.find(".xg-curbar").style.backgroundColor=r),a&&(this.find(".xg-bar").style.backgroundColor=a),l){var f=this.find(".time-preview");Object.keys(l).forEach(function(p){f.style[p]=l[p]})}var d=u||r,g=c;d&&(this.find(".xg-cur").style.color=d),g&&(this.find(".xg-dur").style.color=g),this.config.disableTimeProgress&&h.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(n){e.pos[n]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var n=this.player,r=this.root;r.setAttribute("data-xg-action",e);var a=n.plugins.start;a&&a.recover()}},{key:"getTouche",value:function(e){var n=this.player.rotateDeg,r=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return n===0?{pageX:r.pageX,pageY:r.pageY}:{pageX:r.pageX,pageY:r.pageY}}},{key:"checkScope",value:function(e,n,r,a,l){var u=l.width,c=-1;if(e<0||e>u)return c;var f=Math.abs(a===0?r:r/a);return Math.abs(r)>0&&f>=1.73&&e>l.scopeM1&&e<l.scopeM2?c=0:(Math.abs(r)===0||f<=.57)&&(c=e<l.scopeL?1:e>l.scopeR?2:3),c}},{key:"executeMove",value:function(e,n,r,a,l){switch(r){case 0:this.updateTime(e/a*this.config.scopeM);break;case 1:this.updateBrightness(n/l);break;case 2:j.os.isIos||this.updateVolume(n/l);break}}},{key:"endLastMove",value:function(e){var n=this,r=this.pos,a=this.player,l=this.config,u=(r.time-this.timeOffset)/1e3;switch(e){case 0:a.seek(Number(u).toFixed(1)),l.hideControlsEnd?a.blur():a.focus(),this.timer=setTimeout(function(){n.pos.time=0},500);break}this.changeAction(qe.AUTO)}},{key:"checkIsRootTarget",value:function(e){var n=this.player.plugins||{};return n.progress&&n.progress.root.contains(e.target)?!1:n.start&&n.start.root.contains(e.target)||n.controls&&n.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var n=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:n,to:!n})}},{key:"clickHandler",value:function(e){var n=this.player,r=this.config,a=this.playerConfig;if(n.state<K.RUNNING){a.closeVideoClick||(this.sendUseAction(h.createEvent("click")),n.play());return}!r.closedbClick||a.closeVideoClick?n.isActive?n.blur():n.focus():a.closeVideoClick||((n.isActive||r.focusVideoClick)&&(this.sendUseAction(h.createEvent("click")),this.switchPlayPause()),n.focus())}},{key:"dbClickHandler",value:function(e){var n=this.config,r=this.player;!n.closedbClick&&r.state>=K.RUNNING&&(this.sendUseAction(h.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var n=this,r=this.player;Ce(this,qt[0],function(a,l){n.clickHandler(l.e)},{e,paused:r.paused})}},{key:"onDbClick",value:function(e){var n=this,r=this.player;Ce(this,qt[1],function(a,l){n.dbClickHandler(l.e)},{e,paused:r.paused})}},{key:"onPress",value:function(e){var n=this.pos,r=this.config,a=this.player;r.disablePress||(n.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:a.playbackRate,to:r.pressRate}),a.playbackRate=r.pressRate,this.changeAction(qe.PLAYBACK))}},{key:"onPressEnd",value:function(e){var n=this.pos,r=this.config,a=this.player;r.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:a.playbackRate,to:n.rate}),a.playbackRate=n.rate,n.rate=1,this.changeAction(qe.AUTO))}},{key:"updateTime",value:function(e){var n=this.player,r=this.config,a=this.player.duration;e=Number(e.toFixed(4));var l=parseInt(e*r.moveDuration,10)+this.timeOffset;l+=this.pos.time,l=l<0?0:l>a*1e3?a*1e3-200:l,n.getPlugin("time")&&n.getPlugin("time").updateTime(l/1e3),n.getPlugin("progress")&&n.getPlugin("progress").updatePercent(l/1e3/this.duration,!0),this.activeSeekNote(l/1e3,e>0),r.isTouchingSeek&&n.seek(Number((l-this.timeOffset)/1e3).toFixed(1)),this.pos.time=l}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var n=this.player,r=this.pos;if(e=parseInt(e*100,10),r.volume+=e,!(Math.abs(r.volume)<10)){var a=parseInt(n.volume*10,10)-parseInt(r.volume/10,10);a=a>10?10:a<1?0:a,n.volume=a/10,r.volume=0}}},{key:"updateBrightness",value:function(e){var n=this.pos,r=this.config,a=this.xgMask;if(r.darkness){this.player.rotateDeg&&(e=-e);var l=n.light+.8*e;l=l>r.maxDarkness?r.maxDarkness:l<0?0:l,a&&(a.style.backgroundColor="rgba(0,0,0,".concat(l,")")),n.light=l}}},{key:"activeSeekNote",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.player,a=this.config,l=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||l||a.disableActive)){e<0?e=0:e>r.duration&&(e=r.duration-.2),this.changeAction(qe.SEEKING);var u=r.plugins.start;u&&u.focusHide(),this.find(".xg-dur").innerHTML=h.format(this.duration),this.find(".xg-cur").innerHTML=h.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),n?h.removeClass(this.find(".xg-seek-show"),"xg-back"):h.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var n=this.player,r=n.plugins.thumbnail;r&&r.usable&&this.thumbnail&&r.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<K.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!0}},{key:"enableGesture",value:function(){this.config.disableGesture=!1}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0),e.root.removeEventListener("touchcancel",this.onRootTouchEnd,!0);var n=this.player.controls;n&&n.center&&(n.center.removeEventListener("touchmove",this.onRootTouchMove,!0),n.center.removeEventListener("touchend",this.onRootTouchEnd,!0),n.center.removeEventListener("touchcancel",this.onRootTouchEnd,!0))}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span class="xg-separator">/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(Q);function Oc(o){o.preventDefault(),o.returnValue=!1}function ii(o){var s=o.tagName;return!!(s==="INPUT"||s==="TEXTAREA"||o.isContentEditable)}var ri=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onBodyKeyDown",function(a){if(t.player){var l=a||window.event,u=l.keyCode,c=y(t),f=c._keyState,d=c.player,g=t.config,p=g.disable,m=g.disableBodyTrigger,k=g.isIgnoreUserActive;if(p||m||!(d.isUserActive||k)||ii(l.target)||!t.checkIsVisible()||l.metaKey||l.altKey||l.ctrlKey){f.isBodyKeyDown=!1;return}!a.repeat&&!f.isKeyDown&&((l.target===document.body||t.config.isGlobalTrigger&&!ii(l.target))&&t.checkCode(u,!0)&&(f.isBodyKeyDown=!0),document.addEventListener("keyup",t.onBodyKeyUp)),f.isBodyKeyDown&&t.handleKeyDown(l)}}),T(y(t),"onBodyKeyUp",function(a){t.player&&(document.removeEventListener("keyup",t.onBodyKeyUp),t.handleKeyUp(a))}),T(y(t),"onKeydown",function(a){if(t.player){var l=a||window.event,u=y(t),c=u._keyState;if(!l.repeat){if(t.config.disable||t.config.disableRootTrigger||l.metaKey||l.altKey||l.ctrlKey)return;l&&(l.keyCode===37||t.checkCode(l.keyCode))&&(l.target===t.player.root||l.target===t.player.video||l.target===t.player.controls.el)&&(c.isKeyDown=!0),t.player.root.addEventListener("keyup",t.onKeyup)}c.isKeyDown&&t.handleKeyDown(l)}}),T(y(t),"onKeyup",function(a){t.player&&(t.player.root.removeEventListener("keyup",t.onKeyup),t.handleKeyUp(a))}),t}return M(i,[{key:"mergekeyCodeMap",value:function(){var e=this,n=this.config.keyCodeMap;n&&Object.keys(n).map(function(r){e.keyCodeMap[r]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(a){n[r][a]&&(e.keyCodeMap[r][a]=n[r][a])}):e.keyCodeMap[r]=n[r]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"setConfig",value:function(e){var n=this;Object.keys(e).forEach(function(r){n.config[r]=e[r]})}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),n=e.height,r=e.top,a=e.bottom,l=window.innerHeight;return!(r<0&&r<0-n*.9||a>0&&a-l>n*.9)}},{key:"checkCode",value:function(e,n){var r=this,a=!1;return Object.keys(this.keyCodeMap).map(function(l){r.keyCodeMap[l]&&e===r.keyCodeMap[l].keyCode&&!r.keyCodeMap[l].disable&&(a=!n||n&&!r.keyCodeMap[l].noBodyTarget)}),a}},{key:"downVolume",value:function(e){var n=this.player;if(!(n.volume<=0)){var r=parseFloat((n.volume-.1).toFixed(1)),a={volume:{from:n.volume,to:r}};this.emitUserAction(e,"change_volume",{props:a}),r>=0?n.volume=r:n.volume=0}}},{key:"upVolume",value:function(e){var n=this.player;if(!(n.volume>=1)){var r=parseFloat((n.volume+.1).toFixed(1)),a={volume:{from:n.volume,to:r}};this.emitUserAction(e,"change_volume",{props:a}),r<=1?n.volume=r:n.volume=1}}},{key:"seek",value:function(e){var n=this.player,r=n.currentTime,a=n.offsetCurrentTime,l=n.duration,u=n.offsetDuration,c=n.timeSegments,f=a>-1?a:r,d=u||l,g=e.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;f+g<=d?f=f+g:f=d;var p=h.getCurrentTimeByOffset(f,c),m={currentTime:{from:r,to:p}};this.emitUserAction(e,"seek",{props:m}),this.player.currentTime=p}},{key:"seekBack",value:function(e){var n=this.player,r=n.currentTime,a=n.offsetCurrentTime,l=n.timeSegments,u=e.repeat?parseInt(this.seekStep/2,10):this.seekStep,c=a>-1?a:r,f=c-u;f<0&&(f=0),f=h.getCurrentTimeByOffset(f,l);var d={currentTime:{from:r,to:f}};this.emitUserAction(e,"seek",{props:d}),this.player.currentTime=f}},{key:"changePlaybackRate",value:function(e){var n=this._keyState,r=this.config,a=this.player;n.playbackRate===0&&(n.playbackRate=a.playbackRate,a.playbackRate=r.playbackRate)}},{key:"playPause",value:function(e){var n=this.player;n&&(this.emitUserAction(e,"switch_play_pause"),n.paused?n.play():n.pause())}},{key:"exitFullscreen",value:function(e){var n=this.player,r=n.fullscreen,a=n.cssfullscreen;r&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:r,to:!r}),n.exitFullscreen()),a&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:a,to:!a}),n.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var n=this._keyState;if(e.repeat){n.isPress=!0;var r=Date.now();if(r-n.tt<200)return;n.tt=r}this.handleKeyCode(e.keyCode,e,n.isPress)}},{key:"handleKeyUp",value:function(e){var n=this._keyState;n.playbackRate>0&&(this.player.playbackRate=n.playbackRate,n.playbackRate=0),n.isKeyDown=!1,n.isPress=!1,n.tt=0}},{key:"handleKeyCode",value:function(e,n,r){for(var a=Object.keys(this.keyCodeMap),l=0;l<a.length;l++){var u=this.keyCodeMap[a[l]],c=u.action,f=u.keyCode,d=u.disable,g=u.pressAction,p=u.disablePress;if(f===e){if(!d&&!(r&&p)){var m=r&&g||c;typeof m=="function"?c(n,this.player,r):typeof m=="string"&&typeof this[m]=="function"&&this[m](n,this.player,r),this.emit(Fi,ie({key:a[l],target:n.target,isPress:r},this.keyCodeMap[a[l]]))}Oc(n),n.stopPropagation();break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!0,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!0}}}]),i}(He);function Rc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var Mc=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"registerIcons",value:function(){return{loadingIcon:Rc}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:te.ROOT}}}]),i}(Q),Nc=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],Fc=function(){function o(s){R(this,o),this.fragments=s.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=s.actionCallback,this.fragConfig={fragFocusClass:s.fragFocusClass||"inner-focus-point",fragAutoFocus:!!s.fragAutoFocus,fragClass:s.fragClass||""},this.style=s.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return M(o,[{key:"updateDuration",value:function(i){var t=this;this.duration=i;var e=0,n=this.fragments;this.fragments=n.map(function(r){return r.start=parseInt(e,10),r.end=parseInt(e+r.percent*t.duration,10),r.duration=parseInt(r.percent*t.duration,10),e+=r.percent*t.duration,r})}},{key:"updateProgress",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,n=this.fragments;if(!(e.length<1)){var r=t.newIndex,a=t.curIndex,l=t.millisecond;r!==a&&e.map(function(f,d){d<r?f[i].style.width="100%":d>r&&(f[i].style.width=0)});var u=n[r],c=l===0?0:(l-u.start)/u.duration;e[r][i].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(i){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!i){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(i.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var n={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(n)}}}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,n=this.cachedIndex;if(h.typeOf(i.played)!=="Undefined"){var r=this.findIndex(i.played*1e3,e);if(r<0)return;this.updateProgress("played",{newIndex:r,curIndex:e,millisecond:parseInt(i.played*1e3,10)}),this.playedIndex=r}if(h.typeOf(i.cached)!=="Undefined"){var a=this.findIndex(i.cached*1e3,n);if(a<0)return;this.updateProgress("cached",{newIndex:a,curIndex:n,millisecond:parseInt(i.cached*1e3,10)}),this.cachedIndex=a}}},{key:"findIndex",value:function(i,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&i>e[t].start&&i<e[t].end)return t;if(i>e[e.length-1].start)return e.length-1;for(var n=0;n<e.length;n++)if(i>e[n].start&&i<=e[n].end){t=n;break}return t}},{key:"findHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)if(h.hasClass(i[t],this.fragConfig.fragFocusClass))return{dom:i[t],pos:i[t].getBoundingClientRect()}}},{key:"findFragment",value:function(i){var t=this.root.children;return i<0||i>=t.length?null:{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var i=this.root.children,t=0;t<i.length;t++)h.removeClass(i[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(i){var t=this.root.children;if(i<t.length)return h.addClass(t[i],this.fragConfig.fragFocusClass),{dom:t[i],pos:t[i].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(i){var t=this;if(Object.keys(this.fragConfig).forEach(function(n){i[n]!==void 0&&(t.fragConfig[n]=i[n])}),i.fragments){if(this.fragments=i.fragments.length===0?[{percent:1}]:i.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var i=this,t=this.style.progressColor;if(this.root||(this.root=h.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,n=e.fragClass,r=e.fragFocusClass;this.progressList=this.fragments.map(function(a){var l=h.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(a.percent):"flex: ".concat(a.percent)},"".concat(a.isFocus?r:""," xgplayer-progress-inner ").concat(n));return i.root.appendChild(l),Nc.forEach(function(u){l.appendChild(h.createDom(u.tag,"",{style:u.styleKey?"background: ".concat(i.style[u.styleKey],"; width:0;"):"width:0;"},u.className))}),{cached:l.children[0],played:l.children[1]}})}return this.root}}]),o}(),si={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},Hc=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),T(y(e),"onMoveOnly",function(n,r){var a=y(e),l=a.pos,u=a.config,c=a.player,f=r;if(n){h.event(n);var d=h.getEventPos(n,c.zoom),g=c.rotateDeg===90?d.clientY:d.clientX;if(l.moving&&Math.abs(l.x-g)<u.miniMoveStep)return;l.moving=!0,l.x=g,f=e.computeTime(n,g)}e.triggerCallbacks("dragmove",f,n),e._updateInnerFocus(f)}),T(y(e),"onBodyClick",function(n){e.pos.isLocked&&(e.pos.isLocked=!1,n.preventDefault(),n.stopPropagation())}),T(y(e),"_mouseDownHandler",function(n,r){e._state.time=r.currentTime,e.updateWidth(r.currentTime,r.seekTime,r.percent,0),e._updateInnerFocus(r)}),T(y(e),"_mouseUpHandler",function(n,r){var a=y(e),l=a.pos;l.moving&&e.updateWidth(r.currentTime,r.seekTime,r.percent,2)}),T(y(e),"_mouseMoveHandler",function(n,r){var a=y(e),l=a._state,u=a.pos,c=a.config,f=a.player;l.time<r.currentTime?r.forward=!0:r.forward=!1,l.time=r.currentTime,u.isDown&&!u.moving&&(u.moving=!0,c.isPauseMoving&&f.pause(),e.triggerCallbacks("dragstart",r,n),e.emitUserAction("drag","dragstart",r)),e.updateWidth(r.currentTime,r.seekTime,r.percent,1),e.triggerCallbacks("dragmove",r,n),e._updateInnerFocus(r)}),T(y(e),"onMouseDown",function(n){var r=y(e),a=r._state,l=r.player,u=r.pos,c=r.config,f=r.playerConfig,d=h.getEventPos(n,l.zoom),g=l.rotateDeg===90?d.clientY:d.clientX;if(!(l.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&l.ended)){if(!l.duration&&!l.isPlaying){l.play();return}n.stopPropagation(),e.focus(),h.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),h.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),h.event(n),u.x=g,u.isDown=!0,u.moving=!1,a.prePlayTime=l.currentTime,l.focus({autoHide:!1}),e.isProgressMoving=!0,h.addClass(e.progressBtn,"active");var p=e.computeTime(n,g);p.prePlayTime=a.prePlayTime,e._mouseDownHandlerHook(n,p);var m=n.type;return m==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp),e.root.addEventListener("touchcancel",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),T(y(e),"onMouseUp",function(n){var r=y(e),a=r.player,l=r.config,u=r.pos,c=r.playerConfig,f=r._state;n.stopPropagation(),n.preventDefault(),h.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),h.checkIsFunction(l.onMoveEnd)&&l.onMoveEnd(),h.event(n),h.removeClass(e.progressBtn,"active");var d=e.computeTime(n,u.x);d.prePlayTime=f.prePlayTime,u.moving?(e.triggerCallbacks("dragend",d,n),e.emitUserAction("drag","dragend",d)):(e.triggerCallbacks("click",d,n),e.emitUserAction("click","click",d)),e._mouseUpHandlerHook(n,d),u.moving=!1,u.isDown=!1,u.x=0,u.y=0,u.isLocked=!0,f.prePlayTime=0,f.time=0;var g=n.type;g==="touchend"||g==="touchcancel"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.root.removeEventListener("touchcancel",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),u.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(n)),h.setTimeout(y(e),function(){e.resetSeekState()},1),a.focus()}),T(y(e),"onMouseMove",function(n){var r=y(e),a=r._state,l=r.pos,u=r.player,c=r.config;h.checkTouchSupport()&&n.preventDefault(),h.event(n);var f=h.getEventPos(n,u.zoom),d=u.rotateDeg===90?f.clientY:f.clientX,g=Math.abs(l.x-d);if(!(l.moving&&g<c.miniMoveStep||!l.moving&&g<c.miniStartStep)){l.x=d;var p=e.computeTime(n,d);p.prePlayTime=a.prePlayTime,e._mouseMoveHandlerHook(n,p)}}),T(y(e),"onMouseOut",function(n){e.triggerCallbacks("mouseout",null,n)}),T(y(e),"onMouseOver",function(n){e.triggerCallbacks("mouseover",null,n)}),T(y(e),"onMouseEnter",function(n){var r=y(e),a=r.player,l=r.pos;if(!(l.isDown||l.isEnter||a.isMini||!a.config.allowSeekAfterEnded&&a.ended)){l.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),h.event(n);var u=h.getEventPos(n,a.zoom),c=a.rotateDeg===90?u.clientY:u.clientX,f=e.computeTime(n,c);e.triggerCallbacks("mouseenter",f,n),e.focus()}}),T(y(e),"onMouseLeave",function(n){e.triggerCallbacks("mouseleave",null,n),e.unlock(),e._updateInnerFocus(null)}),T(y(e),"onVideoResize",function(){var n=e.pos,r=n.x,a=n.isDown,l=n.isEnter;if(l&&!a){var u=e.computeTime(null,r);e.onMoveOnly(null,u)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,typeof e.config.isDragingSeek=="boolean"&&(console.warn("[XGPLAYER] 'isDragingSeek' is deprecated, please use 'isDraggingSeek' instead"),e.config.isDraggingSeek=e.config.isDragingSeek),e}return M(i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,n=e.offsetCurrentTime,r=e.currentTime;return n>=0?n:r+this.timeOffset}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(e){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!n||n.length===0)&&(n=[{percent:1}]);var a=ie(ie({fragments:n},r),{},{actionCallback:function(u){e.emitUserAction("fragment_focus","fragment_focus",u)}});this.innerList?this.innerList.reset(a):(this.innerList=new Fc(a),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(l){e[l]=e.innerList[l].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var e=this.config,n=e.fragFocusClass,r=e.fragAutoFocus,a=e.fragClass;this._initInner(this.config.fragments,{fragFocusClass:n,fragAutoFocus:r,fragClass:a,style:this.playerConfig.commonStyle||{}}),j.device==="mobile"&&(this.config.isDraggingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.listenEvents(),this.bindDomEvents(),this.initCustomStyle()}}},{key:"listenEvents",value:function(){var e=this;this.on(De,function(){e.onMouseLeave()}),this.on(de,function(){e.onTimeupdate()}),this.on(we,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(Li,function(){e.onCacheUpdate()}),this.on(ze,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(Ke,function(){e.onReset()}),this.on(Fe,function(){e.onVideoResize()})}},{key:"setConfig",value:function(e){var n=this,r=null;Object.keys(e).forEach(function(a){n.config[a]=e[a],a==="fragments"&&(r=e[a])}),r&&this._initInner(r,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},n=e.commonStyle,r=n.sliderBtnStyle,a=this.progressBtn;r&&(typeof r=="string"?a.style.boxShadow=r:le(r)==="object"&&Object.keys(r).map(function(l){a.style[l]=r[l]}))}},{key:"triggerCallbacks",value:function(e,n,r){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(a){if(a&&a.handler&&a.type===e)try{a.handler(n,r)}catch(l){console.error("[XGPLAYER][triggerCallbacks] ".concat(a," error"),l)}})}},{key:"addCallBack",value:function(e,n){n&&typeof n=="function"&&this.__dragCallBacks.push({type:e,handler:n})}},{key:"removeCallBack",value:function(e,n){var r=this.__dragCallBacks,a=-1;r.map(function(l,u){l&&l.type===e&&l.handler===n&&(a=u)}),a>-1&&r.splice(a,1)}},{key:"unlock",value:function(){var e=this.player,n=this.pos;if(n.isEnter=!1,n.isLocked=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),n.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&this.root.addEventListener("touchstart",this.onMouseDown),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),e.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),h.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),h.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,n,r,a){var l=this.config,u=this.player;if(!(l.isCloseClickSeek&&a===0)){var c=n=n>=u.duration?u.duration-l.endedDiff:Number(n).toFixed(1);this.updatePercent(r),this.updateTime(e),!(a===1&&(!l.isDraggingSeek||u.config.mediaType==="audio"))&&(this._state.now=c,this._state.direc=c>u.currentTime?0:1,u.seek(c))}}},{key:"computeTime",value:function(e,n){var r=this.player,a=this.root.getBoundingClientRect(),l=a.width,u=a.height,c=a.top,f=a.left,d,g,p=n;r.rotateDeg===90?(d=u,g=c):(d=l,g=f);var m=p-g;m=m>d?d:m<0?0:m;var k=m/d;k=k<0?0:k>1?1:k;var I=parseInt(k*this.offsetDuration*1e3,10)/1e3,P=h.getCurrentTimeByOffset(I,r.timeSegments);return{percent:k,currentTime:I,seekTime:P,offset:m,width:d,left:g,e}}},{key:"updateTime",value:function(e){var n=this.player,r=this.duration;e>r?e=r:e<0&&(e=0);var a=n.plugins.time;a&&a.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,n){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration);var r=this.player.plugins.miniprogress;r&&r.update({played:e*this.offsetDuration},this.offsetDuration)}}},{key:"onTimeupdate",value:function(e){var n=this.player,r=this._state,a=this.offsetDuration;if(!(n.isSeeking&&n.media.seeking||this.isProgressMoving||!n.hasStart)){if(r.now>-1){var l=parseInt(r.now*1e3,10)-parseInt(n.currentTime*1e3,10);if(r.direc===0&&l>300||r.direc===1&&l>-300){r.now=-1;return}else r.now=-1}var u=this.currentTime;u=h.adjustTimeByDuration(u,a,e),this.innerList.update({played:u},a),this.progressBtn.style.left="".concat(u/a*100,"%")}}},{key:"onCacheUpdate",value:function(e){var n=this.player,r=this.duration;if(n){var a=n.bufferedPoint.end;a=h.adjustTimeByDuration(a,r,e),this.innerList.update({cached:a},r)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0),this.progressBtn.style.left="0%"}},{key:"destroy",value:function(){var e=this.player;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var n=this.domEventType;(n==="touch"||n==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),this.root.removeEventListener("touchcancel",this.onMouseUp)),(n==="mouse"||n==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",n=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(n,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_CENTER,index:0,disable:!1,isDraggingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:si.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return si}}]),i}(Q),Ye=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"_onMouseenter",function(a){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),T(y(t),"_onMouseLeave",function(a){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return M(i,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave),this.config.disable&&this.disable()}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),i}(Q),Bc=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"btnClick",function(a){a.preventDefault(),a.stopPropagation();var l=y(t),u=l.player;return t.emitUserAction(a,"switch_play_pause",{prop:"paused",from:u.paused,to:!u.paused}),u.ended?u.replay():u.paused?(u.play(),t.animate(!1)):(u.pause(),t.animate(!0)),!1}),t}return M(i,[{key:"afterCreate",value:function(){V($(i.prototype),"afterCreate",this).call(this);var e=this.config;e.disable||(this.initIcons(),this.bind(["touchend","click"],this.btnClick),this.listenEvents(),this.animate(!0))}},{key:"listenEvents",value:function(){var e=this,n=this.player;this.on([ge,it,lt,Ke],function(){e.animate(n.paused)})}},{key:"registerIcons",value:function(){return{play:{icon:xn,class:"xg-icon-play"},pause:{icon:An,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var n=this.i18nKeys,r=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),r&&this.changeLangTextKey(r,n.PLAY_TIPS)):(this.setAttr("data-state","play"),r&&this.changeLangTextKey(r,n.PAUSE_TIPS))}}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(Be(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_LEFT,index:0,disable:!1}}}]),i}(Ye);function $c(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var Vc=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(n){n.preventDefault(),n.stopPropagation(),e.config.onClick(n)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:$c,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:te.ROOT_TOP,index:0}}}]),i}(Q);function Uc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function jc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var Gc=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"_onOrientationChange",function(a){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return M(i,[{key:"afterCreate",value:function(){var e=this;V($(i.prototype),"afterCreate",this).call(this);var n=this.config,r=this.playerConfig;if(!n.disable){n.target&&(this.playerConfig.fullscreenTarget=this.config.target);var a=h.getFullScreenEl();r.fullscreenTarget===a&&this.player.getFullscreen().catch(function(l){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(u){var c=e.player.fullscreen;e.emitUserAction(u,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Se,function(l){var u=e.find(".xg-tips");u&&e.changeLangTextKey(u,l?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(l)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:Vc,options:{config:{onClick:function(u){e.handleFullscreen(u)}}}})),j.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:Uc,class:"xg-get-fullscreen"},exitFullscreen:{icon:jc,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",j.device==="mobile"?"touchend":"click",this.handleFullscreen),j.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var n=this.player,r=this.config,a=r.useCssFullscreen===!0||typeof r.useCssFullscreen=="function"&&r.useCssFullscreen();a?(n.fullscreen?n.exitCssFullscreen():n.getCssFullscreen(),this.animate(n.fullscreen)):r.rotateFullscreen?(n.fullscreen?n.exitRotateFullscreen():n.getRotateFullscreen(),this.animate(n.fullscreen)):r.switchCallback&&typeof r.switchCallback=="function"?r.switchCallback(n.fullscreen):n.fullscreen?(n.exitFullscreen(),r.useScreenOrientation&&this.unlockScreen()):(n.getFullscreen().catch(function(l){}),r.useScreenOrientation&&n.aspectRatio>1&&this.lockScreen(r.lockOrientationType))}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(Be(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}},{key:"lockScreen",value:function(e){try{screen.orientation.lock(e).catch(function(n){})}catch{}}},{key:"unlockScreen",value:function(){try{screen.orientation.unlock().catch(function(e){})}catch{}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,useScreenOrientation:!1,lockOrientationType:"landscape",switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}(Ye),Wc=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),e.isActiving=!1,e}return M(i,[{key:"duration",get:function(){var e=this.player,n=e.offsetDuration,r=e.duration;return this.playerConfig.customDuration||n||r}},{key:"currentTime",get:function(){var e=this.player,n=e.offsetCurrentTime,r=e.currentTime;return n>=0?n:r}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this.player.controls.config.mode;this.mode=e==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.listenEvents())}},{key:"listenEvents",value:function(){var e=this;this.on([De,we,de],function(n){n.eventName==="durationchange"&&(e.isActiving=!1),e.onTimeUpdate()}),this.on(ze,function(){e.onTimeUpdate(!0)}),this.on(Ke,function(){e.onReset()})}},{key:"show",value:function(e){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var n=this.player,r=this.config,a=this.duration;if(!(r.disable||this.isActiving||!n.hasStart)){var l=this.currentTime+this.timeOffset;l=h.adjustTimeByDuration(l,a,e),this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(h.format(l)),a!==1/0&&a>0&&(this.centerDurDom.innerHTML=h.format(a))):(this.timeDom.innerHTML=this.minWidthTime(h.format(l)),a!==1/0&&a>0&&(this.durationDom.innerHTML=h.format(a)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(h.format(0)),this.centerDurDom.innerHTML=h.format(0)):(this.timeDom.innerHTML=this.minWidthTime(h.format(0)),this.durationDom.innerHTML=h.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var n=e.controls.center;this.centerCurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),n.children.length>0?n.insertBefore(this.centerCurDom,n.children[0]):n.appendChild(this.centerCurDom),n.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):h.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):(h.hide(this.find(".time-live-tag")),h.show(this.find(".time-separator")),h.show(this.durationDom),h.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=this.minWidthTime(h.format(e));return}this.timeDom.innerHTML=this.minWidthTime(h.format(e))}}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(n){return'<span class="time-min-width">'.concat(n,"</span>")}).join(":")}},{key:"resetActive",value:function(){var e=this,n=this.player,r=function(){e.isActiving=!1};this.off(we,r),n.isSeeking&&n.media.seeking?this.once(we,r):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(Q),zc=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"_onDurationChange",function(){t.updateSegments();var a=t.player,l=a.currentTime,u=a.timeSegments;if(t._checkIfEnabled(u)){var c=h.getIndexByTime(l,u),f=h.getOffsetCurrentTime(l,u,c);t.player.offsetCurrentTime=f,t.changeIndex(c,u)}}),T(y(t),"_onLoadedData",function(){var a=t.player.timeSegments;if(t._checkIfEnabled(a)){var l=h.getOffsetCurrentTime(0,a);t.player.offsetCurrentTime=l,t.changeIndex(0,a),t.curPos.start>0&&(t.player.currentTime=t.curPos.start)}}),T(y(t),"_onTimeupdate",function(){var a=t.player,l=a.currentTime,u=a.timeSegments;if(t._checkIfEnabled(u)){var c=u.length;t.lastCurrentTime=l;var f=h.getIndexByTime(l,u);f!==t.curIndex&&t.changeIndex(f,u);var d=h.getOffsetCurrentTime(l,u,f);if(t.player.offsetCurrentTime=d,!!t.curPos){var g=t.curPos,p=g.start,m=g.end;l<p?t.player.currentTime=p:l>m&&f>=c-1&&t.player.pause()}}}),T(y(t),"_onSeeking",function(){var a=t.player,l=a.currentTime,u=a.timeSegments;if(t._checkIfEnabled(u))if(l<u[0].start)t.player.currentTime=u[0].start;else if(l>u[u.length-1].end)t.player.currentTime=u[u.length-1].end;else{var c=h.getIndexByTime(l,u);if(c>=0){var f=t.getSeekTime(l,t.lastCurrentTime,c,u);f>=0&&(t.player.currentTime=f)}}}),T(y(t),"_onPlay",function(){var a=t.player,l=a.currentTime,u=a.timeSegments;t._checkIfEnabled(u)&&l>=u[u.length-1].end&&(t.player.currentTime=u[0].start)}),t}return M(i,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(De,this._onDurationChange),this.on(Le,this._onLoadedData),this.on(de,this._onTimeupdate),this.on(Ot,this._onSeeking),this.on(ge,this._onPlay)}},{key:"setConfig",value:function(e){var n=this;if(e){var r=Object.keys(e);r.length<1||(r.forEach(function(a){n.config[a]=e[a]}),this.updateSegments())}}},{key:"updateSegments",value:function(){var e=this.config,n=e.disable,r=e.segments,a=this.player;if(n||!r||r.length===0)a.timeSegments=[],a.offsetDuration=0,a.offsetCurrentTime=-1;else{var l=this.formatTimeSegments(r,a.duration);a.timeSegments=l,a.offsetDuration=l.length>0?l[l.length-1].duration:0}}},{key:"formatTimeSegments",value:function(e,n){var r=[];return e?(e.sort(function(a,l){return a.start-l.start}),e.forEach(function(a,l){var u={};if(u.start=a.start<0?0:a.start,u.end=n>0&&a.end>n?n:a.end,!(n>0&&u.start>n)){r.push(u);var c=u.end-u.start;if(l===0)u.offset=a.start,u.cTime=0,u.segDuration=c,u.duration=c;else{var f=r[l-1];u.offset=f.offset+(u.start-f.end),u.cTime=f.duration+f.cTime,u.segDuration=c,u.duration=f.duration+c}}}),r):[]}},{key:"getSeekTime",value:function(e,n,r,a){var l=-1,u=a[r],c=u.start,f=u.end;if(e>=c&&e<=f)return l;var d=e-n;if(d<0&&e<c){var g=n>c?n-c:0;return l=r-1>=0?a[r-1].end+d+g:0,l}return-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,n){this.curIndex=e,e>=0&&n.length>0?this.curPos=n[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),i}(He);function Kc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function Yc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function Xc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var qc=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onBarMousedown",function(a){var l=y(t),u=l.player,c=t.find(".xgplayer-bar");h.event(a);var f=c.getBoundingClientRect(),d=h.getEventPos(a,u.zoom),g=f.height-(d.clientY-f.top);if(d.h=g,d.barH=f.height,t.pos=d,!(g<-2))return t.updateVolumePos(g,a),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),T(y(t),"onBarMouseMove",function(a){var l=y(t),u=l._d;if(u.isStart){var c=y(t),f=c.pos,d=c.player;a.preventDefault(),a.stopPropagation(),h.event(a);var g=h.getEventPos(a,d.zoom);u.isMoving=!0;var p=f.h-g.clientY+f.clientY;p>f.barH||t.updateVolumePos(p,a)}}),T(y(t),"onBarMouseUp",function(a){h.event(a),document.removeEventListener("mouseup",t.onBarMouseUp);var l=y(t),u=l._d;u.isStart=!1,u.isMoving=!1}),T(y(t),"onMouseenter",function(a){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),T(y(t),"onMouseleave",function(a){t._d.isActive=!1,t.unFocus(100,!1,a),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),T(y(t),"onVolumeChange",function(a){if(t.player){var l=t.player,u=l.muted,c=l.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=u||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(u,c)}}),t}return M(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:Yc,class:"xg-volume-small"},volumeLarge:{icon:Kc,class:"xg-volume"},volumeMuted:{icon:Xc,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var n=this.playerConfig,r=n.commonStyle,a=n.volume;r.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=r.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(l){e.changeMuted(l)},{pre:function(u){u.preventDefault(),u.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),j.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(Pi,this.onVolumeChange),this.once(Le,this.onVolumeChange),h.typeOf(a)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,n){var r=this.player,a=this.find(".xgplayer-drag"),l=this.find(".xgplayer-bar");if(!(!l||!a)){var u=parseInt(e/l.getBoundingClientRect().height*1e3,10);a.style.height="".concat(e,"px");var c=Math.max(Math.min(u/1e3,1),0),f={volume:{from:r.volume,to:c}};r.muted&&(f.muted={from:!0,to:!1}),this.emitUserAction(n,"change_volume",{muted:r.muted,volume:r.volume,props:f}),r.volume=Math.max(Math.min(u/1e3,1),0),r.muted&&(r.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,n=e.volume,r=e.muted,a=this.find(".xgplayer-value-label"),l=Math.max(Math.min(n,1),0);a.innerText=r?0:Math.round(l*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),h.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2?arguments[2]:void 0,l=this._d,u=this.player;l.isActive||(this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=h.setTimeout(this,function(){l.isActive||(r?u.blur():u.focus(),h.removeClass(e.root,"slide-show"),l.isStart&&e.onBarMouseUp(a)),e._timerId=null},n))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var n=this.player,r=this._d;r.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:n.muted,volume:n.volume,props:{muted:{from:n.muted,to:!n.muted}}}),n.volume>0&&(n.muted=!n.muted),n.volume<.01&&(n.volume=this.config.miniVolume)}},{key:"animate",value:function(e,n){e||n===0?this.setAttr("data-state","mute"):n<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",j.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,n=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(n?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(Q);function Jc(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g>
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath>
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var Zc=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return M(i,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){V($(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Fe,function(){e.rotateDeg&&e.config.innerRotate&&h.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)});var n=this.player.root;this.rootWidth=n.style.width||n.offsetWidth||n.clientWidth,this.rootHeight=n.style.height||n.offsetHeight||n.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,n){if(e||(e=0),n){this.player.videoRotateDeg=e;return}var r=this.player,a=this.rootWidth,l=this.rootHeight,u=r.root,c=r.innerContainer,f=r.media,d=u.offsetWidth,g=c&&n?c.offsetHeight:u.offsetHeight,p=a,m=l,k=0,I=0;(e===.75||e===.25)&&(p="".concat(g,"px"),m="".concat(d,"px"),k=-(g-d)/2,I=-(d-g)/2);var P="translate(".concat(k,"px,").concat(I,"px) rotate(").concat(e,"turn)"),L={transformOrigin:"center center",transform:P,webKitTransform:P,height:m,width:p},Y=n?f:u,W=n?r.getPlugin("poster"):null;Object.keys(L).map(function(ee){Y.style[ee]=L[ee],W&&W.root&&(W.root.style[ee]=L[ee])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=this.player;this.rotateDeg||(this.rotateDeg=0);var l=e?1:-1;this.rotateDeg=(this.rotateDeg+1+l*.25*r)%1,this.updateRotateDeg(this.rotateDeg,n),a.emit(Mi,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:Jc}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(Be(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}(Ye);function Qc(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function ef(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var Je={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},tf=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"switchPIP",function(a){if(!t.isPIPAvailable())return!1;a.stopPropagation&&a.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(a,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(a,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return M(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(V($(i.prototype),"afterCreate",this).call(this),this.pMode=Je.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(Rt,function(){e.config.showIcon&&(h.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:Qc,class:"xg-get-pip"},pipIconExit:{icon:ef,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,n=this.player;this.leavePIPCallback=function(){var r=n.paused;h.setTimeout(e,function(){!r&&n.mediaPlay()},0),!r&&n.mediaPlay(),e.setAttr("data-state","normal"),e.pipWindow=null,n.emit(cn,!1)},this.enterPIPCallback=function(r){n.emit(cn,!0),r!=null&&r.pictureInPictureWindow&&(e.pipWindow=r.pictureInPictureWindow),e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(r){var a=n.media.webkitPresentationMode;e.pMode===Je.FULLSCREEN&&a!==Je.FULLSCREEN&&n.onFullscreenChange(null,!1),e.pMode=a,a===Je.PIP?e.enterPIPCallback(r):a===Je.INLINE&&e.leavePIPCallback(r)},n.media&&(n.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),n.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(n.media)&&n.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"copyStyleIntoPiPWindow",value:function(e){var n=ye(document.styleSheets).map(function(a){try{return ye(a.cssRules).map(function(u){return u.cssText}).join("")}catch{var l=document.createElement("link");l.rel="stylesheet",l.type=a.type,l.media=a.media,l.href=a.href,e.document.head.appendChild(l)}return""}).filter(Boolean).join(`
`),r=document.createElement("style");r.textContent=n,e.document.head.appendChild(r)}},{key:"requestPIP",value:function(){var e=this,n=this.player,r=this.playerConfig,a=this.config;if(!(!this.isPIPAvailable()||this.isPip))try{var l=r.poster;if(l&&(n.media.poster=h.typeOf(l)==="String"?l:l.poster),a.preferDocument&&this.isDocPIPAvailable()){var u={};if(a.width&&a.height)u.width=a.width,u.height=a.height;else{var c=n.root.getBoundingClientRect();u.width=c.width,u.height=c.height}documentPictureInPicture.requestWindow(u).then(function(f){var d=a.docPiPNode,g=a.docPiPStyle;e.enterPIPCallback();var p=d||n.root,m=p.parentElement,k=p.previousSibling,I=p.nextSibling;e.copyStyleIntoPiPWindow(f);var P=document.createElement("style");if(P.append("body{padding:0; margin:0;}"),g){var L="";typeof g=="string"?L=g:typeof g=="function"&&(L=g.call(a)),L&&P.append(L)}else p===n.root&&P.append(`
              .xgplayer{width: 100%!important; height: 100%!important;}
            `);f.document.head.append(P),f.document.body.append(p),f.addEventListener("pagehide",function(Y){m&&(I?m.insertBefore(p,I):k?m.insertBefore(p,k.nextSibling):m.appendChild(p)),e.leavePIPCallback()},{once:!0})})}else i.checkWebkitSetPresentationMode(n.media)?n.media.webkitSetPresentationMode("picture-in-picture"):n.media.requestPictureInPicture();return!0}catch(f){return console.error("requestPiP",f),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{if(this.isPIPAvailable()&&this.isPip){var n;this.isDocPIPAvailable()&&(n=documentPictureInPicture)!==null&&n!==void 0&&n.window?documentPictureInPicture.window.close():i.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()}return!0}catch(r){return console.error("exitPIP",r),!1}}},{key:"isPip",get:function(){var e,n=this.player;return!!(this.isDocPIPAvailable()&&(e=documentPictureInPicture)!==null&&e!==void 0&&e.window)||document.pictureInPictureElement&&document.pictureInPictureElement===n.media||n.media.webkitPresentationMode===Je.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,n=h.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!1;return n&&(h.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&h.typeOf(e.webkitSetPresentationMode)==="Function")||this.isDocPIPAvailable()}},{key:"isDocPIPAvailable",value:function(){return"documentPictureInPicture"in window&&/^(https|file)/.test(location.protocol)}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(Be(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:6,showIcon:!1,preferDocument:!1,width:void 0,height:void 0,docPiPNode:void 0,docPiPStyle:void 0}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),i}(Ye);function nf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var rf=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),T(y(e),"playNext",function(n){var r=y(e),a=r.player;n.preventDefault(),n.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),a.emit(kt,e.idx+1)):(e.nextHandler(),a.emit(kt))}),e.idx=-1,e}return M(i,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:nf}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=j.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var n=this.player;e&&(n.pause(),n.currentTime=0,n.switchURL?n.switchURL(e):n.src=e,n.config.url=e,n.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(Be(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(Q),qi={exports:{}};(function(o,s){(function(i,t){o.exports=t()})(Su,function(){return function i(t,e,n){var r=window,a="application/octet-stream",l=n||a,u=t,c=!e&&!n&&u,f=document.createElement("a"),d=function(U){return String(U)},g=r.Blob||r.MozBlob||r.WebKitBlob||d,p=e||"download",m,k;if(g=g.call?g.bind(r):Blob,String(this)==="true"&&(u=[u,l],l=u[0],u=u[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var I=new XMLHttpRequest;return I.open("GET",c,!0),I.responseType="blob",I.onload=function(U){i(U.target.response,p,a)},setTimeout(function(){I.send()},0),I}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u))if(u.length>1024*1024*1.999&&g!==d)u=W(u),l=u.type||a;else return navigator.msSaveBlob?navigator.msSaveBlob(W(u),p):ee(u);else if(/([\x80-\xff])/.test(u)){var P=0,L=new Uint8Array(u.length),Y=L.length;for(P;P<Y;++P)L[P]=u.charCodeAt(P);u=new g([L],{type:l})}m=u instanceof g?u:new g([u],{type:l});function W(U){var ue=U.split(/[:;,]/),re=ue[1],X=ue[2]=="base64"?atob:decodeURIComponent,fe=X(ue.pop()),ve=fe.length,me=0,$e=new Uint8Array(ve);for(me;me<ve;++me)$e[me]=fe.charCodeAt(me);return new g([$e],{type:re})}function ee(U,ue){if("download"in f)return f.href=U,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),ue===!0&&setTimeout(function(){r.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(U)&&(U="data:"+U.replace(/^data:([\w\/\-\+]+)/,a)),window.open(U)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=U),!0;var re=document.createElement("iframe");document.body.appendChild(re),!ue&&/^data:/.test(U)&&(U="data:"+U.replace(/^data:([\w\/\-\+]+)/,a)),re.src=U,setTimeout(function(){document.body.removeChild(re)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(m,p);if(r.URL)ee(r.URL.createObjectURL(m),!0);else{if(typeof m=="string"||m.constructor===d)try{return ee("data:"+l+";base64,"+r.btoa(m))}catch{return ee("data:"+l+","+encodeURIComponent(m))}k=new FileReader,k.onload=function(U){ee(this.result)},k.readAsDataURL(m)}return!0}})})(qi);var sf=qi.exports;const af=bn(sf);function of(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var lf=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),T(y(e),"download",function(n){if(!e.isLock){e.emitUserAction(n,"download");var r=e.playerConfig.url,a="";h.typeOf(r)==="String"?a=r:h.typeOf(r)==="Array"&&r.length>0&&(a=r[0].src);var l=e.getAbsoluteURL(a);af(l),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return M(i,[{key:"afterCreate",value:function(){V($(i.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(n){n.preventDefault(),n.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:of}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var n=document.createElement("div");n.innerHTML='<a href="'.concat(e,'">x</a>'),e=n.firstChild.href}return e}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(Be(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:3,disable:!0}}}]),i}(Ye),uf=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){V($(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(n){e.fitVideo&&(e.width=n.vWidth,e.height=n.vHeight)},this.once(Fe,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,n){var r=document.createElement("a");r.href=e,r.download=n;var a;try{typeof MouseEvent<"u"?a=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}):(a=document.createEvent("MouseEvents"),a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null))}catch(l){console.error("MouseEvent unsupported",l)}a&&r.dispatchEvent(a)}},{key:"createCanvas",value:function(e,n){var r=document.createElement("canvas"),a=r.getContext("2d");this.canvasCtx=a,this.canvas=r,r.width=e||this.config.width,r.height=n||this.config.height,a.imageSmoothingEnabled=!0,a.imageSmoothingEnabled&&(a.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var n=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot");var r=this.config;this.shot(r.width,r.height).then(function(a){n.emit(Ni,a),r.saveImg&&n.saveScreenShot(a,r.name+r.format)})}},{key:"shot",value:function(e,n){var r=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},l=this.config,u=this.player,c=a.quality||l.quality,f=a.type||l.type;return new Promise(function(d,g){var p=null,m;if(u.media.canvas)p=u.media.canvas;else{r.canvas?(r.canvas.width=e||l.width,r.canvas.height=n||l.height):r.createCanvas(e,n),p=r.canvas,m=r.canvasCtx;var k=u.media.videoWidth/u.media.videoHeight,I=p.width/p.height,P=0,L=0,Y=u.media.videoWidth,W=u.media.videoHeight,ee,U,ue,re;k>I?(ue=p.width,re=p.width/k,ee=0,U=Math.round((p.height-re)/2)):k===I?(ue=p.width,re=p.height,ee=0,U=0):k<I&&(ue=p.height*k,re=p.height,ee=Math.round((p.width-ue)/2),U=0),m.drawImage(u.media,P,L,Y,W,ee,U,ue,re)}var X=p.toDataURL(f,c).replace(f,"image/octet-stream");X=X.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),d(X)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Fe,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",n="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[n],'">').concat(this.i18n[n],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,saveImg:!0,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(Ye),cf=function(){function o(s){R(this,o),this.config=s.config,this.parent=s.root,this.root=h.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),s.root.appendChild(this.root);var i=this.config.maxHeight;i&&this.setStyle({maxHeight:i}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=this.config.domEventType==="touch"?"touchend":"click";this._delegates=Q.delegate.call(this,this.root,"li",t,this.onItemClick)}return M(o,[{key:"renderItemList",value:function(i){var t=this,e=this.config,n=this.root;i?e.data=i:i=e.data,e.style&&Object.keys(e.style).map(function(r){n.style[r]=e[r]}),i.length>0&&(this.attrKeys=Object.keys(i[0])),this.root.innerHTML="",i.map(function(r,a){var l=r.selected?"option-item selected":"option-item";r["data-index"]=a,t.root.appendChild(h.createDom("li","<span>".concat(r.showText,"</span>"),r,l))})}},{key:"onItemClick",value:function(i){i.delegateTarget||(i.delegateTarget=i.target);var t=i.delegateTarget;if(t&&h.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,n=this.root.querySelector(".selected");h.addClass(t,"selected"),n&&h.removeClass(n,"selected"),e(i,{from:n?this.getAttrObj(n,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(i,t){if(!i||!t)return{};var e={};t.map(function(r){e[r]=i.getAttribute(r)});var n=i.getAttribute("data-index");return n&&(e.index=Number(n)),e}},{key:"show",value:function(){h.removeClass(this.root,"hide"),h.addClass(this.root,"active")}},{key:"hide",value:function(){h.removeClass(this.root,"active"),h.addClass(this.root,"hide")}},{key:"setStyle",value:function(i){var t=this;Object.keys(i).forEach(function(e){t.root.style[e]=i[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(i){i.destroy&&i.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),o}(),ke={SIDE:"side",MIDDLE:"middle",DEFAULT:"default"},Ze={CLICK:"click",HOVER:"hover"};function ff(o,s){return o===ke.SIDE?s===te.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var Ve=j.device==="mobile",Et=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),T(y(e),"onEnter",function(n){n.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(n)}),T(y(e),"switchActiveState",function(n){n.stopPropagation();var r=e.config.toggleMode;r===Ze.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),T(y(e),"onLeave",function(n){n.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==ke.SIDE&&e.isActive&&e.toggle(!1)}),T(y(e),"onListEnter",function(n){e.enterType=2}),T(y(e),"onListLeave",function(n){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return M(i,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,n=this.config;this.initIcons(),Ve=Ve||this.domEventType==="touch",Ve&&j.device==="mobile"&&n.listType===ke.DEFAULT&&(n.listType=ke.SIDE),n.hidePortrait&&h.addClass(this.root,"portrait"),this.on([Fe,Se],function(){e._resizeList()}),this.once(Ee,function(){n.list&&n.list.length>0&&(e.renderItemList(n.list),e.show())}),Ve&&this.on(Sn,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),Ve?(n.toggleMode=Ze.CLICK,this.activeEvent="touchend"):this.activeEvent=n.toggleMode===Ze.CLICK?"click":"mouseenter",n.toggleMode===Ze.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,n=this.icons,r=Object.keys(n),a=!1;r.length>0&&(r.forEach(function(l){e.appendChild(".xgplayer-icon",n[l]),!a&&(a=n[l])}),this.isIcons=a),!a&&(this.appendChild(".xgplayer-icon",h.createDom("span","",{},"icon-text")),h.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,n,r){if(e===void 0)return"";var a=this.config.list;!r&&(r=this.player.lang),n=!n||h.isUndefined(e[n])?"text":n,typeof e=="number"&&(e=a[e]);try{return le(e[n])==="object"?e[n][r]||e[n].en:e[n]}catch(l){return console.warn(l),""}}},{key:"toggle",value:function(e){if(!(e===this.isActive||this.config.disable)){var n=this.player.controls,r=this.config.listType;e?(r===ke.SIDE?n.blur():n.focus(),this.optionsList&&this.optionsList.show()):(r===ke.SIDE?n.focus():n.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,n){e.stopPropagation();var r=this.config,a=r.listType,l=r.list;this.curIndex=n.to.index,this.curItem=l[this.curIndex],this.changeCurrentText();var u=this.config.isItemClickHide;(u||Ve||a===ke.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,n=this.curIndex<e.length?this.curIndex:0,r=e[n];r&&(this.find(".icon-text").innerHTML=this.getTextByLang(r,"iconText"))}}},{key:"renderItemList",value:function(e,n){var r=this,a=this.config,l=this.optionsList,u=this.player;if(typeof n=="number"&&(this.curIndex=n,this.curItem=a.list[n]),l){l.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:ff(a.listType,a.position),onItemClick:function(m,k){r.onItemClick(m,k)},domEventType:Ve?"touch":"mouse"},root:a.listType===ke.SIDE?u.innerContainer||u.root:this.root};if(this.config.isShowIcon){var f=this.player.root.getBoundingClientRect(),d=f.height,g=a.listType===ke.MIDDLE?d-50:d;g&&a.heightLimit&&(c.config.maxHeight="".concat(g,"px")),this.optionsList=new cf(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){if(this.config.heightLimit){var e=this.player.root.getBoundingClientRect(),n=e.height,r=this.config.listType===ke.MIDDLE?n-50:n;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(r,"px")})}}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===Ze.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:100,list:[],listType:"default",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:Ze.HOVER,heightLimit:!0}}}]),i}(Q),hf=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),e.curTime=0,e.isPaused=!0,e}return M(i,[{key:"beforeCreate",value:function(e){var n=e.config.list;Array.isArray(n)&&n.length>0&&(e.config.list=n.map(function(r){return!r.text&&r.name&&(r.text=r.name),r.text||(r.text=r.definition),r}))}},{key:"afterCreate",value:function(){var e=this;V($(i.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(n){e.changeDefinitionList(n)}),this.on(In,function(n){e.renderItemList(e.config.list,n.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||h.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,n=e.list,r=e.defaultDefinition;if(n.length>0){var a=null;n.map(function(l){l.definition===r&&(a=l)}),a||(a=n[0]),this.changeDefinition(a)}}},{key:"renderItemList",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],r=arguments.length>1?arguments[1]:void 0,a=r&&r.definition?r.definition:this.config.defaultDefinition;r&&n.forEach(function(c){c.selected=!1});var l=0,u=n.map(function(c,f){var d=ie(ie({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==a)&&(d.selected=!0,l=f),d});V($(i.prototype),"renderItemList",this).call(this,u,l)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(n){return!n.text&&n.name&&(n.text=n.name),n.text||(n.text=n.definition),n}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,n){this.player.changeDefinition(e,n)}},{key:"onItemClick",value:function(e,n){var r=this.player.definitionList;V($(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:n.from,to:n.to});for(var a=0;a<r.length;a++)n.to&&r[a].definition===n.to.definition&&(n.to.url=r[a].url),n.from&&r[a].definition===n.from.definition&&(n.from.url=r[a].url);this.player.changeDefinition(n.to,n.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return ie(ie({},Et.defaultConfig),{},{position:te.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),i}(Et),df=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),e.curRate=1,e}return M(i,[{key:"beforeCreate",value:function(e){var n=e.player.config.playbackRate,r=n?Array.isArray(n)?n:e.config.list:[];Array.isArray(r)&&(e.config.list=r.map(function(a){return typeof a=="number"?a={rate:a,text:"".concat(a,"x")}:!a.text&&a.rate&&(a.text="".concat(a.rate,"x")),a}))}},{key:"afterCreate",value:function(){var e=this;V($(i.prototype),"afterCreate",this).call(this),this.on(Ii,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(e){!this.config.list||this.config.list.length===0||V($(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,n){V($(i.prototype),"onItemClick",this).call(this,e,n);var r=e.delegateTarget,a=Number(r.getAttribute("rate"));if(!a||a===this.curValue)return!1;var l={playbackRate:{from:this.player.playbackRate,to:a}};this.emitUserAction(e,"change_rate",{props:l}),this.curValue=a,this.player.playbackRate=a}},{key:"renderItemList",value:function(){var e=this,n=this.player.playbackRate||1;this.curValue=n;var r=-1,a=this.config.list.map(function(l,u){var c={rate:l.rate};return c.rate===n&&(c.selected=!0,r=u),c.showText=e.getTextByLang(l),c});V($(i.prototype),"renderItemList",this).call(this,a,r)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,n=this.curIndex<e.length?this.curIndex:0,r=e[n],a="";!r||this.curIndex<0?a="".concat(this.player.playbackRate,"x"):a=this.getTextByLang(r,"iconText"),this.find(".icon-text").innerHTML=a}}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return ie(ie({},Et.defaultConfig),{},{position:te.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),i}(Et);function gf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function pf(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var ai=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;V($(i.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(yt,function(n){e.animate(n)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(r){r.preventDefault(),r.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,n=this.find(".xgplayer-icon");n.appendChild(e.cssFullscreen),n.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var n=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:n}),n?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var n=this.i18nKeys,r=this.find(".xg-tips");r&&this.changeLangTextKey(r,e?n.EXITCSSFULLSCREEN_TIPS:n.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:gf,class:"xg-get-cssfull"},exitCssFullscreen:{icon:pf,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){V($(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(Be(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:te.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(Ye),vf=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(r){r.preventDefault(),r.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(lt,function(n){e.onError(n)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.player,r=e.errorType,a=n.errorNote?this.i18n[n.errorNote]:"";if(!a)switch(r){case"decoder":a=this.i18n.MEDIA_ERR_DECODE;break;case"network":a=this.i18n.MEDIA_ERR_NETWORK;break;default:a=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=a,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),i}(Q),mf=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(n){(e.config.onClick||e.customOnClick)&&(n.preventDefault(),n.stopPropagation(),e.customOnClick?e.customOnClick(n):e.config.onClick(n))}),this.player.showPrompt=function(){e.showPrompt.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var n=this;Object.keys(e).map(function(r){n.root.style[r]=e[r]})}},{key:"showPrompt",value:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=a;var l=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),h.addClass(this.root,"show"),r.mode==="arrow"&&h.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),r.style&&this.setStyle(r.style);var u=typeof r.autoHide=="boolean"?r.autoHide:this.config.autoHide;if(u){var c=r.interval||l;this.intervalId=setTimeout(function(){n.hide()},c)}}}},{key:"hide",value:function(){h.removeClass(this.root,"show"),h.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(w.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(Q),oi={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Ji(o){Object.keys(oi).map(function(s){o[s]===void 0&&(o[s]=oi[s])})}var li={_updateDotDom:function(s,i){if(i){var t=this.calcuPosition(s.time,s.duration),e=s.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),i.setAttribute("data-text",s.text),i.setAttribute("data-time",s.time),t.isMini?h.addClass(i,"mini"):h.removeClass(i,"mini"),Object.keys(e).map(function(n){i.style[n]=e[n]})}},initDots:function(){var s=this;this._ispots.map(function(i){s.createDot(i,!1)}),this.ispotsInit=!0},createDot:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(i&&(Ji(s),this._ispots.push(s)),!(!this.ispotsInit&&i))){var e=this.calcuPosition(s.time,s.duration),n=s.style||{};n.left="".concat(e.left,"%"),n.width="".concat(e.width,"%");var r="xgspot_".concat(s.id," xgplayer-spot");e.isMini&&(r+=" mini");var a=s.template?'<div class="xgplayer-spot-pop">'.concat(s.template,"</div>"):"",l=h.createDom("xg-spot",a,{"data-text":s.text,"data-time":s.time,"data-id":s.id},r);Object.keys(n).map(function(u){l.style[u]=n[u]}),t.outer&&t.outer.appendChild(l),this.positionDot(l,s.id)}},findDot:function(s){if(this.player.plugins.progress){var i=this._ispots.filter(function(t,e){return t.id===s});return i.length>0?i[0]:null}},updateDot:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(s.id);if(e&&Object.keys(s).map(function(r){e[r]=s[r]}),!!this.ispotsInit){var n=t.find('xg-spot[data-id="'.concat(s.id,'"]'));n&&(this._updateDotDom(s,n),i&&this.showDot(s.id))}}},deleteDot:function(s){var i=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],n=0;n<i.length;n++)i[n].id===s&&e.push(n);for(var r=e.length,a=r-1;a>=0;a--)if(i.splice(e[a],1),this.ispotsInit){var l=t.find('xg-spot[data-id="'.concat(s,'"]'));l&&l.parentElement.removeChild(l)}}},deleteAllDots:function(){var s=this.player.plugins.progress;if(s){if(!this.ispotsInit){this._ispots=[];return}for(var i=s.root.getElementsByTagName("xg-spot"),t=i.length-1;t>=0;t--)s.outer.removeChild(i[t]);this._ispots=[]}},updateAllDots:function(){var s=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=i;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),n=e.length;if(n>i.length)for(var r=n-1;r>i.length-1;r--)t.outer.removeChild(e[r]);i.forEach(function(a,l){l<n?(e[l].setAttribute("data-id","".concat(a.id)),s._ispots.push(a),s.updateDot(a)):s.createDot(a)})}},positionDots:function(){var s=this,i=this._ispots,t=this.playerSize,e=this.player.sizeInfo,n=this.player.plugins.progress;!n||e.width===t.width||(t.width=e.width,t.left=e.left,i.forEach(function(r){var a=n.find('xg-spot[data-id="'.concat(r.id,'"]'));a&&s.positionDot(a,r.id)}))},positionDot:function(s,i){var t=h.findDom(s,".xgplayer-spot-pop");if(t){var e=this.playerSize,n=s.getBoundingClientRect(),r=t.getBoundingClientRect(),a=n.left-e.left,l=e.width-a-n.width/2;if(a<r.width/2||e.width<r.width){var u=r.width/2-a;t.style.left="".concat(u,"px")}else if(l<r.width/2){var c=l-r.width/2+n.width/2;t.style.left="".concat(c,"px")}else t.style.left="50%"}},updateDuration:function(){var s=this,i=this.player.plugins.progress;if(i){var t=this._ispots;t.forEach(function(e){var n=i.find('xg-spot[data-id="'.concat(e.id,'"]'));s._updateDotDom(e,n)})}},getAllDotsDom:function(){var s=this.player.plugins.progress;if(!s)return[];var i=s.root.getElementsByTagName("xg-spot");return i},getDotDom:function(s){var i=this.player.plugins.progress;if(i)return i.find('xg-spot[data-id="'.concat(s,'"]'))}};function yf(o){var s=o.config,i=o.player;Object.keys(li).map(function(e){o[e]=li[e].bind(o)});var t=i.config.progressDot||s.ispots||[];o._ispots=t.map(function(e){return Ji(e),e}),o.ispotsInit=!1,o.playerSize={left:i.sizeInfo.left,width:i.sizeInfo.width},o.on(De,function(){o.ispotsInit?o.updateDuration():o.initDots()}),o.on(Fe,function(){o.positionDots()})}var Qe={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},_f=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),T(y(e),"onMousemove",function(n){if(!e.config.disable){if(h.hasClass(n.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(n);return}(e._state.f||h.hasClass(n.target,"xg-spot-content"))&&(h.event(n),n.stopPropagation())}}),T(y(e),"onMousedown",function(n){e.config.disable||(e._state.f||h.hasClass(n.target,"xg-spot-content"))&&(h.event(n),n.stopPropagation())}),T(y(e),"onMouseup",function(n){if(e.isDrag){var r=e.player.plugins.progress;r&&r.pos&&(r.onMouseUp(n),!r.pos.isEnter&&r.onMouseLeave(n))}}),T(y(e),"onDotMouseLeave",function(n){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(n.target),e._curDot=null;var r=e.player.plugins.progress;r&&r.enableBlur(),e.show()}}),T(y(e),"onProgressMouseOver",function(n,r){if(!e.config.disable&&h.hasClass(r.target,"xgplayer-spot")&&!e._curDot){e._curDot=r.target,e.focusDot(r.target),e._curDot.children.length>0&&e.hide();var a=e.player.plugins.progress;a&&a.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return M(i,[{key:"beforeCreate",value:function(e){var n=e.player.plugins.progress;n&&(e.root=n.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(n,r){r.seekTime&&e.player.seek(r.seekTime)}),this.transformTimeHook=this.hook("transformTime",function(n){e.setTimeContent(h.format(n))}),yf(this),this.on(De,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var n=this;e&&Object.keys(e).map(function(r){n.config[r]=e[r]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,n=this.player.plugins.progress;if(n&&(Object.keys(Qe).map(function(a){e[Qe[a]]=e[Qe[a]].bind(e),n.addCallBack(a,e[Qe[a]])}),j.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var r=this.hook("previewClick",function(){});this.handlerPreviewClick=function(a){a.stopPropagation(),r(parseInt(e._state.now*1e3,10)/1e3,a)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,n){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&h.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&h.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,n){this.config.disable||h.hasClass(n.target,"xgplayer-spot")&&(n.stopPropagation(),n.preventDefault(),["time","id","text"].map(function(r){e[r]=n.target.getAttribute("data-".concat(r))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(n,e))}},{key:"updateLinePos",value:function(e,n){var r=this.root,a=this.previewLine,l=this.player,u=this.config,c=l.controls.mode,f=c==="flex",d=r.getBoundingClientRect().width;if(!(!d&&this._hasThumnail)){d=this._hasThumnail&&d<u.width?u.width:d;var g=e-d/2,p;g<0&&!f?(g=0,p=e-d/2):g>n-d&&!f?(p=g-(n-d),g=n-d):p=0,p!==void 0&&(a.style.transform="translateX(".concat(p.toFixed(2),"px)")),r.style.transform="translateX(".concat(g.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var n=this.timeText,r=this.timePoint;n.innerHTML=e,!this.thumbnail&&(r.innerHTML=e)}},{key:"updatePosition",value:function(e,n,r,a){var l=this.root,u=this.config,c=this._state;if(l){c.now=r,this.transformTimeHook(r);var f=this.timeStr;a&&a.target&&h.hasClass(a.target,"xgplayer-spot")?(this.showTips(a.target.getAttribute("data-text"),!1,f),this.focusDot(a.target),c.f=!0,u.isFocusDots&&c.f&&(c.now=parseInt(a.target.getAttribute("data-time"),10))):u.defaultText?(c.f=!1,this.showTips(u.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now),this.updateLinePos(e,n)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var n=this.player,r=this.videoPreview,a=this.config,l=n.plugins.thumbnail;if(l&&l.usable){this.thumbnail&&l.update(this.thumbnail,e,a.width,a.height);var u=r&&r.getBoundingClientRect();this.videothumbnail&&l.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(j.device!=="mobile"){var n=this.player,r=this.config,a=n.getPlugin("thumbnail");if(a&&a.setConfig(e),!a||!a.usable||!r.isShowThumbnail){h.addClass(this.root,"short-line no-thumbnail");return}else h.removeClass(this.root,"short-line no-thumbnail");r.mode==="short"&&h.addClass(this.root,"short-line"),this._hasThumnail=!0;var l=this.find(".xg-spot-thumbnail");this.thumbnail=a.createThumbnail(l,"progress-thumbnail"),r.isShowCoverPreview&&(this.videoPreview=h.createDom("xg-video-preview","",{},"xgvideo-preview"),n.root.appendChild(this.videoPreview),this.videothumbnail=a.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,n){var r=this.player.plugins.progress,a=this.player,l=r.root.getBoundingClientRect().width,u=a.duration/l*6;return e+n>a.duration&&(n=a.duration-e),e/a.duration*100,n/a.duration,{left:e/a.duration*100,width:n/a.duration*100,isMini:n<u}}},{key:"showDot",value:function(e){var n=this.findDot(e);if(n){var r=this.root.getBoundingClientRect(),a=r.width,l=n.time/this.player.duration*a;this.updatePosition(l,a,n.time)}}},{key:"focusDot",value:function(e,n){e&&(n||(n=e.getAttribute("data-id")),h.addClass(e,"active"),this._activeDotId=n)}},{key:"blurDot",value:function(e){if(!e){var n=this._activeDotId;e=this.getDotDom(n)}e&&(h.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";h.addClass(this.root,"no-timepoint"),e&&(h.addClass(this.find(".xg-spot-content"),"show-text"),n&&this.config.mode==="production"?(h.addClass(this.root,"product"),this.tipText.textContent=e):(h.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(r," ").concat(e)))}},{key:"hideTips",value:function(){h.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",h.removeClass(this.find(".xg-spot-content"),"show-text"),h.removeClass(this.root,"product")}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(e){h.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,n=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(n.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,n=this.player.plugins.progress;n&&Object.keys(Qe).map(function(r){n.removeCallBack(r,e[Qe[r]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return j.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),i}(Q),kf=function(o){H(i,o);var s=B(i);function i(t){var e;return R(this,i),e=s.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return M(i,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([De],function(){var n=e.config,r=n.pic_num,a=n.interval;e.usable&&(e.interval=a>0?a:Math.round(e.player.duration*1e3/r)/1e3)})}},{key:"setConfig",value:function(e){var n=this;if(e){var r=Object.keys(e);r.length<1||(r.forEach(function(a){n.config[a]=e[a]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,n=e.urls,r=e.pic_num;return n&&n.length>0&&r>0}},{key:"initThumbnail",value:function(){var e=this.config,n=e.width,r=e.height,a=e.pic_num,l=e.interval;this.ratio=n/r*100,this.interval=l||Math.round(this.player.duration/a),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var n=this;if(!this._preloadMark[e]){var r=this.config.urls,a=r.length,l=[];e>0&&l.push(e-1),l.push(e),e>0&&e<a-1&&l.push(e+1),l.map(function(u){!n._preloadMark[u]&&u>=0&&u<a&&(n._preloadMark[u]=1,h.preloadImg(r[u],function(){n._preloadMark[u]=2}))})}}},{key:"getPosition",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=this.config,l=a.pic_num,u=a.row,c=a.col,f=a.width,d=a.height;this.interval=Math.round(this.player.duration/l);var g=Math.ceil(e/this.interval);g=g>l?l:g;var p=g<u*c?0:Math.ceil(g/(u*c))-1,m=g-p*(c*u),k=m>0?Math.ceil(m/c)-1:0,I=m>0?m-k*c-1:0,P=0,L=0;if(n&&r){var Y=n/r;Y<f/d?(L=r,P=L*(f/d)):(P=n,L=P/(f/d))}else r?n||(L=r||d,P=L*(f/d)):(P=n||f,L=P/(f/d));var W=this.getUrlByIndex(p);return{urlIndex:p,rowIndex:k,colIndex:I,url:W,height:L,width:P,style:{backgroundImage:"url(".concat(W,")"),backgroundSize:"".concat(P*c,"px auto"),backgroundPosition:"-".concat(I*P,"px -").concat(k*L,"px"),width:"".concat(P,"px"),height:"".concat(L,"px")}}}},{key:"update",value:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=this.config,c=u.pic_num,f=u.urls;if(!(c<=0||!f||f.length===0)){var d=this.getPosition(n,r,a);this.preload(d.urlIndex),Object.keys(d.style).map(function(g){e.style[g]=d.style[g]}),Object.keys(l).map(function(g){e.style[g]=l[g]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,n){var r=h.createDom("xg-thumbnail","",{},"thumbnail ".concat(n));return e&&e.appendChild(r),r}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(Q);function Jt(o){return o?"background:".concat(o,";"):""}var bf=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onTimeupdate",function(){var a=t.player.ended,l=y(t),u=l.offsetDuration,c=t.currentTime;c=h.adjustTimeByDuration(c,u,a),t.update({played:c},u)}),t}return M(i,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"currentTime",get:function(){var e=this.player,n=e.offsetCurrentTime,r=e.currentTime;return n>=0?n:r}},{key:"afterCreate",value:function(){var e=this;this.root&&(this.on(de,this.onTimeupdate),this.on(Ke,function(){e.reset()}))}},{key:"reset",value:function(){this.update({played:0,cached:0},0)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},n=arguments.length>1?arguments[1]:void 0;!n||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/n*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/n*100,"%")))}},{key:"render",value:function(){var e=this.playerConfig,n=e.commonStyle,r=e.miniprogress;if(r){var a=this.config,l=a.mode,u=a.height,c={cached:Jt(n.cachedColor),played:Jt(n.playedColor),progress:Jt(n.progressColor),height:u>0&&u!==2?"height: ".concat(u,"px;"):""},f=l==="show"?"xg-mini-progress-show":"";return'<xg-mini-progress class="xg-mini-progress '.concat(f,'" style="').concat(c.progress," ").concat(c.height,`">
    <xg-mini-progress-cache class="xg-mini-progress-cache" style="`).concat(c.cached,`"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played" style="`).concat(c.played,`"></xg-mini-progress-played>
    </xg-mini-progress>`)}}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{mode:"auto",height:2}}}]),i}(Q),et={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function Cf(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function Tf(){try{var o=document.createElement("canvas").getContext;return!!o}catch{return!1}}var ht=null,Sf=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onLoadedData",function(a){t.player&&(t._frameCount=t.config.startFrameCount,t.stop(),t.renderOnTimeupdate(a),t.off(de,t.renderOnTimeupdate),t.on(de,t.renderOnTimeupdate))}),T(y(t),"onVisibilitychange",function(a){document.visibilityState==="visible"?t._checkIfCanStart()&&t.start():document.visibilityState==="hidden"&&t.stop()}),T(y(t),"renderOnTimeupdate",function(a){if(t._frameCount>0)t.renderOnce(),t._frameCount--;else{t._isLoaded=!0,t.off(de,t.renderOnTimeupdate);var l=t.config.startInterval;!t.player.paused&&t._checkIfCanStart()&&t.start(0,l)}}),T(y(t),"start",function(a,l){var u=t.player.video,c=Cf(),f=t.checkVideoIsSupport(u);!f||!t.canvasCtx||(l||(l=t.interval),t.stop(),u.videoWidth&&u.videoHeight&&(t.videoPI=u.videoHeight>0?parseInt(u.videoWidth/u.videoHeight*100,10):0,(t.config.mode===et.REAL_TIME||c-t.preTime>=l)&&(u&&u.videoWidth&&t.update(f,t.videoPI),t.preTime=c)),t.frameId=t._loopType==="timer"?h.setTimeout(y(t),t.start,l):h.requestAnimationFrame(t.start))}),T(y(t),"stop",function(){t.frameId&&(t._loopType==="timer"?h.clearTimeout(y(t),t.frameId):h.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return M(i,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var n=this.config,r=n.disable,a=n.mode,l=n.frameRate;r||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/l,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==et.REAL_TIME&&this.interval>=1e3?"timer":"animation",this.once(Rt,function(){e.player&&(e.init(),e.renderByPoster(),e.player.paused||e.start())}),a!==et.POSTER&&(a!==et.FIRST_FRAME&&(this.on(Ke,function(){e.stop()}),this.on(ge,function(){var u=e.config.startInterval;e._checkIfCanStart()&&e.start(0,u)}),this.on(it,function(){e.stop()})),this.on(Le,this.onLoadedData),this.on(Tn,function(){e._isLoaded=!1,e.stop()}),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"setConfig",value:function(e){var n=this;Object.keys(e).forEach(function(r){r==="root"&&e[r]!==n.config[r]?n.reRender(e[r]):r==="frameRate"?n.interval=parseInt(1e3/e[r],10):r==="disable"&&e[r]&&n.stop(),n.config[r]=e[r]})}},{key:"init",value:function(e){var n=this.player,r=this.config;this.canvasFilter=i.supportCanvasFilter();try{var a=e||r.root;a||(a=r.isInnerRender&&n.innerContainer||n.root),a.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(r.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=a.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=r.filter,this.canvas.style.webkitFilter=r.filter),this.mask=this.find("xgmask"),r.addMask&&(this.mask.style.background=r.maskBg),this.canvasCtx=this.canvas.getContext("2d")}catch(l){z.logError("plugin:DynamicBg",l)}}},{key:"reRender",value:function(e){var n=this.config.disable;if(!(!n&&!this.root)){this.stop();var r=this.root?this.root.parentElement:null;if(r!==e&&r.removeChild(this.root),!e){this.root=null;return}this.init(e),this.renderOnce();var a=this.config.startInterval;this._checkIfCanStart()&&this.start(0,a)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var n=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(n&&!(j.browser==="safari"&&h.isMSE(n)))return n;var r=n?n.tagName.toLowerCase():"";return r==="canvas"||r==="img"?n:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var n=h.typeOf(e)==="String"?e:h.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(n)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&!this.player.paused&&e!==et.FIRST_FRAME&&e!==et.POSTER}},{key:"renderOnce",value:function(){var e=this.player.video;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var n=this.checkVideoIsSupport(e);n&&this.update(n,this.videoPI)}}},{key:"updateImg",value:function(e){var n=this;if(e){var r=this.canvas.getBoundingClientRect(),a=r.width,l=r.height,u=new window.Image;u.onload=function(){if(!(!n.canvas||n.frameId||n.isStart)){n.canvas.height=l,n.canvas.width=a;var c=parseInt(a/l*100,10);n.update(u,c),u=null}},u.src=e}}},{key:"update",value:function(e,n){if(!(!this.canvas||!this.canvasCtx||!n))try{var r=this._pos,a=this.config,l=this.canvas.getBoundingClientRect(),u=l.width,c=l.height;if(u!==r.width||c!==r.height||r.pi!==n){var f=parseInt(u/c*100,10);r.pi=n,r.width!==u&&(r.width=this.canvas.width=u),r.height!==c&&(r.height=this.canvas.height=c);var d=c,g=u;f<n?g=parseInt(c*n/100,10):f>n&&(d=parseInt(u*100/n,10)),r.rwidth=g*a.multiple,r.rheight=d*a.multiple,r.x=(u-r.rwidth)/2,r.y=(c-r.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=a.filter),this.canvasCtx.drawImage(e,r.x,r.y,r.rwidth,r.rheight)}catch(p){z.logError("plugin:DynamicBg",p)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof ht=="boolean"||(ht=Tf()),ht}},{key:"supportCanvasFilter",value:function(){return!(j.browser==="safari"||j.browser==="firefox")}}]),i}(Q),Ef={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},rt="info",Zt=Ui,wf=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"_recordUserActions",function(a){var l=t._getTime(),u=Object.assign({},a,{msg:a.msg||a.action});t._stats[rt].push(ie(ie({type:"userAction"},l),{},{payload:u}))}),T(y(t),"_onReset",function(){t.reset()}),T(y(t),"_recordInfo",function(a){t.info(a)}),T(y(t),"_downloadStats",function(){var a=t.getStats(),l=new Blob([JSON.stringify(a)],{type:"application/json"}),u=window.URL.createObjectURL(l),c=document.createElement("a");c.style.display="none",c.href=u,c.download="player.txt",c.disabled=!1,c.click()}),t}return M(i,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(bt,this._recordUserActions),this.on(Zt.STATS_INFO,this._recordInfo),this.on(Zt.STATS_DOWNLOAD,this._downloadStats),this.on(Zt.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var n=this._getTime();this._stats[rt].push(ie(ie({},n),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var n=Date.now(),r=n-e.startMs,a=ie({cat:"function",dur:r,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(a)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},T(e,rt,[]),T(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,n=e.media,r=[],a=0;a<n.buffered.length;a++)r.push({start:n.buffered.start(a),end:n.buffered.end(a)});var l={currentTime:n.currentTime,readyState:n.readyState,buffered:r,paused:n.paused,ended:n.ended};return this._stats.media=l,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[rt],n=e.map(function(r){var a=r.payload.data,l="";try{a instanceof Error?l=a.msg:a!==void 0&&(l=JSON.stringify(a))}catch(u){console.log("err",u)}return"[".concat(r.timeFormat,"] : ").concat(r.payload.msg," ").concat(l," ")});return n}},{key:"_getProfile",value:function(){var e={traceEvents:[]},n=this._stats[rt];return n.forEach(function(r){r.payload.profile&&e.traceEvents.push(r.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),i}(He),Zi=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onGapJump",function(){var a=y(t),l=a.player,u=a.config;if(l.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(l.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){var c=l.media.buffered,f=u.smallGapLimit||.5,d=u.gapDetectionThreshold||.3,g=l.media.currentTime,p=t._getIndex(c,g,d);if(!(p===null||p===0)){console.log("GapJump  bufferRange ",c.start(p),c.end(p));var m=c.start(p)+.1,k=l.media.duration;if(!(m>k)){var I=m-g,P=I<=f;I<i.BROWSER_GAP_TOLERANCE||P&&(u.useGapJump!==!1&&(l.media.currentTime=t.isSafari?m+.1:m),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",p," isGapSamll:",P," currentTime:",l.media.currentTime," jumpSize:",g-l.media.currentTime),m!==.08&&l&&l.emit("log",{type:"oneevent",end_type:"gap",vid:l.config.vid,ext:{video_postion:Math.floor(m*1e3)}}))}}}}}),t}return M(i,[{key:"afterCreate",value:function(){var e=this,n=this.config.useGapJump;n!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(ut,this.onGapJump),this.on(ge,function(){e.hasPlayed=!0}),this.on(Ot,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,n,r){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var a=this._getBuffered(e),l=null,u=0;u<a.length;u++){var c=a[u];if(c.start>n&&(u===0||a[u-1].end-n<=r)){l=u;break}}return l}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var n=[],r=0;r<e.length;r++)n.push({start:e.start(r),end:e.end(r)});return n}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),i}(Q);Zi.BROWSER_GAP_TOLERANCE=.001;var Pf=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"onWaiting",function(){var a=y(t),l=a.config;t.jumpCnt>l.jumpCntMax||t.timer||l.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,l.waitingTime*1e3))}),T(y(t),"onJump",function(){var a=y(t),l=a.player,u=a.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>u.jumpCntMax||u.useWaitingTimeoutJump===!1)&&!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=u.jumpSize*(t.jumpCnt+1),t.jumpCnt===u.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var c=l.currentTime+t.jumpSize,f=l.media.duration;c>f||(t.jumpCnt++,l.currentTime=c)}}),t}return M(i,[{key:"afterCreate",value:function(){var e=this,n=this.config,r=n.useWaitingTimeoutJump,a=n.jumpSize;r!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=a,this.on(ut,this.onWaiting),this.on([Cn,Ee],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(ge,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),i}(Q),tt="cdn",dt=["cdn"],If=function(o){H(i,o);var s=B(i);function i(){var t;R(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t=s.call.apply(s,[this].concat(n)),T(y(t),"getSpeed",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tt;if(!t.speedListCache||!t.speedListCache[a]||t.speedListCache[a].length<=0)return 0;var l=0;return t.speedListCache[a].map(function(u){l+=u}),Math.floor(l/t.speedListCache[a].length)}),T(y(t),"startTimer",function(){h.isMSE(t.player.video)||(t.initSpeedList(),t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))}),T(y(t),"initSpeedList",function(){t.speedListCache={},dt.forEach(function(a){t.speedListCache[a]=[]})}),T(y(t),"_onRealSpeedChange",function(a){a.speed&&t.appendList(a.speed,a.type||tt)}),T(y(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var a=t.config,l=a.url,u=a.loadSize,c=a.testCnt,f=a.testTimeStep,d=l+(l.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=c)){t.cnt++;try{var g=new Date().getTime(),p=null,m=new XMLHttpRequest;t.xhr=m,m.open("GET",d);var k={},I=Math.floor(Math.random()*10);k.Range="bytes="+I+"-"+(u+I),k&&Object.keys(k).forEach(function(P){m.setRequestHeader(P,k[P])}),m.onreadystatechange=function(){if(m.readyState===4){t.xhr=null,p=new Date().getTime();var P=m.getResponseHeader("Content-Length")/1024*8,L=Math.round(P*1e3/(p-g));t.appendList(L),t.timer=setTimeout(t.testSpeed,f)}},m.send()}catch(P){console.error(P)}}}}),T(y(t),"appendList",function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tt;if(!(!t.speedListCache||!t.speedListCache[l])){var u=t.config.saveSpeedMax;t.speedListCache[l].length>=u&&t.speedListCache[l].shift(),t.speedListCache[l].push(a);var c=y(t),f=c.player;f&&(l===tt?f.realTimeSpeed=a:f[t.getSpeedName("realTime",l)]=a),t.updateSpeed(l)}}),T(y(t),"updateSpeed",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tt,l=t.getSpeed(a),u=y(t),c=u.player;if(c)if(a===tt)(!c.avgSpeed||l!==c.avgSpeed)&&(c.avgSpeed=l,c.emit(ln,{speed:l,realTimeSpeed:c.realTimeSpeed}));else{var f=t.getSpeedName("avg",a);(!c[f]||l!==c[f])&&(c[f]=l,c.emit(ln,{speed:l,realTimeSpeed:c.realTimeSpeed}))}}),t}return M(i,[{key:"afterCreate",value:function(){var e=this.config,n=e.openSpeed,r=e.addSpeedTypeList;(r==null?void 0:r.length)>0&&dt.push.apply(dt,ye(r)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,n&&this.on([Le,mt],this.startTimer)}},{key:"getSpeedName",value:function(e,n){return e+"Speed"+n.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([Le,mt],this.startTimer),dt.forEach(function(n){e.speedListCache&&e.speedListCache[n]&&(e.speedListCache[n]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),i}(Q),Lf=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i,[{key:"afterCreate",value:function(){var e=this,n=this.player,r=this.config,a=n.media||n.video;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!r.disabled){var l=a.getVideoPlaybackQuality;l&&(this.on(ge,function(){e._startTick()}),this.on(it,function(){e._stopTick()}),this.on(ze,function(){e._stopTick()}),this.on(Ke,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkBuffer",value:function(e,n){for(var r=!1,a=[],l=0;l<n.length;l++){var u=n.start(l),c=n.end(l);if(a.push({start:u,end:c}),u<=e&&e<=c-1){r=!0;break}}return{enoughBuffer:r,buffers:a}}},{key:"_checkStuck",value:function(e,n,r,a){var l=this.player.media||this.player.video,u=document.hidden,c=l.paused,f=l.readyState,d=l.currentTime,g=l.buffered;if(!(u||c||f<4)){var p=this._checkBuffer(d,g),m=p.enoughBuffer,k=p.buffers;m&&(e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({currentTime:d,buffers:k,curDecodedFrames:e,totalVideoFrames:n,droppedVideoFrames:r,checkInterval:a}),this._currentStuckCount>=this.config.stuckCount&&(this.emit(ji,this._payload),this._reset())):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){var e=this.player.media||this.player.video;if(e){var n=e.getVideoPlaybackQuality(),r=n.totalVideoFrames,a=n.droppedVideoFrames,l=performance.now();if(r&&this._lastCheckPoint){var u=r-this._lastDecodedFrames,c=l-this._lastCheckPoint;this._checkStuck(u,r,a,c)}this._lastDecodedFrames=r,this._lastCheckPoint=l}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),i}(Q);nt.use(Ef);var xf=M(function o(s,i){var t,e,n;R(this,o);var r=i&&i.isMobileSimulateMode==="mobile",a=i.isLive,l=a?[]:[zc,Hc,bf,_f,Wc],u=[].concat(l,[Bc,Gc,Zc,rf,hf,df,lf,uf,qc,tf]),c=[yc,_c,bc,Mc,Cc,vf,mf,kf,wc];this.plugins=[wf,vc].concat(ye(u),c,[Zi,Pf]);var f=r?"mobile":j.device;switch(f){case"pc":(t=this.plugins).push.apply(t,[ri,Xt,ai,If,Lf]);break;case"mobile":(e=this.plugins).push.apply(e,[Dc]);break;default:(n=this.plugins).push.apply(n,[ri,Xt,ai])}(j.os.isIpad||f==="pc")&&this.plugins.push(Sf),j.os.isIpad&&this.plugins.push(Xt),this.ignores=[],this.i18n=[]}),_e=function(o){H(i,o);var s=B(i);function i(){return R(this,i),s.apply(this,arguments)}return M(i)}(Ft);T(_e,"defaultPreset",xf);T(_e,"Util",h);T(_e,"Sniffer",j);T(_e,"Errors",vt);T(_e,"Events",Gu);T(_e,"Plugin",Q);T(_e,"BasePlugin",He);T(_e,"I18N",nt);T(_e,"STATE_CLASS",w);T(_e,"InstManager",Yi);const Af={id:"mse"},Df=A({__name:"xgplayer",props:{url:{default:""},poster:{default:""}},setup(o){const s=o;return xe(()=>{new _e({id:"mse",volume:0,lang:"zh",autoplay:!1,fluid:!0,controls:!0,leavePlayerTime:0,download:!0,keyShortcut:!0,url:s.url,poster:s.poster,start:{isShowPause:!0}})}),(i,t)=>(v(),b("div",Af))}}),Of=O(Df,[["__scopeId","data-v-9271753d"]]),Hf={extends:vu,enhanceApp({app:o}){o.component("xgplayer",Of)}};export{Hf as R,Nf as V,Ff as a,Mf as b,Lo as c,G as u};
